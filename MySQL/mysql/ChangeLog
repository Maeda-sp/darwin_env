ChangeSet
  1.2325.15.8 05/07/28 18:25:58 joerg@mysql.com +3 -0
  Combining zlib security fixes for version 4.1.13a:
  
  Fix for CAN-2005-1849 from zlib-1.2.3
     (originally:  2005/07/27 14:55:08+02:00 lenz@mysql.com )
  Ensure static linking takes the bundled libraries
     (originally:  2005/07/27 16:42:13+02:00 lenz@mysql.com )
  Version number change.

  zlib/inftrees.h
    1.2.1.1 05/07/28 18:25:55 joerg@mysql.com +5 -5
    - applied another security fix to resolve CAN-2005-1849, taken from the 1.2.3 zlib sources
    (CAN-2005-1849)
    (originally:  2005/07/27 14:54:58+02:00 lenz@mysql.com +5 -5 )

  support-files/mysql.spec.sh
    1.98.1.1 05/07/28 18:25:55 joerg@mysql.com +1 -0
    - build against the bundled zlib, when linking statically
    (originally:  2005/07/27 16:42:08+02:00 lenz@mysql.com +1 -0 )

  configure.in
    1.382.1.1 05/07/28 18:25:55 joerg@mysql.com +1 -1
    Update the version number.

ChangeSet
  1.2350.1.3 05/07/15 12:40:20 tomas@poseidon.ndb.mysql.com +3 -0
   BUG#11898 ndb_mgmd not releasing resources, added "ping" on add_listener
        + added close of some fd's
        + debug prints

  ndb/src/mgmsrv/Services.cpp
    1.33 05/07/15 12:40:16 tomas@poseidon.ndb.mysql.com +76 -17
     BUG#11898 ndb_mgmd not releasing resources, added "ping" on add_listener
          + added close of some fd's
          + debug prints

  ndb/src/mgmsrv/MgmtSrvr.hpp
    1.27 05/07/15 12:40:16 tomas@poseidon.ndb.mysql.com +1 -0
     BUG#11898 ndb_mgmd not releasing resources, added "ping" on add_listener
          + added close of some fd's
          + debug prints

  ndb/src/mgmclient/CommandInterpreter.cpp
    1.48 05/07/15 12:40:16 tomas@poseidon.ndb.mysql.com +28 -6
     BUG#11898 ndb_mgmd not releasing resources, added "ping" on add_listener
          + added close of some fd's
          + debug prints

ChangeSet
  1.2350.1.2 05/07/15 12:35:26 tomas@poseidon.ndb.mysql.com +1 -0
  Bug #11132, reverted bug-fix, it introduces another bug.  Ndbd's may get the same nodeid
  
  In 4.1 the connection to the management server _must_ stay, that is how we
  ensure that the nodeids are reserved correctly
  

  ndb/src/common/mgmcommon/ConfigRetriever.cpp
    1.25 05/07/15 12:35:17 tomas@poseidon.ndb.mysql.com +4 -6
    Bug #11132, reverted bug-fix, it introduces another bug.  Ndbd's may get the same nodeid
    
    In 4.1 the connection to the management server _must_ stay, that is how we
    ensure that the nodeids are reserved correctly
    

ChangeSet
  1.2350.1.1 05/07/15 10:44:54 tomas@poseidon.ndb.mysql.com +6 -0
   BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

  ndb/src/mgmsrv/MgmtSrvr.hpp
    1.26 05/07/15 10:44:48 tomas@poseidon.ndb.mysql.com +1 -1
     BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

  ndb/src/mgmsrv/MgmtSrvr.cpp
    1.60 05/07/15 10:44:47 tomas@poseidon.ndb.mysql.com +18 -0
     BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

  ndb/src/common/transporter/TransporterRegistry.cpp
    1.27 05/07/15 10:44:47 tomas@poseidon.ndb.mysql.com +6 -0
     BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

  ndb/src/common/transporter/Transporter.hpp
    1.7 05/07/15 10:44:47 tomas@poseidon.ndb.mysql.com +1 -0
     BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

  ndb/src/common/transporter/Transporter.cpp
    1.13 05/07/15 10:44:47 tomas@poseidon.ndb.mysql.com +15 -0
     BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

  ndb/include/transporter/TransporterRegistry.hpp
    1.9 05/07/15 10:44:47 tomas@poseidon.ndb.mysql.com +2 -0
     BUG#11596 (partial fix), IP addresses not shown in ndb_mgm SHOW command on second ndb_mgmd (or on ndb_mgmd restart)

ChangeSet
  1.2351 05/07/15 09:07:33 lenz@mysql.com +1 -0
  - manual merge of the fix for BUG#10984: create a "mysql" user group and assign the 
    mysql user account to that group in the server postinstall section of the RPM spec
    file

  support-files/mysql.spec.sh
    1.98 05/07/15 09:07:27 lenz@mysql.com +0 -18
    - manual merge of the fix for BUG#10984: create a "mysql" user group and assign the 
      mysql user account to that group in the server postinstall section.

ChangeSet
  1.1346.1.776 05/07/15 08:54:11 lenz@mysql.com +1 -0
  RPM spec file improvements:
  
  - create a "mysql" user group and assign the mysql user account to that group
    in the server postinstall section. (BUG 10984)
  - backported some changes from the 4.1 RPM spec file (cleanups: removed the incomplete
    Brazilian translations, more consequent use of macros)

  support-files/mysql.spec.sh
    1.61.1.30 05/07/15 08:54:06 lenz@mysql.com +26 -39
    - create a "mysql" user group and assign the mysql user account to that group
      in the server postinstall section. (BUG 10984)
    - backported some changes from the 4.1 RPM spec file (cleanups: removed the incomplete
      Brazilian translations, more consequent use of macros)

ChangeSet
  1.2350 05/07/15 11:17:57 ramil@mysql.com +1 -0
  Jim's fix for the #10443.
  
  Fix handling of floats and doubles when using prepared statements             
  API in the embedded server. 

  sql/sql_prepare.cc
    1.148 05/07/15 11:17:50 ramil@mysql.com +8 -4
    Jim's fix for the #10443.
    
    Within the embedded server, there's no need to use float4get()              
    and float8get() for setting parameters, since they are never                
    stored.

ChangeSet
  1.2347.1.1 05/07/14 17:50:33 lenz@mysql.com +1 -0
  - suppress warning when running this test with a "classic" build (which does not
    include InnoDB)

  mysql-test/t/ctype_utf8.test
    1.59 05/07/14 17:49:50 lenz@mysql.com +2 -0
    - suppress warning when running this test with a "classic" build (which does not
      include InnoDB)

ChangeSet
  1.2348 05/07/14 17:11:17 ramil@mysql.com +1 -0
  fix for #11808 backported.

ChangeSet
  1.2347 05/07/14 15:19:26 sergefp@mysql.com +3 -0
  Fix for BUG#11869: In Item_func_match::fix_index() handle the case when there is no
    source table present (this happens for ORDER BY after UNION)

  sql/item_func.cc
    1.252 05/07/14 15:19:12 sergefp@mysql.com +3 -0
    Fix for BUG#11869: In Item_func_match::fix_index() handle the case when there is no
      source table present (this happens for ORDER BY after UNION)

  mysql-test/t/fulltext_order_by.test
    1.16 05/07/14 15:19:12 sergefp@mysql.com +81 -0
    Testcase for BUG#11869

  mysql-test/r/fulltext_order_by.result
    1.15 05/07/14 15:19:12 sergefp@mysql.com +74 -0
    Testcase for BUG#11869

ChangeSet
  1.2346 05/07/14 15:13:36 sergefp@mysql.com +3 -0
  Fix for BUG#11700: in add_not_null_conds(), call full fix_fields() for the created NOT NULL.
    This is needed because in some cases range optimization is performed twice and added 
    NOT NULL item must have correct const_table_map() value. 

  sql/sql_select.cc
    1.419 05/07/14 15:13:33 sergefp@mysql.com +9 -3
    Fix for BUG#11700: in add_not_null_conds(), call full fix_fields() for the created NOT NULL.
      This is needed because in some cases range optimization is performed twice and added 
      NOT NULL item must have correct const_table_map() value. 

  mysql-test/t/select.test
    1.41 05/07/14 15:13:33 sergefp@mysql.com +41 -0
    Testcase for BUG#11700

  mysql-test/r/select.result
    1.58 05/07/14 15:13:33 sergefp@mysql.com +35 -0
    Testcase for BUG#11700

  tests/mysql_client_test.c
    1.152 05/07/14 17:10:55 ramil@mysql.com +14 -4
    fix for #11808 backported.
    cmp_double() introduced in order to avoid using long double registers           
    (for local double vars).

ChangeSet
  1.2345 05/07/13 13:49:35 mats@mysql.com +2 -0
  Bug#11905: Tables used in rpl_deadlock are not dropped at the 
  end of the test, causing subsequent tests to fail.

  mysql-test/t/rpl_deadlock.test
    1.3 05/07/13 13:47:50 mats@mysql.com +1 -1
    Tables used in the test but not dropped.

  mysql-test/r/rpl_deadlock.result
    1.3 05/07/13 13:47:50 mats@mysql.com +1 -1
    Result change.

ChangeSet
  1.2344 05/07/13 14:23:09 gluh@eagle.intranet.mysql.r18.ru +3 -0
  Bug #9854 hex() and out of range handling
    added out of range handling

  sql/item_strfunc.cc
    1.231 05/07/13 14:22:28 gluh@mysql.com +14 -2
    Bug #9854 hex() and out of range handling
      added out of range handling

  mysql-test/t/func_str.test
    1.76 05/07/13 14:22:28 gluh@mysql.com +5 -0
    Bug #9854 hex() and out of range handling
      added out of range handling

  mysql-test/r/func_str.result
    1.95 05/07/13 14:22:28 gluh@mysql.com +3 -0
    Bug #9854 hex() and out of range handling
      added out of range handling

ChangeSet
  1.2343 05/07/12 08:56:51 reggie@linux.site +4 -0
  Fixed some vio code that was using ___WIN__ instead of __WIN__

ChangeSet
  1.2341 05/07/12 08:35:27 jimw@mysql.com +2 -0
  Merge mysql.com:/home/jimw/my/mysql-4.1-11643
  into  mysql.com:/home/jimw/my/mysql-4.1-clean

ChangeSet
  1.2337.3.1 05/07/12 16:30:45 sergefp@mysql.com +3 -0
  Fix for BUG#11821: Make Item_type_holder be able to work with MIN(field), 
    MAX(field).

  sql/item.cc
    1.211 05/07/12 16:30:42 sergefp@mysql.com +6 -2
    Fix for BUG#11821: Make Item_type_holder be able to work with MIN(field), 
      MAX(field).

  mysql-test/t/subselect.test
    1.145 05/07/12 16:30:42 sergefp@mysql.com +8 -0
    Testcase for BUG#11821

  mysql-test/r/subselect.result
    1.166 05/07/12 16:30:42 sergefp@mysql.com +6 -0
    Testcase for BUG#11821

  BitKeeper/etc/config
    1.13 05/07/12 08:35:25 jimw@mysql.com +0 -1
    Resolve conflict

  sql/item_strfunc.cc
    1.230 05/07/12 08:34:46 jimw@mysql.com +0 -0
    Auto merged

  vio/viosocket.c
    1.32 05/07/12 08:56:30 reggie@linux.site +2 -2
    fixed typo with using 3 leading underscores instead of 2

  vio/vio.c
    1.20 05/07/12 08:56:30 reggie@linux.site +2 -2
    fixed typo with using 3 leading underscores instead of 2

  sql/net_serv.cc
    1.74 05/07/12 08:56:30 reggie@linux.site +1 -1
    fixed typo with using 3 leading underscores instead of 2

  include/my_global.h
    1.98 05/07/12 08:56:30 reggie@linux.site +1 -1
    set SOCKET_EWOULDBLOCK to the proper windows def WSAEWOULDBLOCK

ChangeSet
  1.2325.2.1 05/07/12 10:39:58 mskold@mysql.com +2 -0
  Disabled internal ndb system table test, since it only works on case sensitive systems

  mysql-test/r/ndb_autodiscover.result
    1.13 05/07/12 10:39:40 mskold@mysql.com +0 -14
    Disabled internal ndb system table test, since it only works on case sensitive systems

  mysql-test/t/ndb_autodiscover.test
    1.17 05/07/12 10:39:39 mskold@mysql.com +12 -11
    Disabled internal ndb system table test, since it only works on case sensitive systems

ChangeSet
  1.2337.1.2 05/07/12 06:01:26 lars@mysql.com +2 -0
  BUG#6987: Added note when stat is failing on relay log, added mutex for log rotatation.

  sql/slave.cc
    1.270 05/07/12 05:04:55 lars@mysql.com +2 -0
    Added mutex for relay log rotation

  sql/log.cc
    1.163 05/07/12 05:04:54 lars@mysql.com +2 -0
    Added a note when stat failed on log file

ChangeSet
  1.2337.1.1 05/07/11 16:56:18 brian@avenger.(none) +1 -0
  Fix for gcc 4.0 (they have removed min/max operators).

  include/my_global.h
    1.97 05/07/11 16:54:56 brian@avenger.(none) +1 -4
    Fix for gcc 4.0 (they removed min/max)

ChangeSet
  1.2334.1.1 05/07/11 10:37:21 jimw@mysql.com +1 -0
  Apply security patch to bundled zlib for CAN-2005-2096. (Bug #11844)

  zlib/inftrees.c
    1.4 05/07/11 09:55:03 jimw@mysql.com +1 -1
    Apply security patch for CAN-2005-2096

ChangeSet
  1.2338 05/07/11 15:59:49 joerg@mysql.com +1 -0
  cmd-line-utils/libedit/chared.c: Fix compile problem caused by use of "uint" which is undefined on QNX.

  cmd-line-utils/libedit/chared.c
    1.6 05/07/11 15:59:42 joerg@mysql.com +2 -2
    Re-apply vva's fix:
    cmd-line-utils/libedit/chared.c@1.4, 2004-08-31 17:50:59+05:00, vva@eagle.mysql.r18.ru
      discarded using of uint because it's undefined on qnx

ChangeSet
  1.2337 05/07/11 16:51:39 bar@mysql.com +1 -0
  field_conv.cc:
    Identation fix

  sql/field_conv.cc
    1.36 05/07/11 16:51:21 bar@mysql.com +1 -1
    Identation fix

ChangeSet
  1.2336 05/07/11 13:20:07 bar@mysql.com +3 -0
  field_conv.cc:
    Bug#11591
    CHAR column with utf8 does not work properly
    (more chars than expected)
    do_cut_string didn't call well_formed_length,
    and copied all data, which was wrong in the
    case of multibyte character set.
  ctype_utf8.result, ctype_utf8.test:
    adding test case

  mysql-test/r/ctype_utf8.result
    1.59 05/07/11 13:19:23 bar@mysql.com +11 -0
    adding test caser

  mysql-test/t/ctype_utf8.test
    1.58 05/07/11 13:19:14 bar@mysql.com +10 -0
    adding test case

  sql/field_conv.cc
    1.35 05/07/11 13:17:51 bar@mysql.com +19 -12
    Bug#11591
    CHAR column with utf8 does not work properly
    (more chars than expected)
    do_cut_string didn't call well_formed_length,
    and copied all data, which was wrong in the
    case of multibyte character set.

ChangeSet
  1.2324.2.3 05/07/08 21:04:54 lenz@mysql.com +2 -0
  - reverted adding mysql-test/t/*.def to the distribution (it is not supported in 4.1
    at all)

  scripts/make_binary_distribution.sh
    1.80 05/07/08 21:04:50 lenz@mysql.com +0 -1
    - reverted adding mysql-test/t/*.def to the distribution (it is not supported in 4.1
      at all)

  mysql-test/Makefile.am
    1.48 05/07/08 21:04:50 lenz@mysql.com +0 -2
    - reverted adding mysql-test/t/*.def to the distribution (it is not supported in 4.1
      at all)

ChangeSet
  1.2320.4.5 05/07/08 15:36:57 kent@mysql.com +1 -0
  mysql_client_test.dsp:
    Corrected libs and lib search path for debug target

  VC++Files/tests/mysql_client_test.dsp
    1.5 05/07/08 15:36:41 kent@mysql.com +6 -6
    Corrected libs and lib search path for debug target

ChangeSet
  1.2324.2.2 05/07/08 11:07:05 lenz@mysql.com +2 -0
  - added mysql-test/t/*.def to the source and binary distributions

  scripts/make_binary_distribution.sh
    1.79 05/07/08 11:06:59 lenz@mysql.com +1 -0
    - added mysql-test/t/*.def to the binary distribution

  mysql-test/Makefile.am
    1.47 05/07/08 11:06:59 lenz@mysql.com +2 -0
    - added mysql-test/t/*.def to the source distribution and make sure that "make install"
      installs it, too.

ChangeSet
  1.2320.6.1 05/07/07 11:49:44 jimw@mysql.com +6 -0
  Fix crash caused by calling DES_ENCRYPT() without the --des-key-file
  option having been passed to the server. (Bug #11643)

  BitKeeper/etc/config
    1.10.2.1 05/07/07 11:49:40 jimw@mysql.com +1 -1
    Disable openlogging

  mysql-test/t/func_des_encrypt.test
    1.1 05/07/07 11:47:40 jimw@mysql.com +9 -0
    New BitKeeper file ``mysql-test/t/func_des_encrypt.test''

  mysql-test/r/func_des_encrypt.result
    1.1 05/07/07 11:47:40 jimw@mysql.com +3 -0
    New BitKeeper file ``mysql-test/r/func_des_encrypt.result''

  sql/mysql_priv.h
    1.354 05/07/07 11:47:40 jimw@mysql.com +1 -0
    Add init_des_key_file() declaration

  sql/item_strfunc.cc
    1.228.1.1 05/07/07 11:47:40 jimw@mysql.com +11 -0
    Make sure to initialize mutex before using it

  sql/des_key_file.cc
    1.10 05/07/07 11:47:40 jimw@mysql.com +12 -6
    Split initialization of mutex to new function, and make sure static
    initialization variable is initialized.

  mysql-test/t/func_des_encrypt.test
    1.0 05/07/07 11:47:40 jimw@mysql.com +0 -0
    BitKeeper file /home/jimw/my/mysql-4.1-11643/mysql-test/t/func_des_encrypt.test

  mysql-test/r/func_des_encrypt.result
    1.0 05/07/07 11:47:40 jimw@mysql.com +0 -0
    BitKeeper file /home/jimw/my/mysql-4.1-11643/mysql-test/r/func_des_encrypt.result

ChangeSet
  1.2320.4.4 05/07/07 18:41:22 kent@mysql.com +1 -0
  mtr_cases.pl:
    Added support for the disabled.def file

  mysql-test/lib/mtr_cases.pl
    1.7 05/07/07 18:38:10 kent@mysql.com +39 -4
    Added support for the disabled.def file

ChangeSet
  1.2320.3.2 05/07/07 14:44:28 msvensson@neptunus.(none) +5 -0
  BUG#11635 mysqldump exports TYPE instead of USING for HASH Cluster indexes
    - Change output from SHOW CREATE TABLE to use USING instead of TYPE

  sql/sql_show.cc
    1.199 05/07/07 14:43:31 msvensson@neptunus.(none) +3 -3
    Change TYPE to USING as output from SHOW CREATE TABLE

  mysql-test/t/show_check.test
    1.43 05/07/07 14:43:31 msvensson@neptunus.(none) +9 -0
    Add test for BUG#11635

  mysql-test/r/sql_mode.result
    1.12 05/07/07 14:43:31 msvensson@neptunus.(none) +3 -3
    Update test results

  mysql-test/r/show_check.result
    1.63 05/07/07 14:43:31 msvensson@neptunus.(none) +20 -5
    Update test results

  mysql-test/r/ctype_utf8.result
    1.58 05/07/07 14:43:31 msvensson@neptunus.(none) +4 -4
    Update test results

ChangeSet
  1.2330 05/07/06 15:55:49 brian@zim.(none) +1 -0
  Merge baker@bk-internal.mysql.com:/home/bk/mysql-4.1
  into  zim.(none):/home/brian/mysql/mysql-4.1

  BitKeeper/etc/config
    1.12 05/07/06 15:55:45 brian@zim.(none) +0 -1
    Auto merged

ChangeSet
  1.2320.5.1 05/07/06 15:54:02 brian@zim.(none) +2 -0
  Typo for debug code. Bug #11705

  BitKeeper/etc/config
    1.10.1.1 05/07/06 15:53:38 brian@zim.(none) +1 -1
    turned off openlogging

  vio/viossl.c
    1.26 05/07/06 15:36:02 brian@zim.(none) +1 -1
    Typo for dbug code

ChangeSet
  1.2320.4.3 05/07/06 22:21:35 kent@mysql.com +2 -0
  mtr_misc.pl:
    Corrected appending of .exe to Windows executables
    Don't alter read only @_ in foreach loop
  mysql-test-run.pl:
    Improved cleanup of binlogs
    Use separate log file for second master
    Corrected Windows paths to executables

  mysql-test/lib/mtr_misc.pl
    1.4 05/07/06 22:18:12 kent@mysql.com +6 -5
    Corrected appending of .exe to Windows executables
    Don't alter read only @_ in foreach loop

  mysql-test/mysql-test-run.pl
    1.34 05/07/06 22:17:04 kent@mysql.com +24 -16
    Improved cleanup of binlogs
    Use separate log file for second master
    Corrected Windows paths to executables

ChangeSet
  1.2320.4.2 05/07/06 16:17:32 kent@mysql.com +2 -0
  mysql-test-run.pl:
    Handle case where SHELL isn't set in Cygwin
  mysql_client_test.dsp:
    Put output into the "client_debug" and "client_release" directories

  mysql-test/mysql-test-run.pl
    1.33 05/07/06 16:16:02 kent@mysql.com +2 -1
    Handle case where SHELL isn't set in Cygwin

  VC++Files/tests/mysql_client_test.dsp
    1.4 05/07/06 15:54:07 kent@mysql.com +4 -4
    Put output into the "client_debug" and "client_release" directories

ChangeSet
  1.2324.2.1 05/07/06 14:00:24 lenz@mysql.com +1 -0
  Merge mysql.com:/space/my/mysql-4.0-build
  into mysql.com:/space/my/mysql-4.1-build

  scripts/make_binary_distribution.sh
    1.78 05/07/06 14:00:22 lenz@mysql.com +0 -0
    Auto merged

ChangeSet
  1.1346.1.775 05/07/06 13:58:29 lenz@mysql.com +1 -0
  - backported a change for make_binary_distribution.sh from 5.0 for easier building of
    all versions: added an option "--machine" that allows to override the autodetected
    architecture string (e.g. "i386") that becomes part of the binary package name with 
    a different one
  - moved the removal of the BASE directory to the end of the make_binary_distribution
    script

  scripts/make_binary_distribution.sh
    1.49.1.12 05/07/06 13:58:27 lenz@mysql.com +11 -0
    - backported and fixed a change from 5.0 for easier building of all versions: added an
      option "--machine" that allows to override the autodetected architecture string 
      (e.g. "i386") that becomes part of the binary package name with a different one
    - moved the removal of the BASE directory to the end of the script

ChangeSet
  1.2320.1.2 05/07/06 11:23:36 mskold@mysql.com +2 -0
  Fixed handling of failed primary key update in INSERT .. ON DUPLICATE KEY UPDATE ..

  sql/ha_ndbcluster.h
    1.56 05/07/06 11:23:25 mskold@mysql.com +1 -1
    Fixed handling of failed primary key update in INSERT .. ON DUPLICATE KEY UPDATE ..

  sql/ha_ndbcluster.cc
    1.167 05/07/06 11:23:25 mskold@mysql.com +10 -5
    Fixed handling of failed primary key update in INSERT .. ON DUPLICATE KEY UPDATE ..

ChangeSet
  1.2320.4.1 05/07/06 13:51:53 ramil@mysql.com +1 -0
  a fix (bug #11544: Use of missing rint() function on QNX).

  include/my_global.h
    1.96 05/07/06 13:37:08 ramil@mysql.com +5 -0
    a fix (bug #11544: Use of missing rint() function on QNX).
    We have to explicitly specify std:: namespace to use 
    rint() and isnan() functions in C++ scope on QNX due 
    to an error in the /usr/include/math.h

ChangeSet
  1.2320.2.8 05/07/06 11:36:27 bell@sanja.is.com.ua +2 -0
  Merge

  mysql-test/t/func_str.test
    1.75 05/07/06 11:36:25 bell@sanja.is.com.ua +0 -0
    SCCS merged

  mysql-test/r/func_str.result
    1.94 05/07/06 11:36:25 bell@sanja.is.com.ua +0 -0
    SCCS merged

ChangeSet
  1.2320.3.1 05/07/05 15:19:04 jimw@mysql.com +3 -0
  Fix test cases

  mysql-test/t/grant.test
    1.28 05/07/05 15:19:02 jimw@mysql.com +2 -1
    Fix test case to

  mysql-test/r/grant.result
    1.37 05/07/05 15:19:02 jimw@mysql.com +2 -1
    Update results

  mysql-test/r/query_cache.result
    1.57 05/07/05 14:38:09 jimw@mysql.com +0 -1
    Remove stray empty line

ChangeSet
  1.2314.13.1 05/07/05 23:24:48 kent@mysql.com +23 -0
  Makefile.am:
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  tools/Makefile.am
    1.16 05/07/05 23:19:39 kent@mysql.com +5 -3
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

ChangeSet
  1.2320.2.4 05/07/05 12:54:12 jimw@mysql.com +1 -0
  Merge mysql.com:/home/jimw/my/mysql-4.1-11440
  into  mysql.com:/home/jimw/my/mysql-4.1-clean

  sql/sql_table.cc
    1.291 05/07/05 12:54:09 jimw@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2322 05/07/05 19:53:35 lenz@mysql.com +1 -0
  Merge mysql.com:/space/my/mysql-4.0-build
  into mysql.com:/space/my/mysql-4.1-build

  BitKeeper/etc/config
    1.11 05/07/05 19:53:34 lenz@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2320.2.2 05/07/05 17:27:37 kent@mysql.com +2 -0
  lowercase_table2.test, lowercase_table2.result:
    Use IF EXISTS in initiation section

  mysql-test/t/lowercase_table2.test
    1.11 05/07/05 17:20:15 kent@mysql.com +1 -1
    Use IF EXISTS in initiation section

  mysql-test/r/lowercase_table2.result
    1.15 05/07/05 17:20:15 kent@mysql.com +1 -1
    Use IF EXISTS in initiation section

ChangeSet
  1.1346.1.774 05/07/05 17:09:56 lenz@mysql.com +1 -0
  - disabled openlogging to satisfy BK when using a commercial license key

  BitKeeper/etc/config
    1.6.1.3 05/07/05 17:09:49 lenz@mysql.com +1 -1
    - disabled openlogging to satisfy BK when using a commercial license key

ChangeSet
  1.2314.12.1 05/07/05 13:55:54 mats@mysql.com +4 -0
  Bug#11401: Setting thd->lex so that engines (i.e., InnoDB) recognizes
  this as a LOAD DATA ... REPLACE INTO .. statement.

  mysql-test/t/rpl_innodb.test
    1.1 05/07/05 13:55:50 mats@mysql.com +46 -0

  mysql-test/std_data/loaddata_pair.dat
    1.1 05/07/05 13:55:50 mats@mysql.com +2 -0

  mysql-test/r/rpl_innodb.result
    1.1 05/07/05 13:55:50 mats@mysql.com +37 -0

  sql/log_event.cc
    1.182 05/07/05 13:55:50 mats@mysql.com +15 -0
    Setting thd->lex so that engines (i.e., InnoDB) recognizes this 
    as a LOAD DATA ... REPLACE INTO .. statement.

  mysql-test/t/rpl_innodb.test
    1.0 05/07/05 13:55:50 mats@mysql.com +0 -0
    BitKeeper file /home/bk/b11401-mysql-4.1/mysql-test/t/rpl_innodb.test

  mysql-test/std_data/loaddata_pair.dat
    1.0 05/07/05 13:55:50 mats@mysql.com +0 -0
    BitKeeper file /home/bk/b11401-mysql-4.1/mysql-test/std_data/loaddata_pair.dat

  mysql-test/r/rpl_innodb.result
    1.0 05/07/05 13:55:50 mats@mysql.com +0 -0
    BitKeeper file /home/bk/b11401-mysql-4.1/mysql-test/r/rpl_innodb.result

ChangeSet
  1.2321 05/07/05 09:15:37 lenz@mysql.com +1 -0
  - removed Docs/README.1st (it's obsolete)

  BitKeeper/deleted/.del-README.1st~918382b11c609069
    1.4 05/07/05 09:08:49 lenz@mysql.com +0 -0
    Delete: Docs/README.1st

ChangeSet
  1.2300.18.1 05/07/04 22:11:38 lenz@mysql.com +1 -0
  - The Max package should Require a matching MySQL-server package. Automatically replace
    the version string with the base version of the current build

  support-files/mysql.spec.sh
    1.97 05/07/04 22:11:33 lenz@mysql.com +1 -1
    - The Max package should Require a matching MySQL-server package. Automatically replace
      the version string with the base version of the current build

ChangeSet
  1.2314.5.6 05/07/04 20:36:38 mskold@mysql.com +1 -0
  Fixed indentation

  sql/ha_ndbcluster.cc
    1.166 05/07/04 20:36:11 mskold@mysql.com +3 -3
    Fixed indentation

ChangeSet
  1.2314.1.9 05/07/04 16:05:20 lenz@mysql.com +2 -0
  - manual merge

  configure.in
    1.382 05/07/04 16:05:15 lenz@mysql.com +0 -1
    - merge: keep local version number

  sql/sql_udf.cc
    1.50 05/07/04 14:12:09 lenz@mysql.com +0 -1
    Auto merged

ChangeSet
  1.1346.837.2 05/07/04 12:58:53 lenz@mysql.com +1 -0
  - bumped up version number in configure.in to 4.0.26

  configure.in
    1.191.1.138 05/07/04 12:58:50 lenz@mysql.com +1 -1
    - bumped up version number to 4.0.26

ChangeSet
  1.2316 05/07/04 01:36:06 bell@sanja.is.com.ua +2 -0
  merge

  mysql-test/t/query_cache.test
    1.43 05/07/04 01:36:04 bell@sanja.is.com.ua +3 -4
    merge

  mysql-test/r/query_cache.result
    1.56 05/07/04 01:36:04 bell@sanja.is.com.ua +1 -0
    merge

  vio/Makefile.am
    1.14 05/07/03 03:29:18 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  tests/Makefile.am
    1.16 05/07/03 03:29:15 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  strings/Makefile.am
    1.42 05/07/03 03:29:13 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  sql/Makefile.am
    1.114 05/07/03 03:29:11 kent@mysql.com +2 -2
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  regex/Makefile.am
    1.12 05/07/03 03:29:09 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  netware/Makefile.am
    1.13 05/07/03 03:29:06 kent@mysql.com +1 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  mysys/Makefile.am
    1.57 05/07/03 03:29:04 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  mysql-test/Makefile.am
    1.46 05/07/03 03:29:02 kent@mysql.com +1 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  myisammrg/Makefile.am
    1.13 05/07/03 03:29:00 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  myisam/Makefile.am
    1.30 05/07/03 03:28:58 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  merge/Makefile.am
    1.9 05/07/03 03:28:56 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  libmysqld/examples/Makefile.am
    1.23 05/07/03 03:28:54 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  libmysqld/Makefile.am
    1.60 05/07/03 03:28:52 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  libmysql_r/Makefile.am
    1.16 05/07/03 03:28:51 kent@mysql.com +3 -2
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  libmysql/Makefile.am
    1.41 05/07/03 03:28:49 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  isam/Makefile.am
    1.9 05/07/03 03:28:47 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  heap/Makefile.am
    1.9 05/07/03 03:28:44 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  extra/Makefile.am
    1.18 05/07/03 03:28:42 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  dbug/Makefile.am
    1.9 05/07/03 03:28:37 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  cmd-line-utils/readline/Makefile.am
    1.14 05/07/03 03:27:42 kent@mysql.com +2 -1

  cmd-line-utils/libedit/Makefile.am
    1.14 05/07/03 03:27:40 kent@mysql.com +2 -1
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

  client/Makefile.am
    1.44 05/07/03 03:27:05 kent@mysql.com +2 -2
    Added -I$(top_builddir)/include for searching
    generated header files, when builddir != srcdir

ChangeSet
  1.2314.7.4 05/07/02 16:13:35 monty@mysql.com +1 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/home/my/mysql-4.1

  sql/sql_select.cc
    1.418 05/07/02 16:13:34 monty@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2314.1.7 05/07/02 02:07:26 kent@mysql.com +1 -0
  Merge mysql.com:/Users/kent/mysql/bk/mysql-4.0
  into mysql.com:/Users/kent/mysql/bk/mysql-4.1

  configure.in
    1.381 05/07/02 02:07:23 kent@mysql.com +0 -6
    Auto merged

ChangeSet
  1.1346.837.1 05/07/02 02:00:56 kent@mysql.com +1 -0
  configure.in:
    Enable build with CXX=gcc and gcc version 4

  configure.in
    1.191.1.137 05/07/02 01:53:51 kent@mysql.com +6 -1
    Enable build with CXX=gcc and gcc version 4

ChangeSet
  1.2314.11.1 05/07/01 20:13:07 bell@sanja.is.com.ua +1 -0
  fixed create_distinct_group() to make references via ref_pointer_array

  sql/sql_select.cc
    1.416.1.1 05/07/01 20:12:32 bell@sanja.is.com.ua +14 -5
    fixed create_distinct_group() to make references via ref_pointer_array

ChangeSet
  1.2314.10.1 05/07/01 15:40:29 msvensson@neptunus.(none) +1 -0
  Merge neptunus.(none):/home/msvensson/mysql/mysql-4.1-1.2310.2.2
  into neptunus.(none):/home/msvensson/mysql/mysql-4.1

  client/mysqltest.c
    1.169 05/07/01 15:40:23 msvensson@neptunus.(none) +0 -0
    Auto merged

ChangeSet
  1.2310.2.3 05/07/01 15:39:36 msvensson@neptunus.(none) +1 -0
  Win port fixes

  client/mysqltest.c
    1.167.1.1 05/07/01 15:39:33 msvensson@neptunus.(none) +5 -0
    Check for HAVE_SYS_WAIT_H
    Define WEXITSTATUS if not defined

ChangeSet
  1.2314.9.1 05/07/01 12:01:00 lars@mysql.com +1 -0
  BUG#11678: mysqldump --master-data should fail if master binlog disabled

  client/mysqldump.c
    1.193 05/07/01 12:00:54 lars@mysql.com +9 -0
    Add error message in case master does not have binlogging enabled

ChangeSet
  1.2314.8.1 05/07/01 09:40:05 monty@mysql.com +1 -0
  Optimization during review
  Add extra check to delete [] to ensure we are not deleting not allocated data

  sql/sql_select.cc
    1.417 05/07/01 09:40:01 monty@mysql.com +4 -5
    Optimization
    Add extra check to delete [] to ensure we are not deleting not allocated data

ChangeSet
  1.1346.1.772 05/06/30 17:33:23 lenz@mysql.com +1 -0
  - backport of a compile fix from 4.1 (ChangeSet@1.2260.23.2 2005/05/19 from reggie)
    "changed dl_name to udf->dl in mysql_create_function"

  sql/sql_udf.cc
    1.15.1.15 05/06/30 17:33:19 lenz@mysql.com +1 -1
    - backport of a compile fix from 4.1 (ChangeSet@1.2260.23.2 2005/05/19 from reggie)
      "changed dl_name to udf->dl in mysql_create_function"

ChangeSet
  1.2314.7.2 05/06/30 17:55:47 jani@ua141d10.elisa.omakaista.fi +1 -0
  Don't allow 8bytes for data file pointers for now.

  myisam/mi_create.c
    1.46 05/06/30 17:55:44 jani@ua141d10.elisa.omakaista.fi +3 -0
    Don't allow 8bytes for data file pointers for now.

ChangeSet
  1.2314.7.1 05/06/30 16:13:22 jani@ua141d10.elisa.omakaista.fi +4 -0
  Fixed Bug#11226 and reverted fix for Bug#6993.
  Using 8 bytes for data pointer does not work at least on
  all computers. The result may become 0 or negative number.
  (mysqld, myisamchk)
   

  sql/mysqld.cc
    1.578 05/06/30 16:13:18 jani@ua141d10.elisa.omakaista.fi +1 -1
    Restricted myisam_data_pointer_size back to 7.

  mysql-test/t/variables.test
    1.48 05/06/30 16:13:18 jani@ua141d10.elisa.omakaista.fi +5 -1
    Restricted myisam_data_pointer_size back to 7.

  mysql-test/r/variables.result
    1.60 05/06/30 16:13:18 jani@ua141d10.elisa.omakaista.fi +2 -2
    Restricted myisam_data_pointer_size back to 7.

  myisam/mi_create.c
    1.45 05/06/30 16:13:18 jani@ua141d10.elisa.omakaista.fi +3 -4
    Fixed Bug#11226, "Dynamic table >4GB issue".

ChangeSet
  1.2314.5.5 05/06/29 16:17:47 mskold@mysql.com +1 -0
  Changed delete_row to always get key from record argument, removed unused function

  sql/ha_ndbcluster.cc
    1.165 05/06/29 16:17:32 mskold@mysql.com +0 -19
    Changed delete_row to always get key from record argument, removed unused function

ChangeSet
  1.2314.5.4 05/06/29 16:13:50 mskold@mysql.com +2 -0
  Changed delete_row to always get key from record argument

  sql/ha_ndbcluster.h
    1.55 05/06/29 16:13:22 mskold@mysql.com +2 -3
    Changed delete_row to always get key from record argument

  sql/ha_ndbcluster.cc
    1.164 05/06/29 16:13:22 mskold@mysql.com +12 -16
    Changed delete_row to always get key from record argument

ChangeSet
  1.2314.5.3 05/06/29 15:31:43 mskold@mysql.com +1 -0
  Moved connections first in test, to reduce risk of connecting before servers are fully connected

  mysql-test/t/ndb_alter_table.test
    1.20 05/06/29 15:28:13 mskold@mysql.com +7 -4
    Moved connections first in test, to reduce risk of connecting before servers are fully connected

ChangeSet
  1.2314.6.1 05/06/29 02:40:25 igor@rurik.mysql.com +3 -0
  func_str.test:
    Added test cases for bug #11469.
  item_strfunc.h:
    Fixed bug #11469: wrong implementation of the not_null_tables
    method for CONCAT_WS.

  mysql-test/r/func_str.result
    1.92.1.1 05/06/29 02:40:06 igor@rurik.mysql.com +50 -0

  mysql-test/t/func_str.test
    1.73.1.1 05/06/29 02:39:37 igor@rurik.mysql.com +56 -0
    Added test cases for bug #11469.

  sql/item_strfunc.h
    1.96 05/06/29 02:37:26 igor@rurik.mysql.com +1 -0
    Fixed bug #11469: wrong implementation of the not_null_tables
    method for CONCAT_WS.

ChangeSet
  1.2314.4.1 05/06/28 22:20:25 bell@sanja.is.com.ua +3 -0
  fixed not_null_tables() for IN() (BUG#9393)
  (IN() remove NULL rows only for tables from first argument (value which we looking for in IN() list) but not for tables from IN() list)
  Also it will be better change Item::not_null_tables() to prohibit this optimisation by default for new created items in 5.0 or 5.1.

  sql/item_cmpfunc.h
    1.107 05/06/28 22:20:22 bell@sanja.is.com.ua +6 -0
    correct not_null_tables() for IN

  mysql-test/t/select.test
    1.40 05/06/28 22:20:22 bell@sanja.is.com.ua +15 -0
    IN with outer join condition

  mysql-test/r/select.result
    1.57 05/06/28 22:20:22 bell@sanja.is.com.ua +9 -0
    IN with outer join condition

ChangeSet
  1.2314.2.6 05/06/28 21:45:11 bell@sanja.is.com.ua +3 -0
  fixed substring() length calculation in case of constant negative argument (BUG#10269)

  sql/item_strfunc.cc
    1.229 05/06/28 21:44:37 bell@sanja.is.com.ua +2 -1
    fixed substring() length calculation in case of constant negative argument

  mysql-test/t/func_str.test
    1.74 05/06/28 21:44:37 bell@sanja.is.com.ua +9 -0
    Correct length reporting from substring()

  mysql-test/r/func_str.result
    1.93 05/06/28 21:44:37 bell@sanja.is.com.ua +15 -0
    Correct length reporting from substring()

ChangeSet
  1.2314.3.1 05/06/28 15:06:16 monty@mysql.com +5 -0
  Move reset of insert_values to ensure it's done also during error conditions
  This fixed a failure of insert_update.test on some platforms

  sql/sql_parse.cc
    1.450 05/06/28 15:06:12 monty@mysql.com +1 -1
    Move reset of insert_values to ensure it's done also during error conditions
    This fixed a failure of insert_update.test on some platforms

  sql/sql_insert.cc
    1.170 05/06/28 15:06:12 monty@mysql.com +4 -0
    Added comment

  sql/sql_base.cc
    1.255 05/06/28 15:06:12 monty@mysql.com +1 -0
    Safety assert

  sql/opt_range.cc
    1.141 05/06/28 15:06:12 monty@mysql.com +1 -2
    Simple optimization for common case

  mysys/thr_alarm.c
    1.45 05/06/28 15:06:11 monty@mysql.com +1 -0
    Fixed problem noticed by valgrind

ChangeSet
  1.2314.2.3 05/06/28 03:24:06 igor@rurik.mysql.com +1 -0
  Merge rurik.mysql.com:/home/igor/mysql-4.1
  into rurik.mysql.com:/home/igor/dev/mysql-4.1-0

  sql/sql_select.cc
    1.416 05/06/28 03:23:59 igor@rurik.mysql.com +0 -0
    Auto merged

ChangeSet
  1.2314.2.2 05/06/28 03:20:00 igor@rurik.mysql.com +2 -0
  Merge ibabaev@bk-internal.mysql.com:/home/bk/mysql-4.1
  into rurik.mysql.com:/home/igor/mysql-4.1

  sql/sql_select.cc
    1.415 05/06/28 03:19:53 igor@rurik.mysql.com +0 -0
    Auto merged

  sql/field.cc
    1.222 05/06/28 03:19:52 igor@rurik.mysql.com +0 -0
    Auto merged

ChangeSet
  1.2300.17.2 05/06/28 03:18:37 igor@rurik.mysql.com +3 -0
  group_by.result, group_by.test:
    Added a test case for bug #11414.
  sql_select.cc:
    Fixed bug #11414: crash on Windows with some simple
    GROUP BY queries.
    It happened to an allocation of an array containing
    0 Copy_field elements in setup_copy_fields.
    The bug had been already fixed in 5.0.

  mysql-test/r/group_by.result
    1.50 05/06/28 03:17:15 igor@rurik.mysql.com +6 -0
    Added a test case for bug #11414.

  mysql-test/t/group_by.test
    1.40 05/06/28 03:16:45 igor@rurik.mysql.com +12 -0
    Added a test case for bug #11414.

  sql/sql_select.cc
    1.413.1.2 05/06/28 03:13:43 igor@rurik.mysql.com +3 -2
    Fixed bug #11414: crash on Windows with some simple
    GROUP BY queries.
    It happened to an allocation of an array containing
    0 Copy_field elements in setup_copy_fields.
    The bug had been already fixed in 5.0.

ChangeSet
  1.2314.2.1 05/06/28 15:00:22 bar@mysql.com +6 -0
  ctype_ucs.result, ctype_ucs.test, ctype_utf8.result, ctype_utf8.test:
    Fixing tests accordingly.
  ctype-ucs2.c:
    The same fix for UCS2.
  ctype-utf8.c:
    Bug #9557
    MyISAM utf8 table crash
    The problem was that my_strnncollsp_xxx could
    return big value in the range 0..0xffff.
    for some constant pairs it could return 32738,
    which is defined as MI_FOUND_WRONG_KEY in
    myisamdef.h. As a result, table considered to
    be crashed. 
    Fix to return -1,0 or 1.

  mysql-test/r/ctype_ucs.result
    1.25 05/06/28 14:59:56 bar@mysql.com +11 -0
    Fixing tests accordingly.

  mysql-test/t/ctype_ucs.test
    1.23 05/06/28 14:59:53 bar@mysql.com +12 -0
    Fixing tests accordingly.

  mysql-test/r/ctype_utf8.result
    1.57 05/06/28 14:59:15 bar@mysql.com +11 -0
    Fixing tests accordingly.

  mysql-test/t/ctype_utf8.test
    1.57 05/06/28 14:59:04 bar@mysql.com +12 -0
    Fixing tests accordingly.

  strings/ctype-ucs2.c
    1.41 05/06/28 14:58:58 bar@mysql.com +3 -3
    The same fix for UCS2.

  strings/ctype-utf8.c
    1.85 05/06/28 14:56:39 bar@mysql.com +2 -2
    Bug #9557
    MyISAM utf8 table crash
    The problem was that my_strnncollsp_xxx could
    return big value in the range 0..0xffff.
    for some constant pairs it could return 32738,
    which is defined as MI_FOUND_WRONG_KEY in
    myisamdef.h. As a result, table considered to
    be crashed. 
    Fix to return -1,0 or 1.

ChangeSet
  1.2314.1.5 05/06/28 05:25:29 kent@mysql.com +1 -0
  make_win_src_distribution.sh:
    Bug#11009, some more cleanup of unneded files from bootstrap

  scripts/make_win_src_distribution.sh
    1.33 05/06/28 05:25:03 kent@mysql.com +3 -0
    Bug#11009, some more cleanup of unneded files from bootstrap

ChangeSet
  1.2314.1.4 05/06/28 04:49:03 kent@mysql.com +1 -0
  Makefile.am:
    Bug#9873, reenabled --without-man option to work

  Makefile.am
    1.68 05/06/28 04:48:32 kent@mysql.com +1 -1
    Bug#9873, reenabled --without-man option to work

ChangeSet
  1.2314.1.3 05/06/28 04:44:27 kent@mysql.com +1 -0
  configure.in:
    Enable build with CXX=gcc and gcc version 4

  configure.in
    1.380 05/06/28 04:43:51 kent@mysql.com +6 -1
    Enable build with CXX=gcc and gcc version 4

ChangeSet
  1.2314.1.2 05/06/28 04:37:01 kent@mysql.com +1 -0
  mysqld.dsp:
    Corrected quoting of string "pro-nt"

  VC++Files/sql/mysqld.dsp
    1.33 05/06/28 04:36:06 kent@mysql.com +1 -1
    Corrected quoting of string "pro-nt"

ChangeSet
  1.2314.1.1 05/06/28 04:33:06 kent@mysql.com +1 -0
  opt_range.cc:
    Added missing `;' to DBUG_RETURN()

  sql/opt_range.cc
    1.140 05/06/28 04:32:04 kent@mysql.com +1 -1
    Added missing `;' to DBUG_RETURN()

ChangeSet
  1.2315 05/06/28 00:52:21 bell@sanja.is.com.ua +3 -0
  abort storing query to query cache if warnings appeared (BUG#9414)

  sql/sql_error.cc
    1.24 05/06/28 00:51:42 bell@sanja.is.com.ua +2 -0
    abort storing query to query cache if warnings appeared

  mysql-test/t/query_cache.test
    1.41.1.1 05/06/28 00:51:42 bell@sanja.is.com.ua +19 -0
    Query with warning prohibited to query cache

  mysql-test/r/query_cache.result
    1.54.1.1 05/06/28 00:51:42 bell@sanja.is.com.ua +35 -0
    Query with warning prohibited to query cache

ChangeSet
  1.2314 05/06/27 19:42:35 monty@mysql.com +1 -0
  Fix test after last push

ChangeSet
  1.2312 05/06/27 20:31:00 monty@mishka.local +9 -0
  Portability fixes
  Fixes while reviewing new pushed code
  NULL as argument to encrypt/decrypt should return NULL without a warning

  mysql-test/r/func_encrypt_nossl.result
    1.3 05/06/27 19:42:32 monty@mysql.com +1 -0
    Fix test after last push

  sql/sql_table.cc
    1.290 05/06/27 20:30:54 monty@mishka.local +0 -1
    Removed extra new line

  sql/sql_parse.cc
    1.449 05/06/27 20:30:54 monty@mishka.local +1 -0
    Fix wrong merge (fix was not needed as the previous code was reverted)

  sql/item_strfunc.cc
    1.228 05/06/27 20:30:54 monty@mishka.local +3 -3
    NULL as argument to encrypt/decrypt should return NULL without a warning

  sql/handler.cc
    1.169 05/06/27 20:30:53 monty@mishka.local +6 -10
    Cleanup during code review

  mysql-test/t/func_encrypt_nossl.test
    1.2 05/06/27 20:30:53 monty@mishka.local +1 -0
    Added test of NULL argument

  mysql-test/r/func_encrypt_nossl.result
    1.2 05/06/27 20:30:53 monty@mishka.local +4 -0
    Added test of NULL argument

  mysql-test/r/func_encrypt.result
    1.8 05/06/27 20:30:53 monty@mishka.local +39 -48
    NULL as argument to encrypt/decrypt should return NULL without a warning

  client/mysqltest.c
    1.168 05/06/27 20:30:53 monty@mishka.local +18 -19
    Cleanup of code during review
    Portability fixes (Don't use 'bool')

  client/mysqldump.c
    1.192 05/06/27 20:30:53 monty@mishka.local +32 -23
    Cleanup
    Ensure we free allocated memory
    Portability fixes

ChangeSet
  1.2310.2.2 05/06/27 17:25:37 marko@hundin.mysql.fi +1 -0
  InnoDB: After review fixes

  innobase/os/os0file.c
    1.102 05/06/27 17:25:30 marko@hundin.mysql.fi +10 -3
    os_file_set_size(): After review fixes (prevent overflows)

ChangeSet
  1.2310.2.1 05/06/27 17:04:57 marko@hundin.mysql.fi +3 -0
  InnoDB: Optimize the extension of files.  This will greatly speed
  up CREATE TABLE in innodb_file_per_table=1 mode.

  innobase/os/os0file.c
    1.101 05/06/27 17:04:51 marko@hundin.mysql.fi +21 -29
    os_file_set_size(): Corrected the synopsis and some comments.
    s/offset/current_size; s/low/desired_size/;
    Do not allocate or initialize more memory than is necessary.
    Write at most one megabyte at a time.

  innobase/include/os0file.h
    1.34 05/06/27 17:04:51 marko@hundin.mysql.fi +1 -1
    os_file_set_size(): Corrected the synopsis

  innobase/fil/fil0fil.c
    1.53 05/06/27 17:04:51 marko@hundin.mysql.fi +11 -13
    fil_extend_space_to_desired_size(): Do not allocate or initialize
    more memory than is necessary.  Write at most one megabyte at a time.

ChangeSet
  1.2311 05/06/27 16:47:44 monty@mishka.local +3 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into  mishka.local:/home/my/mysql-4.1

  sql/sql_parse.cc
    1.448 05/06/27 16:47:38 monty@mishka.local +0 -0
    Auto merged

  sql/sql_base.cc
    1.254 05/06/27 16:47:38 monty@mishka.local +0 -0
    Auto merged

  sql/ha_ndbcluster.cc
    1.163 05/06/27 16:47:38 monty@mishka.local +0 -0
    Auto merged

ChangeSet
  1.2300.11.2 05/06/27 16:46:41 monty@mishka.local +14 -0
  Better bug fix for:
  #9728  'Decreased functionality in "on duplicate key update
  #8147  'a column proclaimed ambigous in INSERT ... SELECT .. ON DUPLICATE'
  
  This ensures fields are uniquely qualified and also that one can't update other tables in the ON DUPLICATE KEY UPDATE part

  sql/sql_yacc.yy
    1.388 05/06/27 16:46:36 monty@mishka.local +0 -15
    Revert bug fix for #9728

  sql/sql_prepare.cc
    1.147 05/06/27 16:46:36 monty@mishka.local +1 -0
    New arguments to mysql_prepare_insert

  sql/sql_parse.cc
    1.446.1.1 05/06/27 16:46:36 monty@mishka.local +29 -13
    Revert fix for #9728
    Allow one to use other tables in ON DUPLICATE_KEY for INSERT ... SELECT if there is no GROUP BY clause

  sql/sql_insert.cc
    1.169 05/06/27 16:46:35 monty@mishka.local +25 -9
    Extend mysql_prepare_insert() with new field list for tables that can be used in the values port of ON DUPLICATE KEY UPDATE

  sql/sql_base.cc
    1.251.1.2 05/06/27 16:46:35 monty@mishka.local +3 -6
    Remove old fix for bug #8147

  sql/mysql_priv.h
    1.353 05/06/27 16:46:35 monty@mishka.local +2 -1
    New arguments to mysql_prepare_insert

  sql/item.h
    1.185 05/06/27 16:46:35 monty@mishka.local +0 -11
    Remove item_flags

  sql/item.cc
    1.210 05/06/27 16:46:35 monty@mishka.local +1 -3
    Remove item_flags

  sql/ha_ndbcluster.cc
    1.161.1.1 05/06/27 16:46:34 monty@mishka.local +3 -1
    Indentation fixes

  mysys/my_access.c
    1.5 05/06/27 16:46:33 monty@mishka.local +4 -5
    Cleanup (shorter loop variable names)

  mysql-test/t/insert_update.test
    1.14 05/06/27 16:46:33 monty@mishka.local +7 -3
    Updated tests after changing how INSERT ... SELECT .. ON DUPLICATE KEY works

  mysql-test/t/insert_select.test
    1.20 05/06/27 16:46:33 monty@mishka.local +18 -4
    More tests for bug #9728 and #8147

  mysql-test/r/insert_update.result
    1.14 05/06/27 16:46:33 monty@mishka.local +7 -3
    Updated tests after changing how INSERT ... SELECT .. ON DUPLICATE KEY works

  mysql-test/r/insert_select.result
    1.27 05/06/27 16:46:33 monty@mishka.local +23 -4
    More tests for bug #9728 and #8147

ChangeSet
  1.2310 05/06/27 15:11:40 msvensson@neptunus.(none) +1 -0
  Include <sys/wait.h> to get WEXITSTATUS

  client/mysqltest.c
    1.167 05/06/27 15:11:37 msvensson@neptunus.(none) +1 -1
    Include <sys/wait.h> to get WEXITSTATUS

ChangeSet
  1.2309 05/06/27 15:01:49 msvensson@neptunus.(none) +1 -0
  Add "#include <stdlib.h>" to define WEXITSTATUS

  client/mysqltest.c
    1.166 05/06/27 15:01:46 msvensson@neptunus.(none) +1 -0
    Add "#include <stdlib.h>" to define WEXITSTATUS

ChangeSet
  1.2300.2.15 05/06/24 17:59:19 jimw@mysql.com +1 -0
  If mysql_config is a symlink, resolve it before trying to find the lib and
  include directories relative to where it is located. (Bug #10986)

  scripts/mysql_config.sh
    1.18 05/06/24 17:55:50 jimw@mysql.com +13 -5
    If mysql_config is a symlink, try to resolve it

ChangeSet
  1.2300.2.14 05/06/24 17:47:09 ingo@mysql.com +4 -0
  Bug#10178 - failure to find a row in heap table by concurrent UPDATEs
  Moved the key statistics update to info().
  The table is not locked in open(). This made wrong stats possible.
  
  No test case for the test suite.
  This happens only with heavy concurrency.
  A test script is added to the bug report.

  sql/ha_heap.h
    1.33 05/06/24 17:47:04 ingo@mysql.com +3 -1
    Bug#10178 - failure to find a row in heap table by concurrent UPDATEs
    Added an element to track the validity of the key statistics.

  sql/ha_heap.cc
    1.57 05/06/24 17:47:04 ingo@mysql.com +26 -5
    Bug#10178 - failure to find a row in heap table by concurrent UPDATEs
    Moved the key statistics update to info().
    The table is not locked in open(). This made wrong stats possible.

  mysql-test/t/heap_hash.test
    1.9 05/06/24 17:47:04 ingo@mysql.com +2 -0
    Bug#10178 - failure to find a row in heap table by concurrent UPDATEs
    Added a FLUSH TABLES to avoid statistics differences between normal 
    and ps-protocol tests.

  mysql-test/r/heap_hash.result
    1.13 05/06/24 17:47:04 ingo@mysql.com +12 -11
    Bug#10178 - failure to find a row in heap table by concurrent UPDATEs
    Updated test results to reflect the new  statistics behaviour.

ChangeSet
  1.2300.2.13 05/06/24 14:04:48 ramil@mysql.com +3 -0
  backport for #10568: Function 'LAST_DAY(date)' does not return NULL for invalid argument.

  sql/item_timefunc.cc
    1.90 05/06/24 14:04:43 ramil@mysql.com +1 -1
    backport for #10568: Function 'LAST_DAY(date)' does not return NULL for invalid argument.

  mysql-test/t/func_time.test
    1.31 05/06/24 14:04:43 ramil@mysql.com +7 -0
    backport for #10568: Function 'LAST_DAY(date)' does not return NULL for invalid argument.

  mysql-test/r/func_time.result
    1.37 05/06/24 14:04:43 ramil@mysql.com +15 -0
    backport for #10568: Function 'LAST_DAY(date)' does not return NULL for invalid argument.

ChangeSet
  1.2300.2.12 05/06/24 12:51:11 ramil@mysql.com +1 -0
  an improvement (bug #7851: C++ 'new' conflicts with kernel header asm/system.h).

  include/my_global.h
    1.95 05/06/24 12:51:07 ramil@mysql.com +0 -2
    an improvement (bug #7851: C++ 'new' conflicts with kernel header asm/system.h).
    redefine 'new' before #include <asm/atomic.h> in any case.

ChangeSet
  1.2300.13.3 05/06/23 17:44:25 bell@sanja.is.com.ua +3 -0
  temporary tables of subquery in the from clause just skipped during processing QC tables (BUG#11522)

ChangeSet
  1.2300.15.1 05/06/23 21:06:33 evgen@moonbone.local +1 -0
  sql_parse.cc:
    Fix for fix for bug #9728
    Error caused server hang on prepared insert ... select

  sql/sql_parse.cc
    1.447 05/06/23 21:01:38 evgen@moonbone.local +0 -1
    Fix for fix for bug #9728
    Error caused server hang on prepared insert ... select

ChangeSet
  1.2300.14.1 05/06/23 17:38:40 kent@mysql.com +1 -0
  mysql-test-run.pl:
    Might need a restart after test with special TZ
    Removed unused argument to run_mysqltest()

  mysql-test/mysql-test-run.pl
    1.32 05/06/23 17:35:07 kent@mysql.com +8 -8
    Might need a restart after test with special TZ
    Removed unused argument to run_mysqltest()

  sql/sql_cache.cc
    1.92 05/06/23 17:43:24 bell@sanja.is.com.ua +15 -2
    temporary tables of subquery in the from clause just skipped during processing QC tables

  mysql-test/t/query_cache.test
    1.42 05/06/23 17:43:24 bell@sanja.is.com.ua +26 -0
    queries with subquery in the FROM clause

  mysql-test/r/query_cache.result
    1.55 05/06/23 17:43:24 bell@sanja.is.com.ua +52 -0
    queries with subquery in the FROM clause

ChangeSet
  1.2300.7.3 05/06/23 06:15:50 igor@rurik.mysql.com +6 -0
  func_str.result, func_str.test:
    Added a test case for bug #10124.
  sql_select.h, item_subselect.cc, sql_select.cc:
    Fixed bug #10124.
    The copy method of the store_key classes can return
    STORE_KEY_OK=0, STORE_KEY_FATAL=1, STORE_KEY_CONV=2 now.
  field.cc:
    Fixed bug #10124.
    When ussuing a warning the store methods return 2 instead of 1 now.

  mysql-test/r/func_str.result
    1.92 05/06/23 06:14:53 igor@rurik.mysql.com +11 -0
    Added a test case for bug #10124.

  mysql-test/t/func_str.test
    1.73 05/06/23 06:14:28 igor@rurik.mysql.com +14 -0
    Added a test case for bug #10124.

  sql/sql_select.h
    1.76 05/06/23 06:13:38 igor@rurik.mysql.com +16 -9
    Fixed bug #10124.
    The copy method of the store_key classes can return
    STORE_KEY_OK=0, STORE_KEY_FATAL=1, STORE_KEY_CONV=2 now.

  sql/item_subselect.cc
    1.137 05/06/23 06:12:58 igor@rurik.mysql.com +2 -2
    Fixed bug #10124.
    The copy method of the store_key classes can return
    STORE_KEY_OK=0, STORE_KEY_FATAL=1, STORE_KEY_CONV=2 now.

  sql/sql_select.cc
    1.413.1.1 05/06/23 06:12:12 igor@rurik.mysql.com +6 -2
    Fixed bug #10124.
    The copy method of the store_key classes can return
    STORE_KEY_OK=0, STORE_KEY_FATAL=1, STORE_KEY_CONV=2 now.

  sql/field.cc
    1.220.1.1 05/06/23 06:10:48 igor@rurik.mysql.com +24 -17
    Fixed bug #10124.
    When ussuing a warning the store methods return 2 instead of 1 now.

ChangeSet
  1.2300.2.7 05/06/23 11:34:58 lenz@mysql.com +1 -0
  - manual merge of the new node names

  Docs/Makefile.am
    1.54 05/06/23 11:34:54 lenz@mysql.com +1 -1
    - manual merge of the new node names

ChangeSet
  1.1346.1.771 05/06/23 11:30:40 lenz@mysql.com +3 -0
  - fixed text file generation - the node names in the info page had changed

  Docs/Support/generate-text-files.pl
    1.4 05/06/23 11:30:37 lenz@mysql.com +1 -1
    - stop printing if the index was reached

  Docs/Makefile.am
    1.38.1.16 05/06/23 11:30:37 lenz@mysql.com +4 -4
    - fixed node names for the new info file

  BitKeeper/deleted/.del-generate-flag-images~f77476753fff8186
    1.5 05/06/23 11:27:21 lenz@mysql.com +0 -0
    Delete: Docs/Support/generate-flag-images

ChangeSet
  1.2300.9.1 05/06/23 10:56:44 timour@mysql.com +3 -0
  Fix for BUG#11185.
  
  The source of the problem is in Field_longlong::cmp. If 'this' is
  an unsigned number, the method casts both the current value, and
  the constant that we compare with to an unsigned number. As a
  result if the constant we compare with is a negative number, it
  wraps to some unsigned number, and the comparison is incorrect.
  
  When the optimizer chooses the "range" access method, this problem
  causes handler::read_range_next to reject the current key when the
  upper bound key is a negative number because handler::compare_key
  incorrectly considers the positive and negative keys to be equal.
  
  The current patch does not correct the source of the problem in
  Field_longlong::cmp because it is not easy to propagate sign
  information about the constant at query execution time. Instead
  the patch changes the range optimizer so that it never compares
  unsiged fields with negative constants. As an added benefit,
  queries that do such comparisons will execute faster because
  the range optimizer replaces conditions like:
  (a) (unsigned_int [< | <=] negative_constant) == FALSE
  (b) (unsigned_int [> | >=] negative_constant) == TRUE
  with the corresponding constants.
  In some cases this may even result in constant time execution.

  sql/opt_range.cc
    1.139 05/06/23 10:56:39 timour@mysql.com +35 -3
    Added a new optimization to the range optimizer where we detect that
    an UNSIGNED field is compared with a negative constant. Depending on
    the comparison operator, we know directly that the result of the
    comparison is either TRUE or FALSE for all input values, and we need
    not check each value.
    
    This optimization is also necessary so that the index range access
    method produces correct results when comparing unsigned fields with
    negative constants.

  mysql-test/t/range.test
    1.29 05/06/23 10:56:39 timour@mysql.com +19 -3
    - Added new tests for BUG#11185
    - Deleted an old comment because now the problem is fixed

  mysql-test/r/range.result
    1.34 05/06/23 10:56:39 timour@mysql.com +32 -1
    - Changed incorrect result of an old test
    - Added new results for BUG#11185

ChangeSet
  1.2305 05/06/22 20:49:05 msvensson@neptunus.(none) +1 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into neptunus.(none):/home/msvensson/mysql/mysql-4.1

ChangeSet
  1.2300.6.1 05/06/22 22:58:44 evgen@moonbone.local +1 -0
  item.h:
    Fix for fix for bug#9728 decreased functionality in "on duplicate key update"
    Have to return false to set flag for whole expression.

  sql/item.h
    1.184 05/06/22 22:53:44 evgen@moonbone.local +1 -1
    Fix for fix for bug#9728 decreased functionality in "on duplicate key update"
    Have to return false to set flag for whole expression.

  sql/sql_base.cc
    1.253 05/06/22 20:49:04 msvensson@neptunus.(none) +0 -0
    Auto merged

ChangeSet
  1.2304 05/06/22 20:37:14 msvensson@neptunus.(none) +3 -0
  Fix so that my_progname is set to "mysqldump"

  mysql-test/t/mysqldump.test
    1.37 05/06/22 20:37:12 msvensson@neptunus.(none) +1 -15
    Update tests, no need for results

  mysql-test/r/mysqldump.result
    1.49 05/06/22 20:37:12 msvensson@neptunus.(none) +11 -10
    Update test results

  client/mysqldump.c
    1.191 05/06/22 20:37:11 msvensson@neptunus.(none) +1 -1
    Fix progname of mysqldump

ChangeSet
  1.2303 05/06/22 20:22:54 msvensson@neptunus.(none) +3 -0
  BUG#9657  mysqldump xml ( -x ) does not format NULL fields correctly
   - Importing the bug fixes by patch due to merge problems.

  mysql-test/t/mysqldump.test
    1.36 05/06/22 20:19:40 msvensson@neptunus.(none)[msvensson] +13 -0
    Import patch patch

  mysql-test/r/mysqldump.result
    1.48 05/06/22 20:21:33 msvensson@neptunus.(none)[msvensson] +59 -3
    Import patch patch

  client/mysqldump.c
    1.190 05/06/22 20:15:06 msvensson@neptunus.(none)[msvensson] +46 -2
    Import patch patch

ChangeSet
  1.2300.5.1 05/06/22 17:12:02 lars@mysql.com +2 -0
  BUG#9361: Added test cases

  mysql-test/t/rpl_multi_update3.test
    1.3 05/06/22 17:11:56 lars@mysql.com +129 -4
    Added test cases

  mysql-test/r/rpl_multi_update3.result
    1.3 05/06/22 17:11:55 lars@mysql.com +81 -0
    Added test cases

ChangeSet
  1.2300.4.1 05/06/22 11:18:40 mskold@mysql.com +1 -0
  Made upgrade compatibility in 4.1 range to latest build version

  ndb/src/common/util/version.c
    1.17 05/06/22 11:18:00 mskold@mysql.com +1 -1
    Maybe upgrade compatibility in 4.1 range to latest build version

ChangeSet
  1.2300.2.4 05/06/22 01:39:52 petr@mysql.com +1 -0
  fix README file to be more verbose match actual situation (recomitted to push into 4.1)

ChangeSet
  1.2300.2.3 05/06/22 07:18:42 evgen@moonbone.local +7 -0
  Fix bug #9728 decreased functionality in "on duplicate key update"
  
  Remove changes made by bug fix #8147. They strips list of insert_table_list to
  only insert table, which results in error reported in bug #9728.
  Added flag to Item to resolve ambigous fields reported in bug #8147.

  mysql-test/r/insert_select.result
    1.26 05/06/22 07:17:54 evgen@moonbone.local +15 -0
    Test case for bug#9728 Decreased functionality in "on duplicate key update".

  mysql-test/t/insert_select.test
    1.19 05/06/22 07:17:41 evgen@moonbone.local +14 -0
    Test case for bug#9728 Decreased functionality in "on duplicate key update".

  sql/sql_yacc.yy
    1.387 05/06/22 07:17:04 evgen@moonbone.local +15 -0
    Fix bug#9728  decreased functionality in "on duplicate key update"

  sql/sql_base.cc
    1.251.1.1 05/06/22 07:16:23 evgen@moonbone.local +5 -2
    Fix bug#9728  decreased functionality in "on duplicate key update".

  sql/sql_parse.cc
    1.446 05/06/22 07:16:14 evgen@moonbone.local +3 -6
    Fix bug#9728  decreased functionality in "on duplicate key update"

  sql/item.cc
    1.209 05/06/22 07:16:04 evgen@moonbone.local +3 -1
    Fix bug#9728  decreased functionality in "on duplicate key update"

  sql/item.h
    1.183 05/06/22 07:15:55 evgen@moonbone.local +11 -0
    Fix bug#9728  decreased functionality in "on duplicate key update".

  mysql-test/README
    1.9 05/06/22 01:39:49 petr@mysql.com +11 -2
    fix README file to be more verbose match actual situation

ChangeSet
  1.2300.2.2 05/06/21 15:40:58 elliot@mysql.com +3 -0
  BUG#10442 Minor changes from code review

  sql/sql_parse.cc
    1.445 05/06/21 15:40:55 elliot@mysql.com +5 -3
    Changes from code review

  mysql-test/t/rpl_multi_update3.test
    1.2 05/06/21 15:40:55 elliot@mysql.com +1 -0
    Changes from code review

  mysql-test/r/rpl_multi_update3.result
    1.2 05/06/21 15:40:55 elliot@mysql.com +1 -0
    Changes from code review

ChangeSet
  1.2300.3.1 05/06/21 13:35:12 reggie@mdk10.(none) +1 -0
  Bug #9148  Denial of Service
  
  
  my_access.c:
    Fixed problem where in some cases check_if_legal_filename was returning 0 for illegal names

  mysys/my_access.c
    1.4 05/06/21 13:34:34 reggie@mdk10.(none) +7 -5
    Fixed problem where in some cases check_if_legal_filename was returning 0 for illegal names

ChangeSet
  1.2300.1.4 05/06/21 10:05:13 jimw@mysql.com +1 -0
  Restore creation of files for temporary tables in the tmpdir,
  which was broken by an earlier bug fix. (Bug #11440)

ChangeSet
  1.2300.1.3 05/06/21 16:51:40 kent@mysql.com +1 -0
  mysql-test-run.pl:
    Added optional paths for finding mysqld on Windows
    Added language/charset options to embedded mysql_client_test

ChangeSet
  1.2300.1.2 05/06/21 22:25:49 evgen@moonbone.local +1 -0
  Merge epotemkin@bk-internal.mysql.com:/home/bk/mysql-4.1
  into  moonbone.local:/work/mysql-4.1-bug-10886

  sql/sql_insert.cc
    1.168 05/06/21 22:25:47 evgen@moonbone.local +0 -0
    Auto merged

ChangeSet
  1.2292.21.1 05/06/21 22:24:58 evgen@moonbone.local +3 -0
  Fix bug #10886 - INSERT ... SELECT ... ON DUPLICATE KEY UPDATE produces bad results
  
  Temporary field wasn't restored to default values after ON DUPLICATE KEY
   UPDATE event, which results in wrong data being inserted in new record.

  mysql-test/r/insert_select.result
    1.25 05/06/21 22:16:33 evgen@moonbone.local +9 -0
    Test case for bug #10886 - INSERT ... SELECT ... ON DUPLICATE KEY UPDATE 
    produces bad results

  mysql-test/t/insert_select.test
    1.18 05/06/21 22:16:26 evgen@moonbone.local +9 -0
    Test case for bug #10886 - INSERT ... SELECT ... ON DUPLICATE KEY 
    UPDATE produces bad results

  sql/sql_insert.cc
    1.166.1.1 05/06/21 22:16:13 evgen@moonbone.local +15 -4
    Fix bug #10886 - INSERT ... SELECT ... ON DUPLICATE KEY UPDATE produces bad results

  sql/sql_table.cc
    1.288.1.1 05/06/21 09:33:19 jimw@mysql.com +4 -6
    Restore code to generate temporary tables in
    tmpdir

ChangeSet
  1.2292.20.1 05/06/21 18:18:58 monty@mishka.local +8 -0
  Cleanup during review of new code
  Fixed wrong allocation that could cause buffer overrun when using join cache

  sql/sql_select.cc
    1.414 05/06/21 18:18:50 monty@mishka.local +8 -10
    Use int2store/int2korr to store length of cached VARCHAR fields
    (Not dependent on type and faster code as we avoid one possible call)

  sql/set_var.cc
    1.171 05/06/21 18:18:50 monty@mishka.local +1 -1
    Simply code

  sql/mysqld.cc
    1.577 05/06/21 18:18:50 monty@mishka.local +0 -3
    Removed not needed code

  sql/field.cc
    1.221 05/06/21 18:18:50 monty@mishka.local +8 -1
    Fixed wrong allocation that could cause buffer overrun

  mysys/my_fopen.c
    1.15 05/06/21 18:18:50 monty@mishka.local +49 -35
    Cleanup of comments and parameter names
    Simple optimization
    Removed compiler warnings

  mysql-test/t/lowercase_table2.test
    1.10 05/06/21 18:18:50 monty@mishka.local +2 -1
    Drop tables and databases used in the test

  mysql-test/r/lowercase_table2.result
    1.14 05/06/21 18:18:49 monty@mishka.local +2 -1
    Drop tables and databases used in the test

  myisam/mi_open.c
    1.85 05/06/21 18:18:49 monty@mishka.local +1 -1
    Fixed indentation

  mysql-test/mysql-test-run.pl
    1.31 05/06/21 16:15:51 kent@mysql.com +12 -4
    Added optional paths for finding mysqld on Windows
    Added language/charset options to embedded mysql_client_test

ChangeSet
  1.2301 05/06/21 14:24:13 msvensson@neptunus.(none) +3 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into neptunus.(none):/home/msvensson/mysql/mysql-4.1

  sql/ha_ndbcluster.cc
    1.162 05/06/21 14:24:12 msvensson@neptunus.(none) +0 -0
    Auto merged

  mysql-test/mysql-test-run.sh
    1.254 05/06/21 14:24:12 msvensson@neptunus.(none) +0 -0
    Auto merged

  client/mysqltest.c
    1.165 05/06/21 14:24:12 msvensson@neptunus.(none) +0 -0
    Auto merged

ChangeSet
  1.2284.2.3 05/06/21 14:19:56 msvensson@neptunus.(none)[msvensson] +5 -0
  patch

  mysql-test/t/mysqldump.test
    1.35 05/06/21 14:17:35 msvensson@neptunus.(none)[msvensson] +78 -0
    Added test for illegal / nonexisting table and database names

  mysql-test/r/mysqldump.result
    1.47 05/06/21 14:17:35 msvensson@neptunus.(none)[msvensson] +27 -0
    Added test for illegal / nonexisting table and database names

  mysql-test/mysql-test-run.sh
    1.252.1.1 05/06/21 14:17:35 msvensson@neptunus.(none)[msvensson] +3 -0
    export MYSQL_DUMP_DIR used in "--replace_result"

  client/mysqltest.c
    1.163.1.1 05/06/21 14:17:35 msvensson@neptunus.(none)[msvensson] +32 -3
    Make it possible to exec a command that fails by setting --error <errno> before the command to exec.
    Check that the error returned from executed program matches the expected error.
    Add DBUG_* printouts

  client/mysqldump.c
    1.189 05/06/21 14:17:35 msvensson@neptunus.(none)[msvensson] +99 -59
    Add description of quote_for_like
    Add quoting of \ to \\\\ in quote_for_like
    Add DBUG_*
    Rearranged code in dump_selected_tables so the first thing it will do is to check that the tables to dump are available
    Unless --force is used, program will exit if not all specified tables can be found
    Add files to dump to HASH table for easy iteration
    Simpler handling of ignore_table list.
    Add new error code used when table user selected to dump  can not be found in db

ChangeSet
  1.2292.15.3 05/06/21 04:24:21 igor@rurik.mysql.com +3 -0
  group_by.result, group_by.test:
    Added a test case for bug #11295.
  item_buff.cc:
    Fixed bug #11295.
    This a correction for the patch of bug #11088 that takes into
    account a possible NULL values of the BLOB column.

  mysql-test/r/group_by.result
    1.49 05/06/21 04:21:51 igor@rurik.mysql.com +10 -0
    Added a test case for bug #11295.

  mysql-test/t/group_by.test
    1.39 05/06/21 04:21:19 igor@rurik.mysql.com +15 -0
    Added a test case for bug #11295.

  sql/item_buff.cc
    1.11 05/06/21 04:17:42 igor@rurik.mysql.com +2 -2
    Fixed bug #11295.
    This a correction for the patch of bug #11088 that takes into
    account a possible NULL values of the BLOB column.

ChangeSet
  1.2292.12.10 05/06/21 02:21:52 kent@mysql.com +3 -0
  mysql-test-run.pl:
    More compact and safe handling of path names.
    Support for running in Windows source tree.
    Use libtool wrapper, instead of messing with
    library path names, and objects in .libs dir.
  mtr_misc.pl:
    Utility function that search aand check path names
  mtr_report.pl:
    Patch by Carsten, set correct reject/result/eval if not main suite

  mysql-test/mysql-test-run.pl
    1.30 05/06/21 02:06:54 kent@mysql.com +63 -122
    More compact and safe handling of path names.
    Support for running in Windows source tree.
    Use libtool wrapper, instead of messing with
    library path names, and objects in .libs dir.

  mysql-test/lib/mtr_misc.pl
    1.3 05/06/21 02:06:09 kent@mysql.com +52 -0
    Utility function that search aand check path names

  mysql-test/lib/mtr_report.pl
    1.9 05/06/21 02:05:11 kent@mysql.com +7 -0
    Patch by Carsten, set correct reject/result/eval if not main suite

ChangeSet
  1.2292.12.8 05/06/20 21:37:39 kent@mysql.com +2 -0
  mtr_cases.pl:
    Bug#11466: Script can now get test case name
    from test case file path on command line
  mysql-test-run.pl:
    Bug#11466: Added --skip-ndbcluster/--skip-ndb option
  mtr_cases.pl:
    Don't set --default-time-zone if opt file sets it
    Restart the server if time zone is given in opt file
  mysql-test-run.pl:
    Don't remove symlink to "var" directory in cleanup
    Removed duplicate/unessesary options to mysqld

  mysql-test/lib/mtr_cases.pl
    1.6 05/06/20 21:33:14 kent@mysql.com +4 -2
    Bug#11466: Script can now get test case name
    from test case file path on command line

  mysql-test/mysql-test-run.pl
    1.29 05/06/20 21:31:53 kent@mysql.com +12 -0
    Bug#11466: Added --skip-ndbcluster/--skip-ndb option

  mysql-test/lib/mtr_cases.pl
    1.5 05/06/20 20:12:41 kent@mysql.com +45 -24
    Don't set --default-time-zone if opt file sets it
    Restart the server if time zone is given in opt file

  mysql-test/mysql-test-run.pl
    1.28 05/06/20 20:04:03 kent@mysql.com +2 -15
    Don't remove symlink to "var" directory in cleanup
    Removed duplicate/unessesary options to mysqld

ChangeSet
  1.2292.15.2 05/06/20 10:49:04 igor@rurik.mysql.com +3 -0
  group_by.result:
    Added  a test case for bug #11385.
  group_by.test:
    Added  a test case for bug #11385.
  field.h:
    Fixed bug #11385.
    The bug was due to not defined method decimals for the class
    Field_datetime.

  mysql-test/r/group_by.result
    1.48 05/06/20 10:47:24 igor@rurik.mysql.com +9 -0
    Added  a test case for bug #11385.

  mysql-test/t/group_by.test
    1.38 05/06/20 10:46:33 igor@rurik.mysql.com +14 -1
    Added  atest case for bug #11385.

  sql/field.h
    1.129 05/06/20 10:44:01 igor@rurik.mysql.com +2 -0
    Fixed bug #11385.
    The bug was due to not defined method decimals for the class
    Field_datetime.

ChangeSet
  1.2292.17.1 05/06/20 10:21:35 jimw@mysql.com +3 -0
  Fix crash when an entry was added to the mysql.tables_priv
  table with an empty hostname. (Bug #11330)

  sql/sql_acl.cc
    1.166 05/06/20 10:21:33 jimw@mysql.com +2 -1
    Don't call strlen() on a NULL pointer.

  mysql-test/t/grant.test
    1.27 05/06/20 10:21:33 jimw@mysql.com +8 -0
    Add new regression test

  mysql-test/r/grant.result
    1.36 05/06/20 10:21:32 jimw@mysql.com +4 -0
    Update results

ChangeSet
  1.2292.16.1 05/06/20 18:54:45 jimw@mysql.com +1 -0
  Fix handling of command-line on Windows, missed as part of earlier
  commit. (Bug #10840)

  client/mysql.cc
    1.208 05/06/20 18:53:54 jimw@mysql.com +2 -1
    Add cast of unsigned value stored in signed char

ChangeSet
  1.2292.12.6 05/06/20 18:03:30 kent@mysql.com +1 -0
  Makefile.am:
    Corrected dependency for "lex_hash.h", to avoid occasional make failure

  sql/Makefile.am
    1.113 05/06/20 17:54:38 kent@mysql.com +3 -10
    Corrected dependency for "lex_hash.h", to avoid occasional make failure

ChangeSet
  1.2299 05/06/20 17:17:44 mskold@mysql.com +1 -0
  ha_ndbcluster.cc:
    Added CR for readability

  sql/ha_ndbcluster.cc
    1.161 05/06/20 17:17:07 mskold@mysql.com +1 -0
    Added CR for readability

ChangeSet
  1.2298 05/06/20 17:16:22 mskold@mysql.com +1 -0
  Added comment to store_lock

  sql/ha_ndbcluster.cc
    1.160 05/06/20 17:16:14 mskold@mysql.com +7 -1
    Added comment to store_lock

ChangeSet
  1.2292.15.1 05/06/20 06:13:30 igor@igor-inspiron.creware.com +1 -0
  Merge ibabaev@bk-internal.mysql.com:/home/bk/mysql-4.1
  into igor-inspiron.creware.com:/home/igor/mysql-4.1

  sql/sql_select.cc
    1.413 05/06/20 06:13:23 igor@igor-inspiron.creware.com +0 -0
    Auto merged

ChangeSet
  1.2292.14.1 05/06/20 16:07:00 dlenev@brandersnatch.localdomain +3 -0
  Fix for bug #11060 "Server crashes on re-execution of prepared 
  INSERT ... SELECT with UNION" (reviewed version).
  
  Altough bug manifest itself only starting from 5.0 it is better to
  apply fix to 4.1 to keep some assumptions true and make code more
  future-proof.

  sql/sql_insert.cc
    1.167 05/06/20 16:06:57 dlenev@mysql.com +12 -1
    select_insert::prepare():
      Item::fix_fields() methods operate assuming that LEX::current_select
      points to the select to which current item belongs. Thus
      during check_insert_fields() routine execution LEX::current_select
      should point ot the first select in query since this is the
      select with which items in insert list is associated.
      But if we have INSERT SELECT UNION SELECT type of query
      LEX::current_select will point to the fake_select_lex instead
      since select_insert::prepare() is called during processing of JOIN
      which corresponds to this select_lex.
      So we have set LEX::current_select before calling check_insert_fields()
      and restore it afterwards.

  mysql-test/t/ps.test
    1.34 05/06/20 16:06:57 dlenev@mysql.com +12 -0
    Added test case for bug #11060 "Server crashes on re-execution of
    prepared INSERT ... SELECT with UNION".

  mysql-test/r/ps.result
    1.35 05/06/20 16:06:57 dlenev@mysql.com +6 -0
    Added test case for bug #11060 "Server crashes on re-execution of
    prepared INSERT ... SELECT with UNION".

ChangeSet
  1.2284.2.2 05/06/20 13:08:45 msvensson@neptunus.(none) +4 -0
  Merge neptunus.(none):/home/msvensson/mysql/mysql-4.1
  into neptunus.(none):/home/msvensson/mysql/bug10365

  sql/sql_table.cc
    1.289 05/06/20 13:08:43 msvensson@neptunus.(none) +0 -0
    Auto merged

  sql/sql_base.cc
    1.252 05/06/20 13:08:43 msvensson@neptunus.(none) +0 -0
    Auto merged

  sql/handler.cc
    1.168 05/06/20 13:08:43 msvensson@neptunus.(none) +0 -0
    Auto merged

  sql/ha_ndbcluster.cc
    1.156.2.1 05/06/20 13:08:43 msvensson@neptunus.(none) +0 -0
    Auto merged

ChangeSet
  1.2292.12.4 05/06/20 12:58:58 kent@mysql.com +1 -0
  Makefile.am:
    Use the Perl version of mysql-test-run

  Makefile.am
    1.67 05/06/20 12:54:16 kent@mysql.com +1 -1
    Use the Perl version of mysql-test-run

ChangeSet
  1.2292.12.3 05/06/20 12:32:53 kent@mysql.com +1 -0
  mysql-test-run.pl:
    Corrected path to 'mysql_fix_privilege_tables'

  mysql-test/mysql-test-run.pl
    1.27 05/06/20 12:30:59 kent@mysql.com +1 -1
    Corrected path to 'mysql_fix_privilege_tables'

ChangeSet
  1.2292.12.2 05/06/20 11:49:25 kent@mysql.com +1 -0
  mysql-test-run.pl:
    Corrected path to 'mysql_fix_privilege_tables'
    Corrected dummy --manager-port to take integer argument

ChangeSet
  1.2292.13.1 05/06/20 11:43:38 sergefp@mysql.com +3 -0
  Fix for BUG#10151: In Item_func_case::find_item don't assume that parameter str != &(this->str_value)

  sql/item_cmpfunc.cc
    1.191 05/06/20 11:43:35 sergefp@mysql.com +3 -1
    Fix for BUG#10151: In Item_func_case::find_item don't assume that parameter str != &(this->str_value)

  mysql-test/t/case.test
    1.15 05/06/20 11:43:35 sergefp@mysql.com +11 -0
    Testcase for BUG#10151

  mysql-test/r/case.result
    1.16 05/06/20 11:43:35 sergefp@mysql.com +15 -0
    Testcase for BUG#10151

  mysql-test/mysql-test-run.pl
    1.26 05/06/20 11:36:58 kent@mysql.com +1 -1
    Corrected path to 'mysql_fix_privilege_tables'

  mysql-test/mysql-test-run.pl
    1.25 05/06/20 11:24:26 kent@mysql.com +7 -6
    Corrected dummy --manager-port to take integer argument

ChangeSet
  1.2295 05/06/20 09:37:31 mskold@mysql.com +1 -0
  Merge mskold@bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/usr/local/home/marty/MySQL/mysql-4.1

  sql/ha_ndbcluster.cc
    1.159 05/06/20 09:37:29 mskold@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2292.11.1 05/06/20 07:53:53 tulin@dl145c.mysql.com +1 -0
  ha_ndbcluster.cc:
    remove typecheck in ndb handler not needed

  sql/ha_ndbcluster.cc
    1.156.1.1 05/06/20 07:53:17 tulin@dl145c.mysql.com +10 -23
    remove typecheck in ndb handler not needed

ChangeSet
  1.2292.1.4 05/06/20 15:18:53 stewart@mysql.com +1 -0
  BUG#11377 Building cluster in 4.1 BK tree fails with GCC4.0

  ndb/src/kernel/SimBlockList.cpp
    1.6 05/06/20 15:18:47 stewart@mysql.com +0 -1
    GCC 4.0 build fix

ChangeSet
  1.2292.1.3 05/06/19 20:06:27 kent@mysql.com +2 -0
  mysql-test-run.pl:
    Added dummy --manager-port flag, for backward compatibility
    Back port from 5.0, correction of paths to SSL pem files
  mtr_cases.pl:
    Removed hard coded exclude list for embedded server
  mysql-test-run.pl:
    Set environment variable MYSQL_SHOW, to be used in test cases

  mysql-test/mysql-test-run.pl
    1.24 05/06/19 20:03:36 kent@mysql.com +14 -8
    Added dummy --manager-port flag, for backward compatibility
    Back port from 5.0, correction of paths to SSL pem files

  mysql-test/lib/mtr_cases.pl
    1.4 05/06/19 19:47:58 kent@mysql.com +0 -10
    Removed hard coded exclude list for embedded server

  mysql-test/mysql-test-run.pl
    1.23 05/06/19 19:47:04 kent@mysql.com +19 -25
    Set environment variable MYSQL_SHOW, to be used in test cases

ChangeSet
  1.2292.9.1 05/06/18 18:14:28 serg@serg.mylan +1 -0
  BSD make compatibility. bug#9828

  mysql-test/Makefile.am
    1.45 05/06/18 18:14:21 serg@serg.mylan +9 -2
    BSD make compatibility. bug#9828

ChangeSet
  1.2292.8.1 05/06/17 21:44:17 jimw@mysql.com +3 -0
  Fix hang/crash with Boolean full-text search against an unindexed field for
  which the query contained more words than we allocated space. (Bug #7858)

  mysql-test/r/fulltext.result
    1.74 05/06/17 21:42:58 jimw@mysql.com +1 -1
    Update results

  mysql-test/t/fulltext.test
    1.72 05/06/17 21:42:29 jimw@mysql.com +2 -2
    Modify test to be specific to reported bug (fix for old bug wasn't quite enough)

  myisam/ft_boolean_search.c
    1.88 05/06/17 20:55:26 jimw@mysql.com +1 -1
    Fix calculation of max number of elements -- "words" may not have spaces
    between them.

ChangeSet
  1.2284.4.1 05/06/17 18:07:46 msvensson@neptunus.(none) +7 -0
  BUG#10589: des_encrypt functionality always return NULL
   - Push warnings if des_encrypt or des_descrypt function fails because of out of resources or wrong params.
   - Push warning if des_encrypt or des_decrypt function is used when server is missing support for openssl.
   - Add test func_encrypt_nossl that is tun when the server is missing support for openssl. 

  mysql-test/t/func_encrypt_nossl.test
    1.1 05/06/17 18:07:42 msvensson@neptunus.(none) +36 -0

  mysql-test/r/not_openssl.require
    1.1 05/06/17 18:07:42 msvensson@neptunus.(none) +2 -0

  mysql-test/r/func_encrypt_nossl.result
    1.1 05/06/17 18:07:42 msvensson@neptunus.(none) +93 -0

  mysql-test/include/not_openssl.inc
    1.1 05/06/17 18:07:42 msvensson@neptunus.(none) +4 -0

  sql/item_strfunc.cc
    1.227 05/06/17 18:07:42 msvensson@neptunus.(none) +22 -3
    Push warning if invalid paremeters are used
    Push warning if out of resources
    Push warning if user tries to use des_* function when the server has been compiled without support for openssl.

  mysql-test/t/func_encrypt_nossl.test
    1.0 05/06/17 18:07:42 msvensson@neptunus.(none) +0 -0
    BitKeeper file /home/msvensson/mysql/bug10589/mysql-test/t/func_encrypt_nossl.test

  mysql-test/t/func_encrypt.test
    1.6 05/06/17 18:07:42 msvensson@neptunus.(none) +16 -0
    Add tests for use of des_* function with invalid parameters

  mysql-test/r/not_openssl.require
    1.0 05/06/17 18:07:42 msvensson@neptunus.(none) +0 -0
    BitKeeper file /home/msvensson/mysql/bug10589/mysql-test/r/not_openssl.require

  mysql-test/r/func_encrypt_nossl.result
    1.0 05/06/17 18:07:42 msvensson@neptunus.(none) +0 -0
    BitKeeper file /home/msvensson/mysql/bug10589/mysql-test/r/func_encrypt_nossl.result

  mysql-test/r/func_encrypt.result
    1.7 05/06/17 18:07:42 msvensson@neptunus.(none) +52 -21
    Add tests for use of des_* function with invalid parameters

  mysql-test/include/not_openssl.inc
    1.0 05/06/17 18:07:42 msvensson@neptunus.(none) +0 -0
    BitKeeper file /home/msvensson/mysql/bug10589/mysql-test/include/not_openssl.inc

ChangeSet
  1.2292.7.2 05/06/17 11:15:29 elliot@mysql.com +3 -0
  BUG#10442 Fix replication slave crash when a query with multiupdate and 
  subselects is used.

  sql/sql_parse.cc
    1.444 05/06/17 11:15:25 elliot@mysql.com +8 -8
    BUG#10442 Fix crash on replication slave by making sure that table list
    is filled out before it is used.

ChangeSet
  1.2294 05/06/17 14:45:54 mskold@mysql.com +3 -0
  Fix for bug#10936: Cluster engine shows wrong key value for duplicate key error

  mysql-test/t/ndb_insert.test
    1.9 05/06/17 14:45:01 mskold@mysql.com +9 -6
    Fix for bug#10936: Cluster engine shows wrong key value for duplicate key error

  mysql-test/r/ndb_insert.result
    1.8 05/06/17 14:45:01 mskold@mysql.com +9 -7
    Fix for bug#10936: Cluster engine shows wrong key value for duplicate key error

  sql/ha_ndbcluster.cc
    1.158 05/06/17 14:45:00 mskold@mysql.com +7 -2
    Fix for bug#10936: Cluster engine shows wrong key value for duplicate key error

ChangeSet
  1.2292.7.1 05/06/17 12:36:09 tulin@dl145c.mysql.com +1 -0
  sql_select.cc:
    fixed 64bit bug in lenght store/retrive in cache

  sql/sql_select.cc
    1.411.1.1 05/06/17 12:35:26 ndbdev@dl145c.mysql.com +4 -2
    fixed 64bit bug in lenght store/retrive in cache

  mysql-test/r/rpl_multi_update3.result
    1.1 05/06/16 16:32:31 elliot@mysql.com +42 -0

  mysql-test/r/rpl_multi_update3.result
    1.0 05/06/16 16:32:31 elliot@mysql.com +0 -0
    BitKeeper file /Users/emurphy/src/work/mysql-4.1-bug10442/mysql-test/r/rpl_multi_update3.result

  mysql-test/t/rpl_multi_update3.test
    1.1 05/06/16 16:31:14 elliot@mysql.com +33 -0

  mysql-test/t/rpl_multi_update3.test
    1.0 05/06/16 16:31:14 elliot@mysql.com +0 -0
    BitKeeper file /Users/emurphy/src/work/mysql-4.1-bug10442/mysql-test/t/rpl_multi_update3.test

ChangeSet
  1.2292.6.2 05/06/17 00:11:48 konstantin@mysql.com +5 -0
  Fix Bug#9334 "PS API queries in log file" and 
  Bug#8367 "low log doesn't gives complete information about prepared 
  statements"
  Implement status variables for prepared statements commands (a port of
  the patch by Andrey Hristov).
  See details in comments to the changed files.
  No test case as there is no way to test slow log/general log in 
  mysqltest.

  sql/sql_prepare.cc
    1.146 05/06/17 00:11:40 konstantin@mysql.com +49 -22
    - fix a bug in SQL syntax for prepared statements + logging:
      if we use --log and EXECUTE stmt USING @no_such_variable;, the
      server crashed because the old code assumed that the variable 
      returned by get_var_with_binlog is never NULL.
    - account statistics for 
      mysql_stmt_{prepare,execute,close,reset,send_long_data} in
      Com_stmt_{prepare,execute,close,reset,send_long_data} correspondingly.
    - log slow statements into the slow log early, when thd->query
      points to a valid (with expanded placeholder values) query.
      The previous version was logging it in sql_parse, when thd->query
      is empty. Prevent the server from logging the statement twice by 
      setting thd->enable_slow_log= FALSE.
    - now in case of EXECUTE stmt in SQL syntax for prepared statements the 
      general log gets two queries, e.g.
      Query    EXECUTE stmt USING @a, @b, @c
      Execute  INSERT INTO t1 VALUES (1, 2, 3)
      This makes the behavior consistent with PREPARE command, which
      also logs the statement twice.

  sql/sql_parse.cc
    1.443 05/06/17 00:11:40 konstantin@mysql.com +5 -4
    - account DEALLOCATE prepare as a Com_stmt_close command (close of a
    prepared statement).

  sql/mysqld.cc
    1.576 05/06/17 00:11:40 konstantin@mysql.com +7 -0
    Add status variables for prepared statements API: now we record
    mysql_stmt_close, mysql_stmt_reset, mysql_stmt_prepare, mysql_stmt_execute
    mysql_stmt_send_long_data, PREPARE, EXECUTE, DEALLOCATE.

  sql/mysql_priv.h
    1.352 05/06/17 00:11:40 konstantin@mysql.com +3 -2
    - remove obsolete macro.
    - add declarations for new status variables.
    - export function log_slow_statement, which now is used in sql_prepare.cc

  mysql-test/r/ps_grant.result
    1.4 05/06/17 00:11:39 konstantin@mysql.com +1 -1
    Now execute is logged with tag 'Execute' (changed result file).

ChangeSet
  1.2292.6.1 05/06/16 23:05:38 konstantin@mysql.com +4 -0
  A fix for Bug#9141 "4.1 does not log into slow log 
  ALTER, OPTIMIZE and ANALYZE statements".
  In 4.1 we disabled logging of slow admin statements. The fix adds an 
  option to enable it back.
  No test case (slow log is not tested in the test suite), but tested
  manually.
  + post-review fixes (word police mainly).

  sql/sql_parse.cc
    1.442 05/06/16 23:05:33 konstantin@mysql.com +18 -15
    Implement optional logging of administrative statements in the slow log.

  sql/sql_class.h
    1.279 05/06/16 23:05:33 konstantin@mysql.com +1 -1
    Rename 'thd->slow_command' to thd->enable_slow_log (negates
    the meaning of this variable, and so resolves the need to negate
    value opt_log_slow_admin_statements when setting it).

  sql/mysqld.cc
    1.575 05/06/16 23:05:33 konstantin@mysql.com +16 -3
    Add server option '--log-slow-admin-statements' to log slow
    optimize/alter/etc statements to the slow log if it's enabled.
    Add warnings that this option works only if the slow log is open.

  sql/mysql_priv.h
    1.351 05/06/16 23:05:32 konstantin@mysql.com +1 -0
    - declaration for a new option

ChangeSet
  1.2292.5.1 05/06/16 09:45:41 igor@rurik.mysql.com +3 -0
  group_by.result, group_by.test:
    Added a test case for bug #8614.
  sql_select.cc:
    Fixed bug #8614.
    SELECT DISTINCT ... GROUP BY 'const' must be equivalent to
    SELECT ... GROUP BY 'const'.

  mysql-test/r/group_by.result
    1.47 05/06/16 09:45:10 igor@rurik.mysql.com +10 -0
    Added a test case for bug #8614.

  mysql-test/t/group_by.test
    1.37 05/06/16 09:44:42 igor@rurik.mysql.com +14 -1
    Added a test case for bug #8614.

  sql/sql_select.cc
    1.412 05/06/16 09:43:51 igor@rurik.mysql.com +8 -3
    Fixed bug #8614.
    SELECT DISTINCT ... GROUP BY 'const' must be equivalent to
    SELECT ... GROUP BY 'const'.

ChangeSet
  1.2292.2.5 05/06/16 16:56:03 lars@mysql.com +4 -0
  WL#2076: Added if(...) construct to mysqltest
  Removed SHOW BINLOG EVENTS in test case for ps-protocol and row-based replication

  mysql-test/t/rpl_ddl.test
    1.3 05/06/16 16:55:54 lars@mysql.com +2 -0
    Comment

  mysql-test/r/rpl_ddl.result
    1.3 05/06/16 16:55:54 lars@mysql.com +0 -585
    Removed SHOW BINLOG EVENTS in test case for ps-protocol and row-based replication

  mysql-test/include/rpl_stmt_seq.inc
    1.3 05/06/16 16:55:54 lars@mysql.com +25 -4
    Removed SHOW BINLOG EVENTS in test case for ps-protocol and row-based replication

  client/mysqltest.c
    1.164 05/06/16 16:55:54 lars@mysql.com +54 -30
    WL#2067: Added if(...) construct to mysqltest

ChangeSet
  1.2260.67.2 05/06/16 15:17:47 msvensson@neptunus.(none) +3 -0
  BUG10365 Cluster handler uses non-standard error code
    - Updated after review

  sql/sql_base.cc
    1.248.2.2 05/06/16 15:17:44 msvensson@neptunus.(none) +1 -2
    Only need to call ha_create_table_from_engine and check if result is > 0. If that is the case, print error message

  sql/handler.cc
    1.164.1.2 05/06/16 15:17:44 msvensson@neptunus.(none) +10 -8
    Return -1 if table does not exists
    Return 0 if table exists and it could be created
    Return >0 if table existed but it could not be created.

  sql/ha_ndbcluster.cc
    1.153.1.2 05/06/16 15:17:44 msvensson@neptunus.(none) +1 -1
    Return -1 if table does not exists

ChangeSet
  1.2292.2.3 05/06/16 13:39:54 serg@serg.mylan +1 -0
  for consictency, changed to use memcpy_fixed.

  sql/sql_select.cc
    1.411 05/06/16 13:39:46 serg@serg.mylan +6 -5
    for consictency, changed to use memcpy_fixed.

ChangeSet
  1.2292.2.2 05/06/16 10:09:05 serg@serg.mylan +2 -0
  fix test results - Bug #11328

  mysql-test/t/bdb_cache.test
    1.6 05/06/16 10:08:58 serg@serg.mylan +1 -3
    fix test results

  mysql-test/r/bdb_cache.result
    1.5 05/06/16 10:08:58 serg@serg.mylan +1 -3
    fix test results

ChangeSet
  1.2292.2.1 05/06/15 22:49:52 serg@serg.mylan +1 -0
  cleanup for bug#11167.
  portability alignment issues.

  sql/sql_select.cc
    1.410 05/06/15 22:49:36 serg@serg.mylan +5 -5
    cleanup for bug#11167.
    portability alignment issues.

ChangeSet
  1.2290.5.1 05/06/15 14:58:53 stewart@mysql.com +1 -0
  BUG#11132 Connections stuck in CLOSE_WAIT
  
  In 4.1 (it is different in 5.0), we do not use the mgm connection after fetching the
  configuration (and if we did, we would have to have calls to check the connection and
  reconnect if needed - in case the mgm server had restarted) so we can disconnect after
  first use.
  
  This means we won't have connections stuck in CLOSE_WAIT when the mgm server shuts down.

  ndb/src/common/mgmcommon/ConfigRetriever.cpp
    1.24 05/06/15 14:58:45 stewart@mysql.com +3 -1
    Disconnect from management server after configuration is fetched.

ChangeSet
  1.2290.4.1 05/06/14 21:39:08 lenz@mysql.com +1 -0
   - Do not build the RPMs statically on i386 by default, only when adding either
     "--with static" or "--define '_with_static 1'" to the RPM build options. 
     Static linking really only makes sense when linking against the specially patched
     glibc 2.2.5.

  support-files/mysql.spec.sh
    1.96 05/06/14 21:39:03 lenz@mysql.com +13 -2
     - Do not build statically on i386 by default, only when adding either "--with
       static" or "--define '_with_static 1'" to the RPM build options. Static
       linking really only makes sense when linking against the specially patched
       glibc 2.2.5.

ChangeSet
  1.2290.3.1 05/06/13 20:40:53 tulin@dl145c.mysql.com +1 -0
  Merge tulin@bk-internal.mysql.com:/home/bk/mysql-4.1
  into dl145c.mysql.com:/home/ndbdev/tomas/mysql-4.1

  BitKeeper/etc/logging_ok
    1.400 05/06/13 20:40:48 tulin@dl145c.mysql.com +0 -0
    auto-union

ChangeSet
  1.2290.1.3 05/06/13 11:38:16 igor@igor-inspiron.creware.com +2 -0
  func_if.result, func_if.test:
    Correction for test case of bug #11142.

  mysql-test/r/func_if.result
    1.15 05/06/13 11:37:55 igor@igor-inspiron.creware.com +0 -14
    Correction for test case of bug #11142.

  mysql-test/t/func_if.test
    1.12 05/06/13 11:37:04 igor@igor-inspiron.creware.com +0 -15
    Correction for test case of bug #11142.

ChangeSet
  1.2290.1.2 05/06/13 11:24:26 igor@igor-inspiron.creware.com +3 -0
  func_if.result, func_if.test:
    Added a test case for bug #11142.
  item_cmpfunc.cc:
    Fixed bug #11142.
    Implementation of Item_func_nullif::is_null was corrected.

  mysql-test/r/func_if.result
    1.14 05/06/13 11:23:55 igor@igor-inspiron.creware.com +27 -0
    Added a test case for bug #11142.

  mysql-test/t/func_if.test
    1.11 05/06/13 11:23:22 igor@igor-inspiron.creware.com +27 -0
    Added a test case for bug #11142.

  sql/item_cmpfunc.cc
    1.190 05/06/13 11:21:35 igor@igor-inspiron.creware.com +1 -3
    Fixed bug #11142.
    Implementation of Item_func_nullif::is_null was corrected.

ChangeSet
  1.2290.2.1 05/06/13 19:45:15 tulin@dl145c.mysql.com +3 -0
  logging_ok:
    Logging to logging@openlogging.org accepted
  DbtcMain.cpp, testTimeout.cpp:
    Bug  #11290 TransactionInactiveTimeout = 0 does not result in infinite timeout

  BitKeeper/etc/logging_ok
    1.398.1.1 05/06/13 19:44:57 ndbdev@dl145c.mysql.com +1 -0
    Logging to logging@openlogging.org accepted

  ndb/src/kernel/blocks/dbtc/DbtcMain.cpp
    1.56 05/06/13 19:44:15 ndbdev@dl145c.mysql.com +10 -6
    Bug  #11290 TransactionInactiveTimeout = 0 does not result in infinite timeout

  ndb/test/ndbapi/testTimeout.cpp
    1.11 05/06/13 19:44:00 ndbdev@dl145c.mysql.com +74 -12
    Bug  #11290 TransactionInactiveTimeout = 0 does not result in infinite timeout

ChangeSet
  1.2291 05/06/13 16:19:20 pekka@mysql.com +2 -0
  ndb - valgrind fixes

  ndb/test/ndbapi/testBlobs.cpp
    1.22 05/06/13 16:18:34 pekka@mysql.com +3 -2
    valgrind fixes

  ndb/src/ndbapi/NdbDictionaryImpl.cpp
    1.52 05/06/13 16:18:34 pekka@mysql.com +6 -1
    valgrind fixes

ChangeSet
  1.2284.3.1 05/06/13 06:10:19 igor@igor-inspiron.creware.com +4 -0
  ctype_utf8.test, ctype_utf8.result:
    Added a test case for bug #11167.
  sql_select.cc:
    Fixed bug #11167.
    In 4.1 char/varchar fields are limited by 255 characters in
    length that make them longer than 255 bytes in size for such
    character sets as UTF8. The functions store_record_in_cache
    and read_cached_records did not take into account this
    Moreover the code did not take into account that the size
    of the varchar fields in 5.0 can be up to 65535 bytes

  BitKeeper/etc/logging_ok
    1.399 05/06/13 06:10:18 igor@igor-inspiron.creware.com +1 -0
    Logging to logging@openlogging.org accepted

  mysql-test/t/ctype_utf8.test
    1.56 05/06/13 06:08:49 igor@igor-inspiron.creware.com +42 -0
    Added a test case for bug #11167.

  mysql-test/r/ctype_utf8.result
    1.56 05/06/13 06:08:21 igor@igor-inspiron.creware.com +34 -0
    Added a test case for bug #11167.

  sql/sql_select.cc
    1.409 05/06/13 05:59:20 igor@igor-inspiron.creware.com +6 -6
    Fixed bug #11167.
    In 4.1 char/varchar fields are limited by 255 characters in
    length that make them longer than 255 bytes in size for such
    character sets as UTF8. The functions store_record_in_cache
    and read_cached_records did not take into account this
    Moreover the code did not take into account that the size
    of the varchar fields in 5.0 can be up to 65535 bytes

ChangeSet
  1.2279.1.4 05/06/13 09:09:50 joreland@mysql.com +1 -0
  bug#10294 - ndb restore with #concurrent transactions < parallelism
    Enable retry on startTransaction

  ndb/tools/restore/consumer_restore.cpp
    1.12 05/06/13 09:09:48 joreland@mysql.com +16 -8
    Enable retry on startTransaction==NULL

ChangeSet
  1.2260.72.2 05/06/10 21:29:37 kent@mysql.com +4 -0
  mtr_process.pl:
    Added a sleep for 5 seconds when shuting down,
    work around for strange problem with server restarts
  mtr_cases.pl:
    Set default time zone as opt to mysqld
  mysql-test-run.pl:
    Enabled --mysqld=<flags> to work
    Put some Windows path names into environment,
    to be used in --replace_result
  mysql-test-run.sh:
    Make shell script tolerant to Windows change in test cases

  mysql-test/lib/mtr_process.pl
    1.9 05/06/10 21:25:20 kent@mysql.com +2 -0
    Added a sleep for 5 seconds when shuting down,
    work around for strange problem with server restarts

  mysql-test/lib/mtr_cases.pl
    1.3 05/06/10 21:24:20 kent@mysql.com +6 -8
    Set default time zone as opt to mysqld

  mysql-test/mysql-test-run.pl
    1.22 05/06/10 21:21:51 kent@mysql.com +15 -3
    Enabled --mysqld=<flags> to work
    Put some Windows path names into environment,
    to be used in --replace_result

  mysql-test/mysql-test-run.sh
    1.253 05/06/10 21:20:13 kent@mysql.com +2 -1
    Make shell script tolerant to Windows change in test cases

ChangeSet
  1.2284.2.1 05/06/10 16:26:23 msvensson@neptunus.(none) +2 -0
  Bug #9558 mysqldump --no-data db t1 t2 format still dumps data
   - Added testcases according to spec in bug report.

  mysql-test/t/mysqldump.test
    1.34 05/06/10 16:26:20 msvensson@neptunus.(none) +15 -0
    Add tests for --no-data

  mysql-test/r/mysqldump.result
    1.46 05/06/10 16:26:20 msvensson@neptunus.(none) +60 -0
    Update results

ChangeSet
  1.2260.72.1 05/06/10 15:30:16 lenz@mysql.com +1 -0
  - added missing files std_data/server-cert.pem and std_data/server-key.pem to make
    the SSL tests pass

  mysql-test/Makefile.am
    1.44 05/06/10 15:30:11 lenz@mysql.com +2 -1
    - added missing files std_data/server-cert.pem and std_data/server-key.pem to make
      the SSL tests pass

ChangeSet
  1.2279.1.3 05/06/10 15:13:44 joreland@mysql.com +1 -0
  ndb -
  Fix mem leak in testBlobs

  ndb/test/ndbapi/testBlobs.cpp
    1.21 05/06/10 15:13:41 joreland@mysql.com +5 -5
    Fix mem leak in testBlobs

ChangeSet
  1.2279.1.2 05/06/10 12:31:55 joreland@mysql.com +1 -0
  ndb - autotest
     Fix stack overflow in ndb_cpcd on amd64

  ndb/src/common/logger/Logger.cpp
    1.10 05/06/10 12:31:51 joreland@mysql.com +2 -2
    Fix stack overflow in ndb_cpcd on amd64

ChangeSet
  1.2279.1.1 05/06/10 10:22:32 joreland@mysql.com +3 -0
  ndb - autotest
    script fixes for solaris

  ndb/test/run-test/ndb-autotest.sh
    1.15 05/06/10 10:22:30 joreland@mysql.com +9 -8
    fix script wrt solaris

  ndb/test/run-test/make-config.sh
    1.6 05/06/10 10:22:30 joreland@mysql.com +17 -17
    fix script wrt solaris

  ndb/src/cw/cpcd/main.cpp
    1.7 05/06/10 10:22:30 joreland@mysql.com +1 -5
    fix usage of load_defaults, as it does have a short option

ChangeSet
  1.2260.65.2 05/06/09 19:44:59 jimw@mysql.com +1 -0
  Fix use of _cgets() to handle an input line that exceeds our buffer space
  before a newline is found. (Bug #10840)

  client/mysql.cc
    1.207 05/06/09 19:44:09 jimw@mysql.com +20 -1
    Call _cgets() as many times as necessary to get the full line of input

ChangeSet
  1.2283.1.1 05/06/09 16:06:15 acurtis@xiphis.org +3 -0
  Bug#11028 Crash on create table like
    Report error instead of crashing

  sql/sql_table.cc
    1.288 05/06/09 16:06:00 acurtis@xiphis.org +10 -5
    fix for null db name

  mysql-test/t/create.test
    1.54 05/06/09 16:06:00 acurtis@xiphis.org +11 -0
    Test for bug 11028

  mysql-test/r/create.result
    1.82 05/06/09 16:06:00 acurtis@xiphis.org +6 -0
    Test for bug 11028

ChangeSet
  1.2285 05/06/08 09:54:31 reggie@mdk10.(none) +1 -0
  Bug #8183 MERGE and SYM cause wrong SHOW CREATE TABLE 
  
  Without this patch, all file elements in info have symlink resolved
  pathnames.  This means append_create_info does not  have any way
  of showing the correct database name when a symlinked database is used.

ChangeSet
  1.2284 05/06/09 18:00:50 konstantin@mysql.com +1 -0
  Fix broken test suite.

  mysql-test/r/ps_6bdb.result
    1.24 05/06/09 18:00:46 konstantin@mysql.com +3 -3
    Fix broken test suite.

ChangeSet
  1.2260.71.1 05/06/09 13:28:29 mskold@mysql.com +1 -0
  Disallow TL_WRITE_ALLOW_READ being transformed into TL_WRITE_ALLOW_WRITE

  sql/ha_ndbcluster.cc
    1.157 05/06/09 13:28:07 mskold@mysql.com +1 -1
    Disallow TL_WRITE_ALLOW_READ being transformed into TL_WRITE_ALLOW_WRITE

ChangeSet
  1.2282 05/06/09 12:26:45 joreland@mysql.com +1 -0
  update result file for ps7_ndb

  mysql-test/r/ps_7ndb.result
    1.18 05/06/09 12:26:04 joreland@mysql.com +3 -3
    fix result file

ChangeSet
  1.2260.70.2 05/06/09 14:39:29 gluh@eagle.intranet.mysql.r18.ru +3 -0
  Fix for bug#10732: Set SQL_MODE to NULL gives garbled error message
    generate proper error message if we use SET ... = NULL for 'set'
    variables

  sql/set_var.cc
    1.170 05/06/09 14:38:50 gluh@mysql.com +3 -0
    Fix for bug#10732: Set SQL_MODE to NULL gives garbled error message
      generate proper error message if we use SET ... = NULL for 'set'
      variables

  mysql-test/t/sql_mode.test
    1.8 05/06/09 14:38:50 gluh@mysql.com +5 -0
    Fix for bug#10732: Set SQL_MODE to NULL gives garbled error message
      generate proper error message if we use SET ... = NULL for 'set'
      variables

  mysql-test/r/sql_mode.result
    1.11 05/06/09 14:38:50 gluh@mysql.com +2 -0
    Fix for bug#10732: Set SQL_MODE to NULL gives garbled error message
      generate proper error message if we use SET ... = NULL for 'set'
      variables

ChangeSet
  1.2260.70.1 05/06/09 13:13:02 ramil@mysql.com +1 -0
  a fix (bug #11193: error messages gets garbled after reggies latest changeset: ChangeSet@1.2260.1.).

  mysys/my_fopen.c
    1.14 05/06/09 13:12:54 ramil@mysql.com +2 -2
    a fix (bug #11193: error messages gets garbled after reggies latest changeset: ChangeSet@1.2260.1.).

ChangeSet
  1.2279 05/06/09 08:07:48 joreland@mysql.com +1 -0
  ndb - autotest
    small script fixes
    - Don't use hostname -s as it's linux specific
    - Don't remove result unless scp worked

  ndb/test/run-test/ndb-autotest.sh
    1.14 05/06/09 08:07:45 joreland@mysql.com +5 -2
    Don't use hostname -s as it's linux specific
    Don't remove result unless scp worked

ChangeSet
  1.2278 05/06/09 07:49:48 joreland@mysql.com +1 -0
  ndb - uint overflow when running on 64-bit platform with more than 4Gb of mem
  bug#10711
  bug#10058
  bug#9363
  bug#9025
  bug#8918

  ndb/src/kernel/blocks/ndbfs/Ndbfs.cpp
    1.15 05/06/09 07:49:45 joreland@mysql.com +9 -9
    Use UintPtr when computing page address to make sure that Uint32 does not overflow

ChangeSet
  1.2260.69.1 05/06/08 18:57:39 jimw@mysql.com +1 -0
  Make sure we don't mistake a "grep mysqld" for a mysqld process
  when checking if the server is running in mysqld_safe. (Bug #11122)

  configure.in
    1.379 05/06/08 18:57:36 jimw@mysql.com +8 -8
    Add "grep -v grep" to FIND_PROC so we don't mistake "grep mysqld"
    for a mysqld process.

ChangeSet
  1.2260.61.7 05/06/08 14:35:16 jimw@mysql.com +3 -0
  Fix problem with handling of lower_case_table_name == 2 when
  the case in the FROM and WHERE clauses didn't agree. (Bug #9500)

  sql/mysqld.cc
    1.574 05/06/08 14:35:13 jimw@mysql.com +5 -3
    Move initialization of table_alias_charset to after we
    have decided what lower_case_table_names should be.

  mysql-test/t/lowercase_table2.test
    1.9 05/06/08 14:35:13 jimw@mysql.com +9 -1
    Fix 'DROP TABLE' to not drop tables with the same name.

  mysql-test/r/lowercase_table2.result
    1.13 05/06/08 14:35:13 jimw@mysql.com +6 -1
    Update results

ChangeSet
  1.2260.68.1 05/06/08 21:40:58 svoj@mysql.com +1 -0
  Merge mysql.com:/var/tmp/sslbug/mysql-4.0
  into mysql.com:/var/tmp/sslbug/mysql-4.1

  include/my_global.h
    1.94 05/06/08 21:40:57 svoj@mysql.com +0 -0
    Auto merged

ChangeSet
  1.1346.1.770 05/06/08 21:07:25 svoj@mysql.com +1 -0
  Fix for
  BUG#10675 - MySQL fails to build with --openssl on Mac OS X 10.4
  BUG#11150 - HP-UX yaSSL/OpenSSL configure/header problem
  Remove obsolete code.

  include/my_global.h
    1.34.1.38 05/06/08 21:07:23 svoj@mysql.com +0 -6
    Obsolete code removed. OpenSSL doesn't have crypt anymore (it was dropped in ~2003).
    This patch fixes compilation failures with both OpenSSL and yaSSL on systems where
    crypt was defined in unistd.h.
    Conclusion is we do not use OpenSSL's crypt unless it wasn't defined in
    unistd.h/crypt.h and it was defined in old OpenSSL.

  myisam/mi_open.c
    1.84 05/06/08 09:54:16 reggie@mdk10.(none) +2 -2
    store name (not symlinked resolved) instead of org_name (symlink resolved)
    in info.

ChangeSet
  1.2277 05/06/08 16:48:57 joreland@mysql.com +4 -0
  bug#11166 - ndb
    Fix potential inconsistency when running ndb_restore due to faulty parsing
      of backup log wrt inserts

  ndb/tools/restore/consumer_restore.cpp
    1.11 05/06/08 16:48:54 joreland@mysql.com +31 -5
    Handle insert in log
    Only allow certain errors

  ndb/tools/restore/Restore.hpp
    1.19 05/06/08 16:48:54 joreland@mysql.com +1 -0
    Keep track of last gci to next iteration

  ndb/tools/restore/Restore.cpp
    1.23 05/06/08 16:48:54 joreland@mysql.com +4 -4
    
      Notice: this will not group and commit the deltas listed below
      into a ChangeSet, because there are no ChangeSet comments.
      Click [Checkin] again to check in only the commented deltas,
      or type Control-l to go back and provide ChangeSet comments.

  ndb/src/kernel/blocks/backup/Backup.cpp
    1.17 05/06/08 16:48:54 joreland@mysql.com +21 -4
    Make sure that entire stopGCP is in log

ChangeSet
  1.2260.67.1 05/06/08 13:31:59 msvensson@neptunus.(none) +9 -0
  BUG#10365 Cluster handler uses non-standard error codes
   - Added better error messages when trying to open a table that can't be discovered or unpacked. The most likely cause of this is that it does not have any frm data, probably since it has been created from NdbApi or is a NDB system table.
   - Separated functionality that was in ha_create_table_from_engine into two functions. One that checks if the table exists and another one that tries to create the table from the engine.

  sql/sql_table.cc
    1.281.4.1 05/06/08 13:31:56 msvensson@neptunus.(none) +10 -8
    Add comments, remove parameter create_if_found to ha_create_table_from_engine.
    When dropping a table, try to discover it from engine. If discover fails, use same error message as if the table didn't exists. 
    Maybe another message should be displayed here, ex: "Table could not be dropped, unpack failed"
    
    When creating a new table, use ha_table_exists_in_engine to check if a table with the given name already exists.

  sql/sql_base.cc
    1.248.2.1 05/06/08 13:31:56 msvensson@neptunus.(none) +14 -3
    Use the function ha_table_exists_in_engine to detect if table exists in enegine. 
    If it exists, call function ha_create_table_from_engine to try and create it.
    If create of table fails, set correct error message. 

  sql/handler.h
    1.141 05/06/08 13:31:56 msvensson@neptunus.(none) +2 -3
    Remove paramter create_if_cound from  ha_create_table_from_engine
    Rename ha_table_exists to ha_table_exists_in_engine 

  sql/handler.cc
    1.164.1.1 05/06/08 13:31:56 msvensson@neptunus.(none) +45 -50
    Update comment of ha_create_table_from_engine
    Remove parameter create_if_found from ha_create_table_from_engine, the function ha_table_exists_in_engine is now used toi check if table is found in engine.
    Cleanup return codes from ha_create_table_from_engine.
    Change name of ha_table_exists to ha_table_exists_in_engine, update comment and returne codes.

  sql/ha_ndbcluster.h
    1.54 05/06/08 13:31:56 msvensson@neptunus.(none) +2 -1
    Rename function ndbcluster_table_exists to ndb ndbcluster_table_exists_in_engine

  sql/ha_ndbcluster.cc
    1.153.1.1 05/06/08 13:31:56 msvensson@neptunus.(none) +11 -12
    Rename and use the function ndbcluster_table_exists_in_engine.
    Correct return valu from ndbcluster_discover
    Remove old code "ndb_discover_tables"

  ndb/test/ndbapi/create_tab.cpp
    1.7 05/06/08 13:31:56 msvensson@neptunus.(none) +1 -1
    Set connectstring before creating Ndb object.

  mysql-test/t/ndb_autodiscover.test
    1.16 05/06/08 13:31:56 msvensson@neptunus.(none) +21 -0
    Add tests for reading from a table that can't be discovered(SYSTAB_0)
    Discovery is not performed during create table anymore.

  mysql-test/r/ndb_autodiscover.result
    1.12 05/06/08 13:31:56 msvensson@neptunus.(none) +17 -3
    Add tests for reading from a table that can't be discovered(SYSTAB_0)
    Discovery is not performed during create table anymore.

ChangeSet
  1.2260.66.1 05/06/08 01:25:06 jimw@mysql.com +3 -0
  Fix Windows build warning and file missing from projects.

  vio/viosocket.c
    1.31 05/06/08 01:24:00 jimw@mysql.com +1 -0
    Add missing parameter

  VC++Files/client/mysqlclient.dsp
    1.31 05/06/08 01:16:26 jimw@mysql.com +4 -0
    Add missing file

  VC++Files/libmysql/libmysql.dsp
    1.29 05/06/08 01:16:15 jimw@mysql.com +4 -0
    Add missing file

ChangeSet
  1.2260.65.1 05/06/08 00:43:57 jimw@mysql.com +1 -0
  Fix calculation of buffer size for _cgets() on Windows. (Bug #10841)

  client/mysql.cc
    1.206 05/06/08 00:43:26 jimw@mysql.com +2 -1
    Fix calculation of buffer size for _cgets()

ChangeSet
  1.2260.61.6 05/06/07 11:02:41 reggie@mdk10.(none) +1 -0
  improved mapping from numerical open codes to string fopen codes.
  
  This was necessary because the old code would return 
  "w+" for O_RDONLY|O_SHARE for example.

ChangeSet
  1.2260.61.5 05/06/07 10:55:03 reggie@mdk10.(none) +1 -0
  Merge rburnett@bk-internal.mysql.com:/home/bk/mysql-4.1
  into mdk10.(none):/home/reggie/bk/41test3

ChangeSet
  1.2260.64.1 05/06/07 22:43:25 serg@serg.mylan +3 -0
  bug#5373: handler READ NEXT w/o HANDLER READ [FIRST]
  check table->file->inited to catch incorrect calling sequence.

  sql/sql_handler.cc
    1.62 05/06/07 22:43:18 serg@serg.mylan +27 -15
    cleanup: call index_init *correctly*, not every time.
    check table->file->inited to catch incorrect calling sequence.

  mysql-test/t/innodb_handler.test
    1.8 05/06/07 22:43:18 serg@serg.mylan +10 -0
    bug#5373: handler READ NEXT w/o HANDLER READ [FIRST]

  mysql-test/r/innodb_handler.result
    1.11 05/06/07 22:43:18 serg@serg.mylan +16 -0
    bug#5373: handler READ NEXT w/o HANDLER READ [FIRST]

  mysys/my_fopen.c
    1.13 05/06/07 11:02:31 reggie@mdk10.(none) +41 -21
    improved mapping from numerical open codes to string fopen codes.

  sql/sql_acl.cc
    1.165 05/06/07 10:54:58 reggie@mdk10.(none) +0 -0
    Auto merged

ChangeSet
  1.2260.62.1 05/06/07 06:34:13 igor@rurik.mysql.com +6 -0
  Many files:
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

ChangeSet
  1.2260.61.2 05/06/07 16:34:10 monty@mysql.com +2 -0
  Merge mysql.com:/home/my/mysql-4.0 into mysql.com:/home/my/mysql-4.1

  myisam/mi_check.c
    1.147 05/06/07 16:34:09 monty@mysql.com +0 -0
    Auto merged

  BitKeeper/etc/logging_ok
    1.398 05/06/07 16:33:37 monty@mysql.com +0 -1
    auto-union

  mysql-test/r/ps_5merge.result
    1.23 05/06/07 06:33:34 igor@rurik.mysql.com +6 -6
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

  mysql-test/r/ps_4heap.result
    1.23 05/06/07 06:33:09 igor@rurik.mysql.com +3 -3
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

  mysql-test/r/ps_3innodb.result
    1.25 05/06/07 06:32:40 igor@rurik.mysql.com +3 -3
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

  mysql-test/r/ps_2myisam.result
    1.24 05/06/07 06:32:12 igor@rurik.mysql.com +3 -3
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

  mysql-test/r/ps_1general.result
    1.20 05/06/07 06:31:42 igor@rurik.mysql.com +6 -6
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

  sql/sql_class.cc
    1.200 05/06/07 06:29:27 igor@rurik.mysql.com +7 -3
    Fixed bug #9899: erronious NOT_NULL flag for some attributes
    in the EXPLAIN table.

ChangeSet
  1.2275 05/06/07 15:10:57 joreland@mysql.com +4 -0
  bug#11133 - ndb
    incorrect handling of writeTuple with multi op transaction

  ndb/test/run-test/daily-basic-tests.txt
    1.20 05/06/07 15:10:54 joreland@mysql.com +4 -0
    Add testcase for bug 11133

  ndb/test/ndbapi/testNdbApi.cpp
    1.12 05/06/07 15:10:54 joreland@mysql.com +239 -0
    Add testcase for bug 11133

  ndb/src/kernel/blocks/dblqh/DblqhMain.cpp
    1.52 05/06/07 15:10:54 joreland@mysql.com +14 -13
    Let ACC decide what operation was performed when WRITE

  ndb/src/kernel/blocks/dbacc/DbaccMain.cpp
    1.32 05/06/07 15:10:54 joreland@mysql.com +12 -1
    1) Pass operation instead of insertIsDone to LQH
    2) transform operation correctly when in parallell que
       (multi op within same trans)

ChangeSet
  1.2260.60.1 05/06/07 15:09:49 monty@mysql.com +4 -0
  Revert Bar's fix as this causes changes in the key tree that could cause incompatibilites
  Fix instead wrong call to ha_key_cmp
  This is related to bug #10741 Inserting double value into utf8 column crashes server

  mysql-test/t/ctype_utf8.test
    1.55 05/06/07 15:09:41 monty@mysql.com +1 -0
    Additional test

  mysql-test/r/ctype_utf8.result
    1.55 05/06/07 15:09:41 monty@mysql.com +3 -0
    Additional test

  myisam/mi_rnext_same.c
    1.16 05/06/07 15:09:41 monty@mysql.com +2 -2
    Fixed wrong arguments to ha_key_cmp()
    This caused a compare to fail if we first found a key with end space and then same key without end space

  myisam/mi_key.c
    1.35 05/06/07 15:09:41 monty@mysql.com +3 -3
    Revert Bar's fix as this causes changes in the key tree that could cause incompatibilites

ChangeSet
  1.2260.1.60 05/06/07 04:21:19 igor@rurik.mysql.com +1 -0
  item_buff.cc:
    Removed an extra space char.

  sql/item_buff.cc
    1.10 05/06/07 04:20:43 igor@rurik.mysql.com +1 -1
    Removed an extra space char.

ChangeSet
  1.2260.59.1 05/06/07 03:05:57 igor@rurik.mysql.com +5 -0
  sql_select.cc, item_buff.cc, item.h:
    Fixed bug #11088: a crash for queries with GROUP BY a BLOB column
    + COUNT(DISTINCT...) due to an attempt to allocate a too large
    buffer for the BLOB field.
    Now the size of the buffer is limited by max_sort_length.
  group_by.test, group_by.result:
    Added a test case for bug #11088.

  sql/sql_select.cc
    1.408 05/06/07 03:04:21 igor@rurik.mysql.com +1 -1
    Fixed bug #11088: a crash for queries with GROUP BY a BLOB column
    + COUNT(DISTINCT...) due to an attempt to allocate a too large
    buffer for the BLOB fields.
    Now the size of the buffer is limited by max_sort_length.

  sql/item_buff.cc
    1.9 05/06/07 03:02:45 igor@rurik.mysql.com +7 -2
    Fixed bug #11088: a crash for queries with GROUP BY a BLOB column
    + COUNT(DISTINCT...) due to an attempt to allocate a too large
    buffer for the BLOB fields.
    Now the size of the buffer is limited by max_sort_length.

  sql/item.h
    1.182 05/06/07 02:58:26 igor@rurik.mysql.com +2 -2
    Fixed bug #11088: a crash for queries with GROUP BY a BLOB column
    + COUNT(DISTINCT...) due to an attempt to allocate a too large
    buffer for the BLOB fields.
    Now the size of the buffer is limited by max_sort_length.

  mysql-test/t/group_by.test
    1.36 05/06/07 02:57:40 igor@rurik.mysql.com +17 -0
    Added a test case for bug #11088.

  mysql-test/r/group_by.result
    1.46 05/06/07 02:57:06 igor@rurik.mysql.com +11 -0
    Added a test case for bug #11088.

ChangeSet
  1.2260.58.1 05/06/07 11:54:31 lars@mysql.com +3 -0
  Merge mysql.com:/home/bkroot/mysql-4.1
  into mysql.com:/home/bk/b6883-mysql-4.1

  sql/sql_parse.cc
    1.441 05/06/07 11:54:28 lars@mysql.com +0 -0
    Auto merged

  mysql-test/t/innodb.test
    1.70 05/06/07 11:54:26 lars@mysql.com +0 -0
    Auto merged

  mysql-test/r/innodb.result
    1.101 05/06/07 11:54:25 lars@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.41.3 05/06/07 11:47:59 lars@mysql.com +1 -0
  BUG#6883: Changed comment, style

  sql/sql_parse.cc
    1.435.1.3 05/06/07 11:47:41 lars@mysql.com +4 -4
    Changed comment, style

ChangeSet
  1.2260.55.3 05/06/07 05:10:18 elliot@mysql.com +1 -0
  Accepted openlogging

  BitKeeper/etc/logging_ok
    1.397 05/06/07 05:10:15 elliot@mysql.com +1 -0
    Accepted openlogging

ChangeSet
  1.2260.1.56 05/06/07 13:56:42 bar@mysql.com +3 -0
  Bug#10253: compound index length and utf8 char set
  produces invalid query results
  
  mi_key.c:
    well_formed_length should be executed before space trimming, not after.
  ctype_utf8.test:
  ctype_utf8.result:
    adding test.

  mysql-test/t/ctype_utf8.test
    1.54 05/06/07 13:55:46 bar@mysql.com +14 -0
    adding test.

  mysql-test/r/ctype_utf8.result
    1.54 05/06/07 13:55:38 bar@mysql.com +11 -0
    adding test.
    adding test.

  myisam/mi_key.c
    1.34 05/06/07 13:54:51 bar@mysql.com +3 -3
    Bug#10253: ompound index length and utf8 char set produces invalid query results
    well_formed_length should be executed before space trimming, not after.

ChangeSet
  1.2260.56.1 05/06/07 10:25:51 lenz@mysql.com +2 -0
  - BUG#10676: don't install "make_win_src_distribution" and "make_win_binary_distribution"
    when doing "make install" (they are not needed/useful) outside the build tree. Added
    "mysql_client_test" to the "MySQL-bench" RPM.
  - some small RPM spec file improvements (more variables than hard-coded values, cleanups)

  support-files/mysql.spec.sh
    1.95 05/06/07 10:25:45 lenz@mysql.com +27 -45
    - added mysql_client_test to the "bench" subpackage (BUG 10676)
    - use "mysqldatadir" variable instead of hard-coding the path multiple times
    - use the "mysqld_user" variable on all occasions a user name is referenced
    - removed (incomplete) Brazilian translations
    - removed redundant release tags from the subpackage descriptions

  scripts/Makefile.am
    1.43 05/06/07 10:25:44 lenz@mysql.com +1 -2
    - no need to install "make_win_src_distribution" and "make_win_binary_distribution"
      in "make install" (BUG#10676)

ChangeSet
  1.2260.55.2 05/06/06 22:17:16 elliot@mysql.com +2 -0
  BUG#7967 Fix mysqlhotcopy --record-log-position

  scripts/mysqlhotcopy.sh
    1.50 05/06/06 22:17:13 elliot@mysql.com +17 -3
    BUG#7967 Use fetchrow_hashref() when parsing SHOW SLAVE STATUS so
    that --record-log-pos option will work with all versions from 3.23
    forward and will not break again in the future if additional columns
    are added.

  BitKeeper/etc/ignore
    1.228 05/06/06 22:17:13 elliot@mysql.com +1 -0
    Added scripts/mysqlhotcopy.sh.rej to the ignore list

ChangeSet
  1.2260.55.1 05/06/06 21:22:23 bar@mysql.com +3 -0
  ctype_cp1250_ch.result, ctype_cp1250_ch.test:
    Adding test.
  ctype-win1250ch.c:
    Bug #9759 Empty result with 'LIKE' and cp1250_czech_cs
    Wrong min_sort_char fix.

  mysql-test/r/ctype_cp1250_ch.result
    1.2 05/06/06 21:22:04 bar@mysql.com +12 -0
    Adding test.

  mysql-test/t/ctype_cp1250_ch.test
    1.2 05/06/06 21:21:59 bar@mysql.com +12 -0
    Adding test.

  strings/ctype-win1250ch.c
    1.45 05/06/06 21:21:37 bar@mysql.com +1 -1
    Bug #9759 Empty result with 'LIKE' and cp1250_czech_cs
    Wrong min_sort_char fix.

ChangeSet
  1.1346.1.769 05/06/06 10:42:11 mronstrom@mysql.com +1 -0
  Merge mronstrom@bk-internal.mysql.com:/home/bk/mysql-4.0
  into mysql.com:/Users/mikron/bug10901

  BitKeeper/etc/logging_ok
    1.206.36.7 05/06/06 10:41:55 mronstrom@mysql.com +0 -0
    auto-union

ChangeSet
  1.2260.54.4 05/06/06 10:56:20 stewart@mysql.com +1 -0
  Fix BUILD/check-cpu for powerpc

  BUILD/check-cpu
    1.12 05/06/06 10:54:11 stewart@mysql.com +7 -4
    fix for powerpc linux

  BUILD/check-cpu
    1.11 05/06/06 10:47:11 stewart@mysql.com +1 -1
    Fix for processors that don't have a flags item in /proc/cpuinfo
    (e.g. PowerPC)

ChangeSet
  1.2260.54.3 05/06/05 20:10:47 kent@mysql.com +4 -0
  mtr_misc.pl, mtr_report.pl:
    Try kill all children to the mysql-test-run process when exiting
  mtr_process.pl:
    Added new function mtr_exit() that try kill all children to the mysql-test-run process when exiting
  mysql-test-run.pl:
    Try kill all children to the mysql-test-run process when exiting
    New --vardir caused problems on Windows
    Changed faulty calls to error() to mtr_error()

  mysql-test/lib/mtr_misc.pl
    1.2 05/06/05 20:05:19 kent@mysql.com +1 -1
    Try kill all children to the mysql-test-run process when exiting

  mysql-test/lib/mtr_process.pl
    1.8 05/06/05 20:04:19 kent@mysql.com +14 -0
    Added new function mtr_exit() that try kill all children to the mysql-test-run process when exiting

  mysql-test/lib/mtr_report.pl
    1.8 05/06/05 20:03:52 kent@mysql.com +2 -1
    Try kill all children to the mysql-test-run process when exiting

  mysql-test/mysql-test-run.pl
    1.21 05/06/05 20:01:00 kent@mysql.com +8 -6
    Try kill all children to the mysql-test-run process when exiting
    New --vardir caused problems on Windows
    Changed faulty calls to error() to mtr_error()

ChangeSet
  1.2260.54.2 05/06/05 19:38:52 serg@serg.mylan +44 -0
  a compiler must see '#pragma implementation' *before*
  '#pragma interface' (that comes with the #include'd header file)

  sql/tztime.cc
    1.20 05/06/05 19:38:42 serg@serg.mylan +1 -2
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_udf.cc
    1.49 05/06/05 19:38:42 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_string.cc
    1.93 05/06/05 19:38:42 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_select.cc
    1.407 05/06/05 19:38:42 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_olap.cc
    1.16 05/06/05 19:38:42 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_map.cc
    1.8 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_list.cc
    1.10 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_crypt.cc
    1.10 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_class.cc
    1.199 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/sql_analyse.cc
    1.52 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/set_var.cc
    1.169 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/protocol_cursor.cc
    1.7 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/protocol.cc
    1.104 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/procedure.cc
    1.9 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/opt_range.cc
    1.138 05/06/05 19:38:41 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/log_event.cc
    1.181 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_uniq.cc
    1.9 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_timefunc.cc
    1.89 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_sum.cc
    1.139 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_subselect.cc
    1.136 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_strfunc.cc
    1.226 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_geofunc.cc
    1.23 05/06/05 19:38:40 serg@serg.mylan +1 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_func.cc
    1.251 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item_cmpfunc.cc
    1.189 05/06/05 19:38:40 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/item.cc
    1.208 05/06/05 19:38:39 serg@serg.mylan +1 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/hash_filo.cc
    1.8 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/handler.cc
    1.167 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_ndbcluster.cc
    1.156 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_myisammrg.cc
    1.62 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_myisam.cc
    1.159 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_isammrg.cc
    1.20 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_isam.cc
    1.34 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_innodb.cc
    1.201 05/06/05 19:38:39 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_heap.cc
    1.56 05/06/05 19:38:38 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_blackhole.cc
    1.8 05/06/05 19:38:38 serg@serg.mylan +1 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/ha_berkeley.cc
    1.152 05/06/05 19:38:38 serg@serg.mylan +3 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/field.cc
    1.220 05/06/05 19:38:38 serg@serg.mylan +2 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/examples/ha_tina.cc
    1.6 05/06/05 19:38:38 serg@serg.mylan +0 -2
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/examples/ha_example.cc
    1.11 05/06/05 19:38:38 serg@serg.mylan +0 -2
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  sql/examples/ha_archive.cc
    1.25 05/06/05 19:38:38 serg@serg.mylan +0 -2
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  mysys/raid.cc
    1.34 05/06/05 19:38:38 serg@serg.mylan +0 -2
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  include/my_global.h
    1.93 05/06/05 19:38:38 serg@serg.mylan +2 -7
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  configure.in
    1.378 05/06/05 19:38:37 serg@serg.mylan +12 -1
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

  client/sql_string.cc
    1.23 05/06/05 19:38:37 serg@serg.mylan +1 -2
    a compiler must see '#pragma implementation' *before*
    '#pragma interface' (that comes with the #include'd header file)

ChangeSet
  1.2260.54.1 05/06/04 14:58:32 konstantin@mysql.com +3 -0
  Fix show warnings limit 0 and show warnings limit 0, 0.
  Add test coverage for SHOW WARNINGS LIMIT a, b;

  sql/sql_error.cc
    1.23 05/06/04 14:58:28 konstantin@mysql.com +2 -2
    Fix show warnings limit 0 and show warnings limit 0, 0

  mysql-test/t/warnings.test
    1.20 05/06/04 14:58:27 konstantin@mysql.com +22 -0
    Add test coverage for SHOW WARNINGS LIMIT a,b

  mysql-test/r/warnings.result
    1.30 05/06/04 14:58:27 konstantin@mysql.com +53 -0
    Add test coverage for SHOW WARNINGS LIMIT a,b

ChangeSet
  1.2260.1.53 05/06/04 18:14:34 stewart@mysql.com +2 -0
  BUG#10948 NDB Replication: Race condition with ALTER/DROP table
  BUG#9826  Server crash on schema change ("drop table", "alter table") with NDB
  
  See note on 10948 for detailed explanation.
  
  struct a { void* a; long long b[1]; };
  
  on PPC32 (and 32bit pa risc): 16
  on x86: 12
  
  so a malloc(sizeof(void*)+extra_bits) is wrong.
  
  Assuming that the long long is 64 bit aligned as non-aligned 64bit accesses
  are rather expensive on ppc.
  
  Thanks to paulus for doing the PPC port of valgrind.
  Without which I would no doubt still be trying to find this.

  ndb/src/ndbapi/DictCache.hpp
    1.7 05/06/04 18:14:28 stewart@mysql.com +1 -1
    Add warning about having to be the last member in the structure

  ndb/src/ndbapi/DictCache.cpp
    1.12 05/06/04 18:14:28 stewart@mysql.com +2 -1
    Fix allocation size for Ndb_local_table_info for architectures such as PPC and PA-RISC (32bit)
    where
    struct a { void* a; long long b;};
    is 64 bit aligned (i.e. sizeof(struct a)==16)

ChangeSet
  1.2260.1.52 05/06/04 07:28:26 serg@serg.mylan +5 -0
  mergemerged

  sql/sql_parse.cc
    1.440 05/06/04 07:28:18 serg@serg.mylan +1 -3
    mergemerged

  sql/sql_table.cc
    1.287 05/06/04 07:23:31 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_insert.cc
    1.166 05/06/04 07:23:30 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_base.cc
    1.251 05/06/04 07:23:30 serg@serg.mylan +0 -0
    Auto merged

  sql/mysql_priv.h
    1.350 05/06/04 07:23:30 serg@serg.mylan +0 -0
    Auto merged

ChangeSet
  1.2260.52.5 05/06/04 07:15:11 serg@serg.mylan +2 -0
  after mergemerge

  mysql-test/t/create.test
    1.53 05/06/04 07:15:04 serg@serg.mylan +1 -3
    after mergemerge

  mysql-test/r/create.result
    1.81 05/06/04 07:15:04 serg@serg.mylan +8 -0
    after mergemerge

ChangeSet
  1.1346.836.2 05/06/03 22:52:24 mronstrom@mysql.com +1 -0
  Bug #10901
  After review fix
  Copy from internal state to share state only when in lock write
  mode (happens only when lock table x write has been performed since
  update_state_info is only called when holding a TL_READ_NO_INSERT
  lock normally. Previous patch would have failed in combination with
  delayed writes.

  myisam/mi_check.c
    1.86.1.49 05/06/03 22:52:20 mronstrom@mysql.com +4 -2
    Bug #10901
    After review fix
    Copy from internal state to share state only when in lock write
    mode (happens only when lock table x write has been performed since
    update_state_info is only called when holding a TL_READ_NO_INSERT
    lock normally. Previous patch would have failed in combination with
    delayed writes.

ChangeSet
  1.2260.1.50 05/06/03 23:46:03 monty@mysql.com +47 -0
  Move USE_PRAGMA_IMPLEMENTATION to proper place
  Ensure that 'null_value' is not accessed before val() is called in FIELD() functions
  Fixed initialization of key maps. This fixes some problems with keys when you have more than 64 keys
  Fixed that ROLLUP don't always create a temporary table. This fix ensures that func_gconcat.test results are now predictable

  sql/sql_yacc.yy
    1.386 05/06/03 23:45:58 monty@mysql.com +0 -1
    removed extra {}

  sql/sql_udf.cc
    1.48 05/06/03 23:45:58 monty@mysql.com +2 -5
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_table.cc
    1.285.1.1 05/06/03 23:45:58 monty@mysql.com +4 -4
    Simple optimizations
    Fixed wrong checking of build_table_path() in undef-ed code

  sql/sql_string.cc
    1.92 05/06/03 23:45:58 monty@mysql.com +0 -2
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_select.cc
    1.406 05/06/03 23:45:58 monty@mysql.com +57 -33
    Move USE_PRAGMA_IMPLEMENTATION to proper place
    Fixed that ROLLUP don't have to always create a temporary table
    Added new argument to remove_const() to make above possible
    Fixed some errors that creapt up when we don't always do a temporary table for ROLLUP

  sql/sql_olap.cc
    1.15 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_map.cc
    1.7 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_list.cc
    1.9 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_insert.cc
    1.164.1.1 05/06/03 23:45:57 monty@mysql.com +4 -4
    Fixed that max_rows is ulong

  sql/sql_crypt.cc
    1.9 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_class.cc
    1.198 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/sql_analyse.cc
    1.51 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/set_var.cc
    1.168 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/protocol_cursor.cc
    1.6 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/protocol.cc
    1.103 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/procedure.cc
    1.8 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/opt_range.h
    1.39 05/06/03 23:45:57 monty@mysql.com +6 -2
    Fix that test_quick_select() works with any ammount of keys

  sql/opt_range.cc
    1.137 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/mysqld.cc
    1.573 05/06/03 23:45:57 monty@mysql.com +4 -0
    Move key_map variables here and initialize key_map_full properly

  sql/mysql_priv.h
    1.348.1.1 05/06/03 23:45:57 monty@mysql.com +1 -1
    Change key_map_full to not be const as we are giving it a proper value on startup

  sql/log_event.cc
    1.180 05/06/03 23:45:57 monty@mysql.com +1 -3
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_uniq.cc
    1.8 05/06/03 23:45:57 monty@mysql.com +2 -5
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_timefunc.cc
    1.88 05/06/03 23:45:57 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_sum.cc
    1.138 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_subselect.cc
    1.135 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_strfunc.cc
    1.225 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_geofunc.cc
    1.22 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item_func.cc
    1.250 05/06/03 23:45:56 monty@mysql.com +7 -9
    Move USE_PRAGMA_IMPLEMENTATION to proper place
    Ensure that 'null_value' is not accessed before val() is called

  sql/item_cmpfunc.cc
    1.188 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/item.cc
    1.207 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/hash_filo.cc
    1.7 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/handler.cc
    1.166 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_ndbcluster.cc
    1.155 05/06/03 23:45:56 monty@mysql.com +2 -5
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_myisammrg.cc
    1.61 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_myisam.cc
    1.158 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_isammrg.cc
    1.19 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_isam.cc
    1.33 05/06/03 23:45:56 monty@mysql.com +2 -6
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_innodb.cc
    1.200 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_heap.cc
    1.55 05/06/03 23:45:56 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_blackhole.cc
    1.7 05/06/03 23:45:56 monty@mysql.com +2 -5
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/ha_berkeley.cc
    1.151 05/06/03 23:45:55 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  sql/field.cc
    1.219 05/06/03 23:45:55 monty@mysql.com +1 -4
    Move USE_PRAGMA_IMPLEMENTATION to proper place

  mysql-test/t/innodb.test
    1.68.1.1 05/06/03 23:45:55 monty@mysql.com +15 -0
    Moved test here form func_gconcat

  mysql-test/t/func_gconcat.test
    1.27 05/06/03 23:45:55 monty@mysql.com +7 -20
    Move innodb specific test to innodb.test
    Changed table name r2 -> t2
    More test to see how ROLLUP was optimized

  mysql-test/r/olap.result
    1.19 05/06/03 23:45:55 monty@mysql.com +1 -1
    New test results after optimization

  mysql-test/r/innodb.result
    1.99.1.1 05/06/03 23:45:55 monty@mysql.com +12 -0
    Moved test here form func_gconcat

  mysql-test/r/func_gconcat.result
    1.36 05/06/03 23:45:55 monty@mysql.com +19 -18
    Move innodb specific test to innodb.test
    Changed table name r2 -> t2
    More test to see how ROLLUP was optimized

ChangeSet
  1.2260.52.4 05/06/03 21:24:13 serg@serg.mylan +14 -0
  mergemerged

  sql/sql_base.cc
    1.249.1.1 05/06/03 21:24:06 serg@serg.mylan +0 -1
    mergemerged

  mysql-test/t/create.test
    1.52 05/06/03 21:24:06 serg@serg.mylan +1 -14
    mergemerged

  mysql-test/r/create.result
    1.80 05/06/03 21:24:06 serg@serg.mylan +0 -17
    mergemerged

  sql/sql_table.cc
    1.286 05/06/03 21:10:26 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_repl.cc
    1.136 05/06/03 21:10:25 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_parse.cc
    1.438.1.1 05/06/03 21:10:23 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_insert.cc
    1.165 05/06/03 21:10:21 serg@serg.mylan +0 -7
    Auto merged

  sql/sql_handler.cc
    1.61 05/06/03 21:10:21 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_acl.cc
    1.162.1.3 05/06/03 21:10:20 serg@serg.mylan +0 -0
    Auto merged

  sql/mysql_priv.h
    1.349 05/06/03 21:10:19 serg@serg.mylan +0 -0
    Auto merged

  sql/lock.cc
    1.58 05/06/03 21:10:19 serg@serg.mylan +0 -0
    Auto merged

  scripts/make_binary_distribution.sh
    1.77 05/06/03 21:10:18 serg@serg.mylan +0 -0
    Auto merged

  configure.in
    1.377 05/06/03 21:10:17 serg@serg.mylan +0 -0
    Auto merged

  BitKeeper/etc/logging_ok
    1.396 05/06/03 21:09:53 serg@serg.mylan +0 -0
    auto-union

ChangeSet
  1.2260.53.2 05/06/03 21:08:45 serg@serg.mylan +2 -0
  after merge fixes

  mysql-test/t/create.test
    1.49.2.2 05/06/03 21:08:36 serg@serg.mylan +5 -2
    after merge fixes

  mysql-test/r/create.result
    1.77.2.2 05/06/03 21:08:36 serg@serg.mylan +11 -3
    after merge fixes

ChangeSet
  1.2260.53.1 05/06/03 18:29:36 serg@serg.mylan +15 -0
  merged

  sql/sql_parse.cc
    1.436.1.1 05/06/03 18:29:29 serg@serg.mylan +3 -16
    merged (perhaps wrong)

  sql/sql_insert.cc
    1.162.2.1 05/06/03 18:29:29 serg@serg.mylan +7 -13
    merged

  sql/sql_base.cc
    1.248.1.1 05/06/03 18:29:29 serg@serg.mylan +1 -2
    merged

  mysql-test/t/create.test
    1.49.2.1 05/06/03 18:29:29 serg@serg.mylan +14 -15
    merged

  mysql-test/r/create.result
    1.77.2.1 05/06/03 18:29:29 serg@serg.mylan +0 -8
    merged, need fixing

  include/my_global.h
    1.92 05/06/03 18:29:29 serg@serg.mylan +0 -8
    merged

  sql/sql_table.cc
    1.281.3.1 05/06/03 17:53:53 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_repl.cc
    1.134.1.1 05/06/03 17:53:53 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_handler.cc
    1.59.1.1 05/06/03 17:53:52 serg@serg.mylan +0 -0
    Auto merged

  sql/sql_acl.cc
    1.162.3.1 05/06/03 17:53:51 serg@serg.mylan +0 -0
    Auto merged

  sql/mysql_priv.h
    1.347.1.1 05/06/03 17:53:50 serg@serg.mylan +0 -0
    Auto merged

  sql/lock.cc
    1.56.1.1 05/06/03 17:53:50 serg@serg.mylan +0 -0
    Auto merged

  scripts/make_binary_distribution.sh
    1.75.1.1 05/06/03 17:53:50 serg@serg.mylan +0 -0
    Auto merged

  configure.in
    1.374.1.1 05/06/03 17:53:49 serg@serg.mylan +0 -0
    Auto merged

  BitKeeper/etc/logging_ok
    1.394.1.1 05/06/03 17:53:01 serg@serg.mylan +0 -1
    auto-union

ChangeSet
  1.1346.836.1 05/06/03 17:13:43 mronstrom@mysql.com +4 -0
  Bug #10901
  Analyze table corrupts the state on
  data_file_length, records, index_file_length...
  by writing the shared state when there is an updated internal
  state due to inserts or deletes
  Fixed by synching the shared state with the internal state before
  writing it to disk
  Added test cases of 2 error cases and a normal case in new
  analyze test case

  BitKeeper/etc/logging_ok
    1.206.41.1 05/06/03 17:13:43 mronstrom@mysql.com +1 -0
    Logging to logging@openlogging.org accepted

  mysql-test/t/analyze.test
    1.2 05/06/03 17:13:16 mronstrom@mysql.com +2 -13
    Bug #10901
    Analyze table corrupts the state on
    data_file_length, records, index_file_length...
    by writing the shared state when there is an updated internal
    state due to inserts or deletes
    Fixed by synching the shared state with the internal state before
    writing it to disk
    Added test cases of 2 error cases and a normal case in new
    analyze test case

  myisam/mi_check.c
    1.86.1.48 05/06/03 17:13:16 mronstrom@mysql.com +6 -0
    Bug #10901
    Analyze table corrupts the state on
    data_file_length, records, index_file_length...
    by writing the shared state when there is an updated internal
    state due to inserts or deletes
    Fixed by synching the shared state with the internal state before
    writing it to disk
    Added test cases of 2 error cases and a normal case in new
    analyze test case

  mysql-test/r/analyze.result
    1.1 05/06/03 16:36:38 mronstrom@mysql.com +32 -0

  mysql-test/r/analyze.result
    1.0 05/06/03 16:36:38 mronstrom@mysql.com +0 -0
    BitKeeper file /Users/mikron/bug10901/mysql-test/r/analyze.result

  mysql-test/t/analyze.test
    1.1 05/06/03 16:23:59 mronstrom@mysql.com +50 -0

  mysql-test/t/analyze.test
    1.0 05/06/03 16:23:58 mronstrom@mysql.com +0 -0
    BitKeeper file /Users/mikron/bug10901/mysql-test/t/analyze.test

ChangeSet
  1.1346.835.1 05/06/03 15:05:18 serg@serg.mylan +1 -0
  *don't* mess with kernel defines, boy.
  and HAVE_ATOMIC_ADD/HAVE_ATOMIC_SUB is tested in configure

  include/my_global.h
    1.34.1.37 05/06/03 15:05:06 serg@serg.mylan +7 -18
    *don't* mess with kernel defines, boy.
    and HAVE_ATOMIC_ADD/HAVE_ATOMIC_SUB is tested in configure

ChangeSet
  1.2260.52.3 05/06/03 11:21:43 hartmut@mysql.com +1 -0
      check-cpu fixes/improvements (Bug #11065)
      
      - support additional platforms (OpenBSD, Darwin)
      - make use of /proc/cpuinfo CPU flag information
        (needed to distinguish EMT64 Xeons from normal ones)
      - chose the right CPU related options depending on 
        GCC version and target architecture
      - check if the chosen CPU type is actually supported
        by the GCC version , fallback to CPUs predecessor
        until test compile succeeds

  BUILD/check-cpu
    1.10 05/06/03 11:21:36 hartmut@mysql.com +126 -42
        check-cpu fixes/improvements (Bug #11065)
        
        - support additional platforms (OpenBSD, Darwin)
        - make use of /proc/cpuinfo CPU flag information
          (needed to distinguish EMT64 Xeons from normal ones)
        - chose the right CPU related options depending on 
          GCC version and target architecture
        - check if the chosen CPU type is actually supported
          by the GCC version , fallback to CPUs predecessor
          until test compile succeeds

ChangeSet
  1.1346.1.767 05/06/03 11:16:37 ndbdev@dl145b.mysql.com +2 -0
  sql_repl.cc:
    Bug #11064  	some read error not detected in replication on 64-bit platform

  BitKeeper/etc/logging_ok
    1.206.36.6 05/06/03 11:16:37 ndbdev@dl145b.mysql.com +1 -0
    Logging to logging@openlogging.org accepted

  sql/sql_repl.cc
    1.86.1.32 05/06/03 11:15:55 ndbdev@dl145b.mysql.com +1 -1
    Bug #11064  	some read error not detected in replication on 64-bit platform

ChangeSet
  1.2260.52.2 05/06/03 10:30:58 hartmut@mysql.com +1 -0
  bundle the check-cpu helper script with source packages.
  BUG#10696

  BUILD/Makefile.am
    1.6 05/06/03 10:30:50 hartmut@mysql.com +1 -0
    bundle the check-cpu helper script with source packages.
    BUG#10696

ChangeSet
  1.2260.52.1 05/06/03 09:37:53 bar@mysql.com +3 -0
  ctype_utf8.result, ctype_utf8.test:
    adding test
  field.cc:
    bug#10714 Inserting double value into utf8 column crashes server:
    sprintf was executed with too big length, which caused
    crash on some Windows platforms.

  mysql-test/r/ctype_utf8.result
    1.53 05/06/03 09:36:45 bar@mysql.com +3 -0
    adding test

  mysql-test/t/ctype_utf8.test
    1.53 05/06/03 09:36:38 bar@mysql.com +7 -0
    adding test

  sql/field.cc
    1.218 05/06/03 09:35:09 bar@mysql.com +8 -7
    bug#10714 Inserting double value into utf8 column crashes server
    sprintf was executed with too long length, which cau
    crashe on Windows.

ChangeSet
  1.2260.1.48 05/06/03 01:16:29 monty@mysql.com +1 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/home/my/mysql-4.1

  sql/sql_parse.cc
    1.439 05/06/03 01:16:27 monty@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.51.1 05/06/03 01:15:56 monty@mysql.com +2 -0
  Removed duplicated and wrong merged code

  sql/sql_parse.cc
    1.437.1.1 05/06/03 01:15:53 monty@mysql.com +0 -13
    Removed duplicated and wrong merged code

  sql/sql_base.cc
    1.250 05/06/03 01:15:53 monty@mysql.com +1 -1
    Fixed wrong comment

ChangeSet
  1.2260.50.1 05/06/02 21:14:14 tulin@dl145b.mysql.com +1 -0
  CommandInterpreter.cpp:
    Bug #11050  	ndb_mgm "show" prints incorrectly after master data node fails

  ndb/src/mgmclient/CommandInterpreter.cpp
    1.47 05/06/02 21:13:56 tulin@dl145b.mysql.com +2 -1
    Bug #11050  	ndb_mgm "show" prints incorrectly after master data node fails

ChangeSet
  1.2260.1.46 05/06/02 11:12:58 reggie@monster. +2 -0
  fixed compile problem by replacing W_OK with F_OK

  BitKeeper/etc/logging_ok
    1.395 05/06/02 11:12:57 reggie@monster. +1 -0
    Logging to logging@openlogging.org accepted

  mysys/my_access.c
    1.3 05/06/02 11:12:51 reggie@monster. +1 -1
    fixed compile problem by replacing W_OK with F_OK

ChangeSet
  1.2260.1.45 05/06/02 16:17:44 bar@mysql.com +4 -0
  item_func.cc:
  set_var.cc:
  variables.result
  variables.test
  
    Bug #10904 Illegal mix of collations between a system variable and a constant
    Changing coercibility of system variables to SYSCONST,
    to be the same with USER(), DATABASE(), etc.

  mysql-test/t/variables.test
    1.47 05/06/02 16:16:37 bar@mysql.com +7 -0

  mysql-test/r/variables.result
    1.59 05/06/02 16:16:36 bar@mysql.com +6 -0

  sql/set_var.cc
    1.167 05/06/02 16:16:31 bar@mysql.com +2 -1

  sql/item_func.cc
    1.249 05/06/02 16:14:55 bar@mysql.com +1 -1
    Bug #10904 Illegal mix of collations between a system variable and a constant
    Changing coercibility of system variables to SYSCONST
    To be the same with USER(), DATABASE(), etc.

ChangeSet
  1.2260.45.9 05/06/01 18:48:29 brian@zim.(none) +10 -0
  Merge

  sql/sql_repl.cc
    1.135 05/06/01 18:48:29 brian@zim.(none) +0 -0
    SCCS merged

  sql/sql_select.cc
    1.405 05/06/01 18:44:53 brian@zim.(none) +0 -0
    Auto merged

  sql/examples/ha_tina.cc
    1.5 05/06/01 18:44:53 brian@zim.(none) +0 -0
    Auto merged

  sql/examples/ha_example.cc
    1.10 05/06/01 18:44:53 brian@zim.(none) +0 -0
    Auto merged

  sql/examples/ha_archive.cc
    1.24 05/06/01 18:44:53 brian@zim.(none) +0 -0
    Auto merged

  sql/sql_parse.cc
    1.438 05/06/01 18:44:52 brian@zim.(none) +0 -0
    Auto merged

  sql/sql_insert.cc
    1.164 05/06/01 18:44:52 brian@zim.(none) +0 -0
    Auto merged

  sql/sql_acl.cc
    1.162.1.2 05/06/01 18:44:52 brian@zim.(none) +0 -0
    Auto merged

  sql/item_subselect.cc
    1.134 05/06/01 18:44:52 brian@zim.(none) +0 -0
    Auto merged

  sql/ha_heap.cc
    1.54 05/06/01 18:44:52 brian@zim.(none) +0 -0
    Auto merged

ChangeSet
  1.2260.45.8 05/06/02 02:57:18 kent@mysql.com +1 -0
  Merge kboortz@bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/Users/kent/mysql/bk/mysql-4.1

  sql/item_func.cc
    1.248 05/06/02 02:57:14 kent@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.49.1 05/06/02 02:43:32 kent@mysql.com +42 -0
  tztime.cc:
    Set #pragma implementation" earlier
  Many files:
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/tztime.cc
    1.19 05/06/02 02:40:48 kent@mysql.com +4 -3
    Set #pragma implementation" earlier

ChangeSet
  1.2260.48.1 05/06/01 17:34:10 brian@zim.(none) +15 -0
  Mainly cleanups for gcc 4.0. Some small pieces from looking at -Wall. Removed a number of dumb things in ha_tina.

  sql/sql_select.cc
    1.400.1.1 05/06/01 17:34:07 brian@zim.(none) +2 -2
    Cleanedup for gcc 4.0

  sql/sql_repl.cc
    1.133.1.1 05/06/01 17:34:07 brian@zim.(none) +0 -1
    Removed unused variable

  sql/sql_parse.cc
    1.435.2.1 05/06/01 17:34:07 brian@zim.(none) +0 -2
    Cleanedup for gcc 4.0

  sql/sql_insert.cc
    1.162.1.1 05/06/01 17:34:07 brian@zim.(none) +1 -1
    Cleanedup for gcc 4.0

  sql/sql_acl.cc
    1.162.2.1 05/06/01 17:34:07 brian@zim.(none) +5 -5
    Cleanup for gcc 4.0

  sql/slave.cc
    1.269 05/06/01 17:34:07 brian@zim.(none) +1 -1
    Cleanup for gcc 4.0

  sql/repl_failsafe.cc
    1.61 05/06/01 17:34:07 brian@zim.(none) +1 -1
    Cleanup for gcc 4.0

  sql/opt_range.h
    1.38 05/06/01 17:34:07 brian@zim.(none) +1 -1
    Cleanup for gcc 4.0

  sql/mysqld.cc
    1.572 05/06/01 17:34:07 brian@zim.(none) +1 -7
    Cleanup of unused function and gcc 4.0 bit. 

  sql/item_subselect.cc
    1.131.1.1 05/06/01 17:34:07 brian@zim.(none) +0 -3
    Removed unused label.

  sql/ha_heap.cc
    1.51.1.1 05/06/01 17:34:07 brian@zim.(none) +0 -1
    Removed unused variable (-Wall find)

  sql/examples/ha_tina.cc
    1.3.1.1 05/06/01 17:34:07 brian@zim.(none) +12 -25
    Bunch of cleanups (many of which were quite dumb of me... and I have no earthly idea how they missed everyone's notice). 

  sql/examples/ha_example.cc
    1.8.1.1 05/06/01 17:34:07 brian@zim.(none) +1 -3
    Noticed that the error call was not quite right. 

  sql/examples/ha_archive.cc
    1.22.1.1 05/06/01 17:34:07 brian@zim.(none) +3 -4
    Bunch of little cleanups from -Wall and gcc 4.0 fixes

  client/mysqladmin.cc
    1.105 05/06/01 17:34:07 brian@zim.(none) +1 -1
    gcc 4.0 fix

  sql/examples/ha_tina.cc
    1.4 05/06/02 02:23:56 kent@mysql.com +3 -1
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/examples/ha_example.cc
    1.9 05/06/02 02:23:56 kent@mysql.com +3 -1
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/tztime.cc
    1.18 05/06/02 02:23:55 kent@mysql.com +5 -4
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_udf.cc
    1.47 05/06/02 02:23:55 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_string.cc
    1.91 05/06/02 02:23:55 kent@mysql.com +2 -1
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_select.cc
    1.404 05/06/02 02:23:55 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/examples/ha_archive.cc
    1.23 05/06/02 02:23:55 kent@mysql.com +3 -1
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_olap.cc
    1.14 05/06/02 02:23:54 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_map.cc
    1.6 05/06/02 02:23:54 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_list.cc
    1.8 05/06/02 02:23:54 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_crypt.cc
    1.8 05/06/02 02:23:54 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_class.cc
    1.197 05/06/02 02:23:54 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/sql_analyse.cc
    1.50 05/06/02 02:23:53 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/set_var.cc
    1.166 05/06/02 02:23:53 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/protocol_cursor.cc
    1.5 05/06/02 02:23:53 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/protocol.cc
    1.102 05/06/02 02:23:53 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/procedure.cc
    1.7 05/06/02 02:23:53 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/opt_range.cc
    1.136 05/06/02 02:23:53 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/log_event.cc
    1.179 05/06/02 02:23:52 kent@mysql.com +3 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_uniq.cc
    1.7 05/06/02 02:23:52 kent@mysql.com +3 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_timefunc.cc
    1.87 05/06/02 02:23:52 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_sum.cc
    1.137 05/06/02 02:23:52 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_subselect.cc
    1.133 05/06/02 02:23:52 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_strfunc.cc
    1.224 05/06/02 02:23:51 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_geofunc.cc
    1.21 05/06/02 02:23:51 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_func.cc
    1.245.1.1 05/06/02 02:23:51 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item_cmpfunc.cc
    1.187 05/06/02 02:23:51 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/item.cc
    1.206 05/06/02 02:23:50 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/hash_filo.cc
    1.6 05/06/02 02:23:50 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/handler.cc
    1.165 05/06/02 02:23:50 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_ndbcluster.cc
    1.154 05/06/02 02:23:50 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_myisammrg.cc
    1.60 05/06/02 02:23:50 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_myisam.cc
    1.157 05/06/02 02:23:50 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_isammrg.cc
    1.18 05/06/02 02:23:49 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_isam.cc
    1.32 05/06/02 02:23:49 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_innodb.cc
    1.199 05/06/02 02:23:49 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_heap.cc
    1.53 05/06/02 02:23:49 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_blackhole.cc
    1.6 05/06/02 02:23:49 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/ha_berkeley.cc
    1.150 05/06/02 02:23:48 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  sql/field.cc
    1.217 05/06/02 02:23:48 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  mysys/raid.cc
    1.33 05/06/02 02:23:48 kent@mysql.com +2 -0
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

  client/sql_string.cc
    1.22 05/06/02 02:23:48 kent@mysql.com +2 -1
    Need to include <my_global.h> before #ifdef USE_PRAGMA_IMPLEMENTATION

ChangeSet
  1.2260.45.7 05/06/01 16:16:25 jimw@mysql.com +1 -0
  Fix --with-bdb to be --with-berkeley-db in BUILD/SETUP.sh

  BUILD/SETUP.sh
    1.34 05/06/01 16:15:29 jimw@mysql.com +2 -2
    Fix --with-bdb to --with-berkeley-db

ChangeSet
  1.2260.45.6 05/06/01 16:03:41 jimw@mysql.com +1 -0
  Fix compile error when HAVE_BERKELEY_DB

  sql/sql_table.cc
    1.285 05/06/01 16:03:12 jimw@mysql.com +1 -1
    Add missing argument

ChangeSet
  1.2260.45.5 05/06/01 14:35:02 jimw@mysql.com +1 -0
  Update results of test after merge of bugfix

  mysql-test/r/rpl_failed_optimize.result
    1.2 05/06/01 14:33:40 jimw@mysql.com +1 -0
    Update results

ChangeSet
  1.2260.45.3 05/06/01 13:02:26 jimw@mysql.com +1 -0
  Merge mysql.com:/home/jimw/my/mysql-4.1-9660
  into  mysql.com:/home/jimw/my/mysql-4.1-clean

  sql/sql_table.cc
    1.284 05/06/01 13:02:23 jimw@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.47.1 05/06/01 12:59:11 jimw@mysql.com +1 -0
  Merge mysql.com:/home/jimw/my/mysql-4.1-8135
  into  mysql.com:/home/jimw/my/mysql-4.1-clean

  sql/sql_table.cc
    1.283 05/06/01 12:59:08 jimw@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.46.1 05/06/01 11:30:59 jimw@mysql.com +1 -0
  Fix hashcmp() to handle special case of zero length, which
  resulted in the hostname cache being ineffective. Based on
  patch from Jeremy Cole of Yahoo! (Bug #10931)

  mysys/hash.c
    1.43 05/06/01 11:30:56 jimw@mysql.com +20 -2
    Fix hashcmp() to handle length == 0 as in 4.0, and document the
    function, including this special case.

ChangeSet
  1.2260.45.1 05/06/01 09:48:25 jimw@mysql.com +3 -0
  Fix handling of NULL fields in FIELD(). (Bug #10944)

  sql/item_func.cc
    1.247 05/06/01 09:48:22 jimw@mysql.com +4 -0
    Handle NULL as first argument to FIELD()

  mysql-test/t/func_str.test
    1.72 05/06/01 09:48:22 jimw@mysql.com +6 -0
    Add regression tests

  mysql-test/r/func_str.result
    1.91 05/06/01 09:48:22 jimw@mysql.com +6 -0
    Update results

  sql/item_func.cc
    1.246 05/06/01 09:20:32 jimw@mysql.com +4 -4
    Fix handling of NULL arguments to FIELD()

ChangeSet
  1.2260.41.2 05/06/01 15:52:32 lars@mysql.com +4 -0
  BUG#6883: Added tests for create/drop temporary table, UNLOCK TABLES
  If a create table can not do implicit commit, the stmt now fails
  CREATE/DROP TEMPORARY TABLE is now flushed to binlog

  sql/sql_parse.cc
    1.435.1.2 05/06/01 15:52:00 lars@mysql.com +16 -4
    If A CREATE TABLE fails to do implicit commit, then the stmt now fails (DROP works in same way)
    CREATE/DROP TEMOPORARY TABLE is now flushed to binlog

  mysql-test/t/rpl_ddl.test
    1.2 05/06/01 15:52:00 lars@mysql.com +188 -112
    Added tests for create/drop temporary table
    Added tests for different types of locks in UNLOCK TABLES
    Cleared up code/documentation

  mysql-test/r/rpl_ddl.result
    1.2 05/06/01 15:52:00 lars@mysql.com +760 -492
    New results

  mysql-test/include/rpl_stmt_seq.inc
    1.2 05/06/01 15:52:00 lars@mysql.com +33 -8
    Documentation, cleared up code

ChangeSet
  1.2260.43.4 05/06/01 14:20:16 ingo@mysql.com +1 -0
  Bug#10602 - LOAD INDEX INTO CACHE deadlocks
  Fixed two deadlocks.
  Made minor changes.

  mysys/mf_keycache.c
    1.50 05/06/01 14:19:25 ingo@mysql.com +91 -30
    Bug#10602 - LOAD INDEX INTO CACHE deadlocks
    Fixed two deadlocks.
    Made keycache traces line buffered.
    Removed unused macro and function.
    Added comments and trace messages.
    Fixed two compiler warnings.
    Fixed some coding style issues.

ChangeSet
  1.2260.1.42 05/06/01 13:06:15 lenz@mysql.com +2 -0
  Merge mysql.com:/space/my/mysql-4.0 into mysql.com:/space/my/mysql-4.1

  scripts/make_binary_distribution.sh
    1.76 05/06/01 13:06:14 lenz@mysql.com +0 -0
    Auto merged

  configure.in
    1.376 05/06/01 13:06:14 lenz@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2274 05/06/01 13:05:41 joreland@mysql.com +1 -0
  ndb - fix broken ndb_alter_table
    reinit AI len after preparing interpreted

  ndb/src/ndbapi/NdbOperationExec.cpp
    1.17 05/06/01 13:05:39 joreland@mysql.com +1 -0
    reinit AI len after preparing interpreted

ChangeSet
  1.1346.1.766 05/06/01 12:59:10 lenz@mysql.com +3 -0
  - removed references to some obsolete files (BUG#10824)
  - removed obsolete mysql-max.spec.sc RPM spec file (Max is built out of the standard
    spec file)

  scripts/make_binary_distribution.sh
    1.49.1.11 05/06/01 12:59:07 lenz@mysql.com +0 -3
    - removed references to some obsolete files

  configure.in
    1.191.1.136 05/06/01 12:59:07 lenz@mysql.com +1 -7
    - removed references to some obsolete files

  BitKeeper/deleted/.del-mysql-max.spec.sh~ca055d86585c1010
    1.10 05/06/01 12:54:37 lenz@mysql.com +0 -0
    Delete: support-files/mysql-max.spec.sh

ChangeSet
  1.2260.43.3 05/05/31 20:55:42 ingo@mysql.com +2 -0
  Merge

  mysql-test/t/create.test
    1.51 05/05/31 20:55:42 ingo@mysql.com +0 -0
    SCCS merged

  mysql-test/r/create.result
    1.79 05/05/31 20:55:42 ingo@mysql.com +0 -0
    SCCS merged

ChangeSet
  1.2260.43.2 05/05/31 20:45:41 ingo@mysql.com +2 -0
  Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
  After merge fix.

  mysql-test/t/create.test
    1.49.1.2 05/05/31 20:44:48 ingo@mysql.com +2 -0
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    After merge fix.

  mysql-test/r/create.result
    1.77.1.2 05/05/31 20:44:48 ingo@mysql.com +3 -2
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    After merge fix.

ChangeSet
  1.2260.43.1 05/05/31 19:37:24 ingo@mysql.com +10 -0
  Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
  Hand merged from 4.0.

  sql/sql_parse.cc
    1.437 05/05/31 19:37:20 ingo@mysql.com +14 -18
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Hand merged from 4.0.

  sql/sql_insert.cc
    1.163 05/05/31 19:37:20 ingo@mysql.com +7 -13
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Hand merged from 4.0.

  sql/sql_base.cc
    1.249 05/05/31 19:37:20 ingo@mysql.com +1 -2
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Hand merged from 4.0.

  mysql-test/t/create.test
    1.49.1.1 05/05/31 19:37:20 ingo@mysql.com +15 -15
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Hand merged from 4.0.

  mysql-test/r/create.result
    1.77.1.1 05/05/31 19:37:20 ingo@mysql.com +8 -8
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Hand merged from 4.0.

  sql/sql_table.cc
    1.281.2.1 05/05/31 19:24:14 ingo@mysql.com +0 -0
    Auto merged

  sql/sql_handler.cc
    1.60 05/05/31 19:24:13 ingo@mysql.com +0 -0
    Auto merged

  sql/sql_acl.cc
    1.162.1.1 05/05/31 19:24:13 ingo@mysql.com +0 -0
    Auto merged

  sql/mysql_priv.h
    1.348 05/05/31 19:24:13 ingo@mysql.com +0 -0
    Auto merged

  sql/lock.cc
    1.57 05/05/31 19:24:13 ingo@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.42.1 05/05/31 18:06:54 acurtis@xiphis.org +3 -0
  Bug#10413 - Invalid column name is not rejected
    Stop ignoring name parts and check for validity

  sql/sql_yacc.yy
    1.385 05/05/31 18:06:44 acurtis@xiphis.org +25 -1
    Bug#10413
      Stop ignoring parts of fully qualified names.

  mysql-test/t/create.test
    1.50 05/05/31 18:06:44 acurtis@xiphis.org +13 -0
    Test for bug#10413

  mysql-test/r/create.result
    1.78 05/05/31 18:06:44 acurtis@xiphis.org +9 -0
    Test for bug#10413

ChangeSet
  1.2260.37.10 05/05/31 07:21:10 reggie@mdk10.(none) +1 -0
  BUG# 10181-mysqld.exe crash with an access vioation after INSERT INTO mysql.host
  
  this is a followup cset after changes suggested by Serg.

  sql/sql_acl.cc
    1.164 05/05/31 07:21:03 reggie@mdk10.(none) +4 -4
    removed extra parameters used in sql_print_warning
    added code to output "" when host.db is null in the top sql_print_warning call

ChangeSet
  1.1346.1.765 05/05/31 11:08:14 ingo@mysql.com +10 -0
  Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
  1.) Added a new option to mysql_lock_tables() for ignoring FLUSH TABLES.
  Used the new option in create_table_from_items().
  It is necessary to prevent the SELECT table from being reopend.
  It would get new storage assigned for its fields, while the
  SELECT part of the command would still use the old (freed) storage.
  2.) Protected the CREATE TABLE and CREATE TABLE ... SELECT commands
  against a global read lock. This prevents a deadlock in
  CREATE TABLE ... SELECT in conjunction with FLUSH TABLES WITH READ LOCK
  and avoids the creation of new tables during a global read lock.
  3.) Replaced set_protect_against_global_read_lock() and
  unset_protect_against_global_read_lock() by
  wait_if_global_read_lock() and start_waiting_global_read_lock()
  in the INSERT DELAYED handling.

  sql/sql_table.cc
    1.112.16.4 05/05/31 11:08:12 ingo@mysql.com +1 -1
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Adjusted mysql_lock_tables() calls to the new argument list.
    Used the new option in create_table_from_items().

  sql/sql_parse.cc
    1.218.44.4 05/05/31 11:08:12 ingo@mysql.com +34 -3
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Protected the CREATE TABLE and CREATE TABLE ... SELECT commands
    against a global read lock. This prevents a deadlock in
    CREATE TABLE ... SELECT in conjunction with FLUSH TABLES WITH READ LOCK
    and avoids the creation of new tables during a global read lock.

  sql/sql_insert.cc
    1.63.1.55 05/05/31 11:08:12 ingo@mysql.com +18 -6
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Replaced set_protect_against_global_read_lock() and
    unset_protect_against_global_read_lock() by
    wait_if_global_read_lock() and start_waiting_global_read_lock()
    in the INSERT DELAYED handling.
    Adjusted mysql_lock_tables() calls to the new argument list.

  sql/sql_handler.cc
    1.19.1.27 05/05/31 11:08:12 ingo@mysql.com +1 -1
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Adjusted mysql_lock_tables() calls to the new argument list.

  sql/sql_base.cc
    1.117.1.71 05/05/31 11:08:12 ingo@mysql.com +3 -3
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Adjusted mysql_lock_tables() calls to the new argument list.

  sql/sql_acl.cc
    1.51.1.84 05/05/31 11:08:12 ingo@mysql.com +2 -2
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Adjusted mysql_lock_tables() calls to the new argument list.

  sql/mysql_priv.h
    1.150.1.83 05/05/31 11:08:12 ingo@mysql.com +5 -2
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Changed the declaration of mysql_lock_tables().
    Added definitions for the new options.

  sql/lock.cc
    1.38.1.13 05/05/31 11:08:12 ingo@mysql.com +21 -48
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Added a new option to mysql_lock_tables() for ignoring FLUSH TABLES.
    Changed the parameter list.
    Removed two unnecessary functions. Their functionality is included in
    wait_if_global_read_lock() and start_waiting_global_read_lock().

  mysql-test/t/create.test
    1.11.1.11 05/05/31 11:08:12 ingo@mysql.com +15 -0
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Added tests which do not require concurrency.

  mysql-test/r/create.result
    1.12.1.13 05/05/31 11:08:12 ingo@mysql.com +8 -0
    Bug#10224 - ANALYZE TABLE crashing with simultaneous CREATE ... SELECT statement.
    Added test results.

ChangeSet
  1.2260.37.8 05/05/31 10:54:33 ramil@mysql.com +3 -0
  a fix (bug #7405: group_concat with distinct and rollup => ignores distinct in some rows).

  sql/item_sum.cc
    1.136 05/05/31 10:54:29 ramil@mysql.com +14 -29
    a fix (bug #7405: group_concat with distinct and rollup => ignores distinct in some rows).
    Code changed in order to work with rollup extension.

  mysql-test/t/func_gconcat.test
    1.26 05/05/31 10:54:28 ramil@mysql.com +12 -0
    a fix (bug #7405: group_concat with distinct and rollup => ignores distinct in some rows).

  mysql-test/r/func_gconcat.result
    1.35 05/05/31 10:54:28 ramil@mysql.com +23 -0
    a fix (bug #7405: group_concat with distinct and rollup => ignores distinct in some rows).

ChangeSet
  1.2260.37.7 05/05/30 05:25:12 igor@rurik.mysql.com +1 -0
  sql_select.cc:
    Post-review modifications for the fix of bug #7894.

  sql/sql_select.cc
    1.403 05/05/30 05:23:59 igor@rurik.mysql.com +6 -9
    Post-review modifications for the fix of bug #7894.

ChangeSet
  1.2273 05/05/30 14:17:58 joreland@mysql.com +1 -0
  bug#10956 - ndb - more than 7 NR --initial yields cluster failure
    a node wo/ filesystem don't have any crashed replicas
    reset noCrashedReplicas in invalidate_node_lcp

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp
    1.22 05/05/30 14:17:55 joreland@mysql.com +1 -0
    a node wo/ filesystem don't have any crashed replicas

ChangeSet
  1.2260.37.6 05/05/30 03:01:51 igor@rurik.mysql.com +3 -0
  olap.result, olap.test:
    Added test cases for bug #7894.
  sql_select.cc:
    Fixed bug #7894: GROUP BY queries with ROLLUP returned
    wrong results for expressions containing group by columns.
    The fix ensured correct results by replacement of all
    occurrences of group by fields in non-aggregate expressions
    for corresponding ref objects and preventing creation of
    fields in temporary tables for expression containing group
    by fields.

  mysql-test/r/olap.result
    1.18 05/05/30 02:59:49 igor@rurik.mysql.com +67 -1
    Added test cases for bug #7894.

  mysql-test/t/olap.test
    1.15 05/05/30 02:59:23 igor@rurik.mysql.com +30 -0
    Added test cases for bug #7894.

ChangeSet
  1.2272 05/05/30 11:55:47 joreland@mysql.com +2 -0
  bug#10953 - ndb - scan read wo/ getvalue cause NF (during NR)

  ndb/test/run-test/ndb-autotest.sh
    1.13 05/05/30 11:55:43 joreland@mysql.com +1 -1
    fix vars

  ndb/src/kernel/blocks/dbtup/DbtupBuffer.cpp
    1.7 05/05/30 11:55:43 joreland@mysql.com +3 -0
    Don't send 0 length transid_ai

  sql/sql_select.cc
    1.402 05/05/30 02:46:02 igor@rurik.mysql.com +90 -5
    Fixed bug #7894: GROUP BY queries with ROLLUP returned
    wrong results for expressions containing group by columns.
    The fix ensured correct results by replacement of all
    occurrences of group by fields in non-aggregate expressions
    for corresponding ref objects and preventing creation of
    fields in temporary tables for expression containing group
    by fields.

ChangeSet
  1.2260.37.5 05/05/27 14:15:08 serg@serg.mylan +1 -0
  forgotten s/__GNUC__/USE_PRAGMA_INTERFACE/ causes compilation faliures

  sql/hash_filo.h
    1.11 05/05/27 14:14:57 serg@serg.mylan +1 -1
    forgotten s/__GNUC__/USE_PRAGMA_INTERFACE/ causes compilation faliures

ChangeSet
  1.2260.37.4 05/05/27 12:48:36 serg@serg.mylan +1 -0
  Merge serg@bk-internal.mysql.com:/home/bk/mysql-4.1/
  into serg.mylan:/usr/home/serg/Abk/mysql-4.1

  sql/ha_innodb.cc
    1.198 05/05/27 12:48:24 serg@serg.mylan +0 -0
    Auto merged

ChangeSet
  1.2260.29.3 05/05/27 12:38:29 serg@serg.mylan +1 -0
  don't downgrade the lock for CREATE ... SELECT (bug#6678)

  sql/ha_innodb.cc
    1.196.1.1 05/05/27 12:38:22 serg@serg.mylan +2 -1
    don't downgrade the lock for CREATE ... SELECT (bug#6678)

ChangeSet
  1.2260.1.37 05/05/27 09:52:03 lenz@mysql.com +1 -0
  Merge lgrimmer@bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/space/my/mysql-4.1

  sql/ha_myisammrg.cc
    1.59 05/05/27 09:52:01 lenz@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.41.1 05/05/27 04:17:33 lars@mysql.com +7 -0
  BUG#6883: Added implicit commit for CREATE TABLE, TRUNCATE TABLE and DROP/CREATE DATABASE

  mysql-test/t/rpl_ddl.test
    1.1 05/05/27 04:17:27 lars@mysql.com +268 -0

  mysql-test/r/rpl_ddl.result
    1.1 05/05/27 04:17:27 lars@mysql.com +1394 -0

  mysql-test/t/rpl_ddl.test
    1.0 05/05/27 04:17:27 lars@mysql.com +0 -0
    BitKeeper file /home/bk/b6883-mysql-4.1/mysql-test/t/rpl_ddl.test

  mysql-test/r/rpl_ddl.result
    1.0 05/05/27 04:17:27 lars@mysql.com +0 -0
    BitKeeper file /home/bk/b6883-mysql-4.1/mysql-test/r/rpl_ddl.result

  mysql-test/include/rpl_stmt_seq.inc
    1.1 05/05/27 04:17:26 lars@mysql.com +155 -0

  sql/sql_parse.cc
    1.435.1.1 05/05/27 04:17:26 lars@mysql.com +20 -0
    Added implicit commit for temp table CREATE TABLE, TRUNCATE TABLE, CREATE/DROP DATABASE.

  mysql-test/t/innodb.test
    1.69 05/05/27 04:17:26 lars@mysql.com +0 -1
    Truncate table now succeed even if there is an open transaction

  mysql-test/r/innodb_cache.result
    1.12 05/05/27 04:17:26 lars@mysql.com +1 -1
    One query in cache

  mysql-test/r/innodb.result
    1.100 05/05/27 04:17:26 lars@mysql.com +3 -4
    Truncate table now work even if there is open trx

  mysql-test/include/rpl_stmt_seq.inc
    1.0 05/05/27 04:17:26 lars@mysql.com +0 -0
    BitKeeper file /home/bk/b6883-mysql-4.1/mysql-test/include/rpl_stmt_seq.inc

ChangeSet
  1.2271 05/05/26 22:48:28 joreland@mysql.com +1 -0
  ndb - add test case for bug ReadWithoutGetValue

  ndb/test/run-test/daily-basic-tests.txt
    1.19 05/05/26 22:48:23 joreland@mysql.com +4 -0
    add test case for bug fix

ChangeSet
  1.2270 05/05/26 22:04:50 joreland@mysql.com +2 -0
  bug#10669 - ndb read wo/ get value
    add dummy getvalue

  ndb/test/ndbapi/testNdbApi.cpp
    1.11 05/05/26 22:04:47 joreland@mysql.com +48 -16
    Test scans as well

  ndb/src/ndbapi/NdbOperationExec.cpp
    1.16 05/05/26 22:04:47 joreland@mysql.com +10 -5
    Add dummy get value of NDB$FRAGMENT if
      dirty read wo/ get values

ChangeSet
  1.2260.38.4 05/05/26 14:02:18 reggie@mdk10.(none) +1 -0
  Bug #10181 mysqld.exe crash with an access violation after INSERT INTO mysql.host 
  
  sql_acl.cc:
    Make sure host.db is a valid string pointer before we do our lower_case_table_names comparison

  sql/sql_acl.cc
    1.163 05/05/26 14:01:18 reggie@mdk10.(none) +1 -1
    Make sure host.db is a valid string pointer before we do our lower_case_table_names comparison

ChangeSet
  1.2260.37.3 05/05/26 20:02:21 msvensson@neptunus.(none) +1 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into neptunus.(none):/home/msvensson/mysql/mysql-4.1

  sql/item.cc
    1.205 05/05/26 20:02:19 msvensson@neptunus.(none) +0 -0
    Auto merged

ChangeSet
  1.2260.36.2 05/05/26 10:01:26 jimw@mysql.com +1 -0
  Cleanups to patch for bug #9660 after review by Monty.

  sql/sql_table.cc
    1.281.1.2 05/05/26 09:51:05 jimw@mysql.com +10 -9
    Make return value of build_table_path() useful
    Eliminate some unnecessary casts

ChangeSet
  1.2260.38.2 05/05/26 18:33:57 bell@sanja.is.com.ua +3 -0
  merge

  mysql-test/t/union.test
    1.85 05/05/26 18:33:54 bell@sanja.is.com.ua +0 -1
    merge

  mysql-test/r/union.result
    1.91 05/05/26 18:33:54 bell@sanja.is.com.ua +0 -0
    merge

  sql/item.cc
    1.203.1.1 05/05/26 18:26:59 bell@sanja.is.com.ua +0 -0
    Auto merged

ChangeSet
  1.2260.39.1 05/05/26 17:30:12 bell@sanja.is.com.ua +3 -0
  fixed problem with long string results of expressions in UNIONS (BUG#10025)

  sql/item.cc
    1.202.2.1 05/05/26 17:30:09 bell@sanja.is.com.ua +2 -2
    set HA_OPTION_PACK_RECORD and change type to MYSQL_TYPE_STRING, to allow correct field creation in case of length more then 255 (creation STRING field with length more then 255)

  mysql-test/t/union.test
    1.83.1.1 05/05/26 17:30:09 bell@sanja.is.com.ua +11 -0
    test for Bug #10025

  mysql-test/r/union.result
    1.89.1.1 05/05/26 17:30:09 bell@sanja.is.com.ua +14 -0
    test for Bug #10025

ChangeSet
  1.2260.38.1 05/05/26 15:57:24 marko@hundin.mysql.fi +1 -0
  Merge hundin.mysql.fi:/home/marko/k/mysql-4.0
  into hundin.mysql.fi:/home/marko/mysql-4.1

  innobase/row/row0mysql.c
    1.92 05/05/26 15:57:15 marko@hundin.mysql.fi +0 -0
    Auto merged

ChangeSet
  1.1346.834.1 05/05/26 15:42:24 marko@hundin.mysql.fi +1 -0
  InnoDB: Check all referencing tables in DROP DATABASE (Bug #10335).

  innobase/row/row0mysql.c
    1.39.1.40 05/05/26 15:42:21 marko@hundin.mysql.fi +5 -0
    row_drop_table_for_mysql(): Check all referencing tables
    when drop_db==TRUE (Bug #10335)

ChangeSet
  1.2260.37.2 05/05/26 12:12:36 msvensson@neptunus.(none) +1 -0
  Fix icc compiler warning

  ndb/src/kernel/blocks/dbtux/Dbtux.hpp
    1.37 05/05/26 12:12:33 msvensson@neptunus.(none) +0 -1
    Removed second forward declaration of "struct DescEnt"

ChangeSet
  1.2260.37.1 05/05/26 12:10:05 msvensson@neptunus.(none) +3 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into neptunus.(none):/home/msvensson/mysql/mysql-4.1

  sql/item.cc
    1.204 05/05/26 12:10:02 msvensson@neptunus.(none) +0 -0
    Auto merged

  sql/ha_myisammrg.cc
    1.57.1.1 05/05/26 12:10:02 msvensson@neptunus.(none) +0 -0
    Auto merged

  include/my_global.h
    1.91 05/05/26 12:10:02 msvensson@neptunus.(none) +0 -0
    Auto merged

ChangeSet
  1.2260.26.3 05/05/26 12:09:14 msvensson@neptunus.(none) +46 -0
  Add ifdefs to control when "#pragma implementation" should be used
  Added some more ifdefs for "#pragma interface"

  sql/tztime.cc
    1.17 05/05/26 12:09:10 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_udf.cc
    1.46 05/05/26 12:09:10 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_string.cc
    1.90 05/05/26 12:09:10 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_select.cc
    1.401 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_olap.cc
    1.13 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_map.h
    1.6 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_INTERFACE

  sql/sql_map.cc
    1.5 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_list.cc
    1.7 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_crypt.h
    1.5 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_crypt.cc
    1.7 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_class.cc
    1.196 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/sql_analyse.h
    1.19 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_INTERFACE

  sql/sql_analyse.cc
    1.49 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/set_var.cc
    1.165 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/protocol_cursor.cc
    1.4 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/protocol.cc
    1.101 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/procedure.cc
    1.6 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/opt_range.cc
    1.135 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/log_event.h
    1.97 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_INTERFACE

  sql/log_event.cc
    1.178 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_uniq.h
    1.21 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_INTERFACE

  sql/item_uniq.cc
    1.6 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_timefunc.cc
    1.86 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_sum.cc
    1.135 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_subselect.cc
    1.132 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_strfunc.cc
    1.223 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_geofunc.cc
    1.20 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_func.cc
    1.245 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item_cmpfunc.cc
    1.186 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/item.cc
    1.202.1.1 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/hash_filo.cc
    1.5 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/handler.cc
    1.164 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_ndbcluster.cc
    1.153 05/05/26 12:09:09 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_myisammrg.cc
    1.54.2.1 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_myisam.cc
    1.156 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_isammrg.cc
    1.17 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_isam.cc
    1.31 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_innodb.cc
    1.197 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_heap.cc
    1.52 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_blackhole.cc
    1.5 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/ha_berkeley.cc
    1.149 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  sql/field.cc
    1.216 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  mysys/raid.cc
    1.32 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

  include/my_global.h
    1.89.1.1 05/05/26 12:09:08 msvensson@neptunus.(none) +5 -0
    Use pragma implementation for gcc pre version 3

  client/sql_string.h
    1.12 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_INTERFACE

  client/sql_string.cc
    1.21 05/05/26 12:09:08 msvensson@neptunus.(none) +1 -1
    USE_PRAGMA_IMPLEMENTATION

ChangeSet
  1.2260.1.36 05/05/26 11:43:47 lenz@mysql.com +4 -0
  - merged the 4.1.12a Changes back into the main tree

  configure.in
    1.375 05/05/26 11:43:41 lenz@mysql.com +1 -2
    - manual merge (corrected version number)

  sql/ha_myisammrg.cc
    1.58 05/05/26 11:32:44 lenz@mysql.com +0 -1
    Auto merged

  mysys/my_getwd.c
    1.16 05/05/26 11:32:44 lenz@mysql.com +0 -4
    Auto merged

  myisammrg/myrg_open.c
    1.30 05/05/26 11:32:44 lenz@mysql.com +0 -3
    Auto merged

ChangeSet
  1.2269 05/05/26 07:21:05 joreland@mysql.com +5 -0
  ndb - Testcase for bug#10669
        --database option to hugo tools

  ndb/test/tools/hugoScanUpdate.cpp
    1.7 05/05/26 07:21:03 joreland@mysql.com +5 -3
    Add --database=<name> to hugo tools

  ndb/test/tools/hugoScanRead.cpp
    1.7 05/05/26 07:21:03 joreland@mysql.com +4 -3
    Add --database=<name> to hugo tools

  ndb/test/tools/hugoPkUpdate.cpp
    1.7 05/05/26 07:21:03 joreland@mysql.com +4 -3
    Add --database=<name> to hugo tools

  ndb/test/tools/hugoLoad.cpp
    1.4 05/05/26 07:21:03 joreland@mysql.com +4 -2
    Add --database=<name> to hugo tools

  ndb/test/ndbapi/testNdbApi.cpp
    1.10 05/05/26 07:21:03 joreland@mysql.com +81 -0
    Testcase for bug#10669

ChangeSet
  1.2260.36.1 05/05/25 20:26:40 jimw@mysql.com +2 -0
  Fix table renaming to not lowercase table names for all storage
  engines when lower_case_table_names == 2, as it did previously
  for InnoDB and MEMORY. (Bug #9660)

  sql/sql_table.cc
    1.281.1.1 05/05/25 20:26:38 jimw@mysql.com +75 -55
    Add build_table_path() function to construct the path to
    a table, and use it to replace nearly all of the places
    where this was done with similar code.
    
    Fix mysql_rename_table() to not lowercase the .frm file
    name when lower_case_table_names == 2 and the storage
    engine does not set the HA_FILE_BASED flag (such as InnoDB).

  mysql-test/r/lowercase_table2.result
    1.12 05/05/25 20:26:38 jimw@mysql.com +6 -6
    Fix results

ChangeSet
  1.2260.35.1 05/05/25 18:11:03 joerg@mysql.com +1 -0
  Manual merge.

  support-files/mysql.spec.sh
    1.94 05/05/25 18:11:00 joerg@mysql.com +15 -15
    Manual merge.

ChangeSet
  1.1346.1.763 05/05/25 16:24:07 joerg@mysql.com +1 -0
  Added a missing "make clean" to the RPM "spec" file which had caused the original 4.1.12 RPMs to be broken.
  (bug#10674, bug#10681)

  support-files/mysql.spec.sh
    1.61.1.29 05/05/25 16:24:05 joerg@mysql.com +7 -0
    Added a missing "make clean" which had caused the original 4.1.12 RPMs to be broken.
    (bug#10674, bug#10681)

ChangeSet
  1.2268 05/05/25 16:19:17 joreland@mysql.com +13 -0
  ndb - Embryo of overload protection
    Add method to query free send buffer size

  ndb/src/mgmsrv/ConfigInfo.cpp
    1.55 05/05/25 16:19:14 joreland@mysql.com +2 -2
    Increse min values for SHM and TCP transport send buffer size

  ndb/src/common/transporter/TransporterRegistry.cpp
    1.26 05/05/25 16:19:14 joreland@mysql.com +12 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/Transporter.hpp
    1.6 05/05/25 16:19:14 joreland@mysql.com +2 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/TCP_Transporter.hpp
    1.4 05/05/25 16:19:14 joreland@mysql.com +1 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/TCP_Transporter.cpp
    1.9 05/05/25 16:19:14 joreland@mysql.com +5 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/SendBuffer.hpp
    1.4 05/05/25 16:19:14 joreland@mysql.com +1 -1
    Allow accessing free send buffer size

  ndb/src/common/transporter/SendBuffer.cpp
    1.2 05/05/25 16:19:14 joreland@mysql.com +1 -1
    Allow accessing free send buffer size

  ndb/src/common/transporter/SHM_Transporter.hpp
    1.7 05/05/25 16:19:14 joreland@mysql.com +2 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/SHM_Transporter.cpp
    1.14 05/05/25 16:19:14 joreland@mysql.com +6 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/SHM_Buffer.hpp
    1.7 05/05/25 16:19:14 joreland@mysql.com +17 -0
    Allow accessing free send buffer size

  ndb/src/common/transporter/SCI_Transporter.hpp
    1.4 05/05/25 16:19:14 joreland@mysql.com +2 -1
    Allow accessing free send buffer size

  ndb/src/common/transporter/SCI_Transporter.cpp
    1.7 05/05/25 16:19:14 joreland@mysql.com +5 -4
    Allow accessing free send buffer size

  ndb/include/transporter/TransporterRegistry.hpp
    1.8 05/05/25 16:19:14 joreland@mysql.com +7 -0
    Allow accessing free send buffer size

ChangeSet
  1.2260.1.35 05/05/25 12:57:29 monty@mysql.com +1 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/home/my/mysql-4.1

  sql/sql_parse.cc
    1.436 05/05/25 12:57:28 monty@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.34.1 05/05/25 12:56:47 monty@mysql.com +7 -0
  Cleanup during code review
  Faster detection of wrong table names (like PRN) on windows

  sql/sql_repl.cc
    1.134 05/05/25 12:56:42 monty@mysql.com +18 -18
    Cleanup during code review

  sql/sql_parse.cc
    1.433.1.1 05/05/25 12:56:42 monty@mysql.com +3 -2
    Simple cleanup

  sql/sql_lex.cc
    1.145 05/05/25 12:56:42 monty@mysql.com +1 -1
    Portability fix

  mysys/my_open.c
    1.21 05/05/25 12:56:41 monty@mysql.com +8 -5
    USe check_if_legal_filename() instead of my_access() to detect wrong file names on windows

  mysys/my_fopen.c
    1.12 05/05/25 12:56:41 monty@mysql.com +7 -4
    USe check_if_legal_filename() instead of my_access() to detect wrong file names on windows

  mysys/my_access.c
    1.2 05/05/25 12:56:41 monty@mysql.com +94 -26
    Added check_if_legal_filename()
    Set errno if my_access() fails

  include/my_sys.h
    1.137 05/05/25 12:56:40 monty@mysql.com +1 -0
    Added check_if_legal_filename()

ChangeSet
  1.2267 05/05/25 11:53:58 joreland@mysql.com +1 -0
  ndb autotest - merge jonathans script changes

  ndb/test/run-test/ndb-autotest.sh
    1.12 05/05/25 11:53:55 joreland@mysql.com +191 -49
    ndb autotest
      1) merge jonathan changes
      2) add --no-report (if dont't want to produce/scp a report)
      3) add --no-config (if don't want to create a configuration, i.e there is already one present)
      4) add --no-test (for not actually starting test)
      5) add checking of conf file

ChangeSet
  1.2260.26.2 05/05/25 11:10:10 msvensson@neptunus.(none) +1 -0
  Use one err file for each master 

  mysql-test/mysql-test-run.sh
    1.252 05/05/25 11:10:07 msvensson@neptunus.(none) +2 -2
    Add master id to end of MASTER_MY_ERR  so that both masters doesnt write to the same file.

ChangeSet
  1.2259.2.10 05/05/25 10:55:21 lenz@mysql.com +2 -0
  - one more build fix for zlib.lib - added libpath to the 
    mysql_test_run_new project files

  VC++Files/mysql-test/mysql_test_run_new_ia64.dsp
    1.4 05/05/25 10:55:16 lenz@mysql.com +2 -2
    - added libpath option so that zlib.lib will be found

  VC++Files/mysql-test/mysql_test_run_new.dsp
    1.5 05/05/25 10:55:16 lenz@mysql.com +2 -2
    - added libpath option so that zlib.lib will be found

ChangeSet
  1.2265 05/05/25 09:22:07 joreland@mysql.com +1 -0
  ndb autotest 
    adopt to changes in auto*tools

  ndb/test/run-test/ndb-autotest.sh
    1.11 05/05/25 09:22:05 joreland@mysql.com +11 -6
    adopt to changes in auto*tools

ChangeSet
  1.2260.1.34 05/05/25 15:35:51 stewart@mysql.com +1 -0
  BUG#10831 ndb mgmd LogDestination maxfiles does not rotate logs properly

  ndb/src/common/util/File.cpp
    1.9 05/05/25 15:35:44 stewart@mysql.com +3 -23
    my_stat returns NULL on failure, not non-zero.
    
    i.e. exactly the opposite of stat(2).
    
    providing confusion for unix programmers, who expect errors to be non-zero.
    
    Clean up File_class::exists(char*) to use the my_stat interface properly.

ChangeSet
  1.2260.1.33 05/05/25 12:18:18 stewart@mysql.com +1 -0
  BUG#10796 Incorrect check-cpu result for ppc linux gcc

  BUILD/check-cpu
    1.9 05/05/25 12:18:13 stewart@mysql.com +4 -0
    Add no_march variable to indicate that this architecture doesn't support the -march flag to GCC

ChangeSet
  1.2259.2.9 05/05/24 22:42:43 lenz@mysql.com +26 -0
  - applied more changes to enable the CP932 charset on Windows
  - fixed linking with zlib

  VC++Files/strings/strings_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +4 -0
    - added ctype-cp932.c to the file list

  VC++Files/mysqlmanager/mysqlmanager.dsp
    1.12 05/05/24 22:42:38 lenz@mysql.com +2 -2
    - added zlib.lib to the LINK32 options

  VC++Files/mysqlcheck/mysqlcheck_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/mysqlcheck/mysqlcheck.dsp
    1.11 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/mysqlbinlog/mysqlbinlog_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/mysqlbinlog/mysqlbinlog.dsp
    1.15 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/mysql-test/mysql_test_run_new_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +2 -2
    - added zlib.lib to the LINK32 options

  VC++Files/mysql-test/mysql_test_run_new.dsp
    1.4 05/05/24 22:42:38 lenz@mysql.com +2 -2
    - added zlib.lib to the LINK32 options

  VC++Files/libmysql/libmysql_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +4 -0
    - added ctype-cp932.c to the file list

  VC++Files/libmysql/libmysql.dsp
    1.28 05/05/24 22:42:38 lenz@mysql.com +4 -0
    - added ctype-cp932.c to the file list

  VC++Files/client/mysqltest_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqltest.dsp
    1.4 05/05/24 22:42:38 lenz@mysql.com +2 -2
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqlshow_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqlshow.dsp
    1.11 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqlimport_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqlimport.dsp
    1.11 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqldump_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqldump.dsp
    1.12 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqlclient_ia64.dsp
    1.2 05/05/24 22:42:38 lenz@mysql.com +4 -0
    - added ctype-cp932.c to the file list

  VC++Files/client/mysqlclient.dsp
    1.30 05/05/24 22:42:38 lenz@mysql.com +4 -0
    - added ctype-cp932.c to the file list

  VC++Files/client/mysqlcheck_ia64.dsp
    1.2 05/05/24 22:42:38 lenz@mysql.com +1 -1
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqlcheck.dsp
    1.4 05/05/24 22:42:38 lenz@mysql.com +1 -1
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqladmin_ia64.dsp
    1.3 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysqladmin.dsp
    1.12 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysql_ia64.dsp
    1.2 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

  VC++Files/client/mysql.dsp
    1.13 05/05/24 22:42:38 lenz@mysql.com +3 -3
    - added zlib.lib to the LINK32 options

ChangeSet
  1.2260.33.1 05/05/24 12:21:15 jimw@mysql.com +3 -0
  Increase limit of partial key length in MEMORY storage engine
  to the same as a full key. (Bug #10566)

  sql/ha_heap.h
    1.32 05/05/24 12:21:11 jimw@mysql.com +1 -0
    Add max_supported_key_part_length() method.

  mysql-test/t/heap.test
    1.21 05/05/24 12:21:11 jimw@mysql.com +9 -0
    Add test for bug #10566

  mysql-test/r/heap.result
    1.29 05/05/24 12:21:11 jimw@mysql.com +5 -0
    Update results

ChangeSet
  1.2260.32.1 05/05/24 21:02:42 serg@serg.mylan +1 -0
  simplifying new/my_arg_new wrapping

  include/my_global.h
    1.90 05/05/24 21:02:35 serg@serg.mylan +3 -1
    simplifying new/my_arg_new wrapping

ChangeSet
  1.2260.31.1 05/05/24 11:11:40 jimw@mysql.com +1 -0
  Fix error reporting for 'OPTIMIZE TABLE' on InnoDB tables. (Bug #8135)

  sql/sql_table.cc
    1.282 05/05/24 11:11:37 jimw@mysql.com +22 -0
    Pass through errors from InnoDB in OPTIMIZE TABLE.

ChangeSet
  1.2260.30.1 05/05/24 11:02:39 jimw@mysql.com +1 -0
  Fix timeouts with SSL on Windows, and also sync the fastsend
  implementation with normal socket behavior. (Bug #8572)

  vio/viossl.c
    1.25 05/05/24 10:55:16 jimw@mysql.com +28 -17
    Sync implementations of *_fastsend() and *_timeout() with viosocket.c

ChangeSet
  1.2260.28.1 05/05/24 17:50:17 jani@ua141d10.elisa.omakaista.fi +3 -0
  Added a test case for Bug#8009.

  sql/item.cc
    1.203 05/05/24 17:50:10 jani@ua141d10.elisa.omakaista.fi +1 -0
    Fixed Bug#8009.

  mysql-test/t/select.test
    1.39 05/05/24 17:50:09 jani@ua141d10.elisa.omakaista.fi +9 -0
    Added a test case for Bug#8009.

  mysql-test/r/select.result
    1.56 05/05/24 17:50:09 jani@ua141d10.elisa.omakaista.fi +6 -0
    Added a test case for Bug#8009.

ChangeSet
  1.2263 05/05/24 16:48:56 joreland@mysql.com +1 -0
  ndb - mysqltestrun
    run ndb_select_all --no-defaults

  mysql-test/t/ndb_restore.test
    1.6 05/05/24 16:48:53 joreland@mysql.com +1 -1
    run ndb_select_all --no-defaults

ChangeSet
  1.2260.27.1 05/05/24 09:01:06 reggie@mdk10.(none) +3 -0
  removed unneeded reserved_win_names testcase

  BitKeeper/deleted/.del-reserved_win_names.result~ea458226c0df5337
    1.2 05/05/24 08:44:19 reggie@mdk10.(none) +0 -0
    Delete: mysql-test/r/reserved_win_names.result

  BitKeeper/deleted/.del-reserved_win_names.require~be6a130b5430085f
    1.2 05/05/24 08:44:16 reggie@mdk10.(none) +0 -0
    Delete: mysql-test/r/reserved_win_names.require

  BitKeeper/deleted/.del-reserved_win_names.test~334b02776c4247a7
    1.2 05/05/24 08:44:07 reggie@mdk10.(none) +0 -0
    Delete: mysql-test/t/reserved_win_names.test

ChangeSet
  1.2259.2.8 05/05/24 15:14:21 lenz@mysql.com +1 -0
  - bumped up version number string to 4.1.12a

  configure.in
    1.371.2.2 05/05/24 15:14:15 lenz@mysql.com +1 -1
    - bumped up version number string to 4.1.12a

ChangeSet
  1.2259.2.7 05/05/24 14:46:28 lenz@mysql.com +2 -0
  - added the cp932 charset support to the Windows builds

  include/config-win.h
    1.53 05/05/24 14:46:23 lenz@mysql.com +1 -0
    - added a HAVE_CHARSET_cp932 #define to enable the cp932 charset
      on Windows

  VC++Files/strings/strings.dsp
    1.16 05/05/24 14:46:22 lenz@mysql.com +4 -0
    - added ctype-cp932.c to the project (new charset)

ChangeSet
  1.2260.24.8 05/05/24 13:38:46 acurtis@xiphis.org +1 -0
  Add comments

  sql/sql_parse.cc
    1.435 05/05/24 13:38:32 acurtis@xiphis.org +7 -0
    Add comments

ChangeSet
  1.2259.2.6 05/05/24 14:30:22 lenz@mysql.com +3 -0
  - Backport of the patch to fix BUG#10687 (Merge engine fails 
    on Windows): applied required patches on top of the 4.1.12
    release (will be published as 4.1.12a for Windows)

  sql/ha_myisammrg.cc
    1.54.1.1 05/05/24 14:30:17 lenz@mysql.com +1 -0
    - Backport of the patch to fix BUG#10687 (Merge engine fails 
      on Windows): added extra debug output

  mysys/my_getwd.c
    1.13.1.1 05/05/24 14:30:17 lenz@mysql.com +4 -1
    - Backport of the patch to fix BUG#10687 (Merge engine fails 
      on Windows): Added test to see if FN_LIBCHAR != '/' before
      doing comparison to avoid redundant comparison

  myisammrg/myrg_open.c
    1.28.1.1 05/05/24 14:30:17 lenz@mysql.com +3 -1
    - Backport of the patch to fix BUG#10687 (Merge engine fails 
      under Windows): use fn_format to convert pathnames if the files 
      in the merge file have a pathname

ChangeSet
  1.2260.24.7 05/05/24 11:44:34 acurtis@xiphis.org +3 -0
  Bug#7241 - Invalid response when DELETE .. USING and LOCK TABLES used.
    Only acquire necessary write lock for multi-delete

  sql/sql_parse.cc
    1.434 05/05/24 11:44:21 acurtis@xiphis.org +6 -0
    Bug#7241
      Don't acquire write lock on all tables.
      Make sure to set lock_type on real table_list

  mysql-test/t/lock.test
    1.11 05/05/24 11:44:21 acurtis@xiphis.org +14 -0
    Test for Bug#7241

  mysql-test/r/lock.result
    1.14 05/05/24 11:44:20 acurtis@xiphis.org +10 -0
    Test for Bug#7241

ChangeSet
  1.2260.24.6 05/05/23 23:54:39 gbichot@bk-internal.mysql.com +2 -0
  marking the file gone again to hopefully get the tree on its feet

  BitKeeper/etc/logging_ok
    1.394 05/05/23 23:54:39 gbichot@bk-internal.mysql.com +1 -0
    Logging to logging@openlogging.org accepted

  BitKeeper/etc/gone
    1.94 05/05/23 23:52:13 gbichot@bk-internal.mysql.com +1 -0

ChangeSet
  1.2260.24.5 05/05/23 14:48:25 reggie@mdk10.(none) +5 -0
  BUG# 9148 Denial of service
  
  fixups of test case and comment formatting

  mysys/my_open.c
    1.20 05/05/23 14:48:14 reggie@mdk10.(none) +4 -3
    reformatted comments

  mysys/my_fopen.c
    1.11 05/05/23 14:48:14 reggie@mdk10.(none) +3 -2
    reformatted comments

  mysql-test/t/lowercase_table.test
    1.17 05/05/23 14:48:14 reggie@mdk10.(none) +11 -0
    added my test for bug #9148 to this test case

  mysql-test/r/lowercase_table.result
    1.15 05/05/23 14:48:13 reggie@mdk10.(none) +6 -0
    added my test for bug #9148 to this test case

ChangeSet
  1.2260.23.7 05/05/23 12:31:22 reggie@mdk10.(none) +2 -0
  BUG#10687 - Merge engine fails under Windows
  
  This final cset is to fix a syntax problem in ha_myisammrg.cc where a / was left out of a format string.
  It also adds a check in has_path to avoid a possible redundant comparison.
  
  ha_myisammrg.cc:
    Replaced missing / in format string
  my_getwd.c:
    Added test to see if FN_LIBCHAR != '/' before doing comparison to avoid redundant comparison

  sql/ha_myisammrg.cc
    1.57 05/05/23 12:28:21 reggie@mdk10.(none) +1 -1
    Replaced missing / in format string

  mysys/my_getwd.c
    1.15 05/05/23 12:27:00 reggie@mdk10.(none) +4 -1
    Added test to see if FN_LIBCHAR != '/' before doing comparison to avoid redundant comparison

ChangeSet
  1.2260.23.5 05/05/23 12:05:15 reggie@mdk10.(none) +2 -0
  BUG# 10687: Merge engine fails under Windows
  
  This cset is to roll out the cset applied earlier from Ingo.
  This bug has been fixed with a different cset.
  

  strings/my_vsnprintf.c
    1.31 05/05/23 12:05:07 reggie@mdk10.(none) +0 -6
    removed the patch applied earlier.  The patch was to add %c ability.  
    Monty has already done this.

  sql/ha_myisammrg.cc
    1.56 05/05/23 12:05:07 reggie@mdk10.(none) +2 -2
    removed the patch applied earlier

ChangeSet
  1.2260.26.1 05/05/23 18:53:53 msvensson@neptunus.(none) +3 -0
  Build fixes for icc, compile _without_ "-no-gnu"

  ndb/src/kernel/blocks/ndbfs/AsyncFile.cpp
    1.16 05/05/23 18:53:50 msvensson@neptunus.(none) +0 -4
    Remove dirent64

  ndb/src/cw/cpcd/Process.cpp
    1.18 05/05/23 18:53:50 msvensson@neptunus.(none) +1 -4
    Remove rlimit64

  include/my_global.h
    1.89 05/05/23 18:53:50 msvensson@neptunus.(none) +1 -1
    icc does not define __ICC when emulating gcc. Use __INTEL_COMPILER to check for icc.

ChangeSet
  1.2260.23.4 05/05/23 11:53:16 reggie@mdk10.(none) +2 -0
  BUG# 10687: MERGE Engine fails on Windows
  This is a replacement for the original patch given by Ingo.  This one comes
  from Monty.
  The problem is that merge files now use unix style pathnames on all 
  platforms.  The merge file open code was not properly converting those
  pathnames back to non-unix when necessary.

  mysys/my_getwd.c
    1.14 05/05/23 11:53:08 reggie@mdk10.(none) +1 -1
    add a test for '/' in the code that determines if a string inlucdes a pathname

  myisammrg/myrg_open.c
    1.29 05/05/23 11:53:07 reggie@mdk10.(none) +3 -1
    use fn_format to convert pathnames if the files in the merge file have a pathname

ChangeSet
  1.2260.24.4 05/05/21 12:31:58 reggie@mdk10.(none) +2 -0
  BUG# 9148: Denial of service
  
  This is a second patch needing another review.  The first patch didn't solve
  the entire problem.  open and fopen on Windows will still open
  files like "com1.sym" when they shouldn't.  This patch
  checks that the file exists before trying to open it.
  

  mysys/my_open.c
    1.19 05/05/21 12:31:45 reggie@mdk10.(none) +6 -0
    on Windows, if we are not creating a file the we call my_access to make sure the
    file exists before trying to open it.

  mysys/my_fopen.c
    1.10 05/05/21 12:31:45 reggie@mdk10.(none) +15 -3
    on Windows, if we are not creating a file the we call my_access to make sure the
    file exists before trying to open it.

ChangeSet
  1.2260.24.3 05/05/20 16:53:41 reggie@mdk10.(none) +1 -0
  fixed stupid typo that added a ! before my_access

  mysys/mf_pack.c
    1.20 05/05/20 16:53:34 reggie@mdk10.(none) +1 -1
    fixed stupid typo that added a ! before my_access

ChangeSet
  1.2260.24.2 05/05/20 16:04:10 reggie@mdk10.(none) +11 -0
  BUG# 9148: Denial of service
  
  The problem was that on Windows the access method indicates that access to file 
  such as "com1" and "lpt1" is allowed (since they are device names) and
  this causes mysql to attempt to open them as databases or tables.
  
  The fix was to write our own my_access method that uses other Win32 functions
  to determine if the given argument is indeed a file and has to requested
  mode.

  mysys/my_access.c
    1.1 05/05/20 16:03:57 reggie@mdk10.(none) +53 -0

  mysys/my_access.c
    1.0 05/05/20 16:03:57 reggie@mdk10.(none) +0 -0
    BitKeeper file /home/reggie/bk/bug9148/mysys/my_access.c

  mysql-test/t/reserved_win_names.test
    1.1 05/05/20 16:03:56 reggie@mdk10.(none) +12 -0

  mysql-test/t/reserved_win_names.test
    1.0 05/05/20 16:03:56 reggie@mdk10.(none) +0 -0
    BitKeeper file /home/reggie/bk/bug9148/mysql-test/t/reserved_win_names.test

  mysql-test/r/reserved_win_names.result
    1.1 05/05/20 16:03:55 reggie@mdk10.(none) +7 -0

  mysql-test/r/reserved_win_names.require
    1.1 05/05/20 16:03:55 reggie@mdk10.(none) +2 -0

  sql/sql_db.cc
    1.126 05/05/20 16:03:55 reggie@mdk10.(none) +1 -1
    changed call to access to my_access

  mysql-test/r/reserved_win_names.result
    1.0 05/05/20 16:03:55 reggie@mdk10.(none) +0 -0
    BitKeeper file /home/reggie/bk/bug9148/mysql-test/r/reserved_win_names.result

  mysql-test/r/reserved_win_names.require
    1.0 05/05/20 16:03:55 reggie@mdk10.(none) +0 -0
    BitKeeper file /home/reggie/bk/bug9148/mysql-test/r/reserved_win_names.require

  mysys/mf_pack.c
    1.19 05/05/20 16:03:54 reggie@mdk10.(none) +1 -1
    changed call to access to my_access

  mysys/Makefile.am
    1.56 05/05/20 16:03:54 reggie@mdk10.(none) +1 -1
    added my_access to mysys build file

  include/my_sys.h
    1.136 05/05/20 16:03:54 reggie@mdk10.(none) +5 -0
    if on windows, we use my_access.
    if not on windows, then my_access points to the native access method

  VC++Files/mysys/mysys_ia64.dsp
    1.2 05/05/20 16:03:54 reggie@mdk10.(none) +7 -0
    added my_access.c

  VC++Files/mysys/mysys.dsp
    1.25 05/05/20 16:03:54 reggie@mdk10.(none) +5 -0
    added my_access 

ChangeSet
  1.2260.25.1 05/05/20 06:56:02 brian@zim.(none) +4 -0
  Additions for --add-drop-database

  mysql-test/t/mysqldump.test
    1.33 05/05/20 06:56:00 brian@zim.(none) +9 -0
    Tests for --add-drop-databases

  mysql-test/r/mysqldump.result
    1.45 05/05/20 06:56:00 brian@zim.(none) +38 -0
    New test results for --add-drop-databases

  client/mysqldump.c
    1.188 05/05/20 06:56:00 brian@zim.(none) +15 -4
    Work for adding of --add-drop-database

  client/client_priv.h
    1.35 05/05/20 06:56:00 brian@zim.(none) +1 -1
    Adding option for drop database

ChangeSet
  1.2260.22.2 05/05/20 18:48:18 ramil@mysql.com +1 -0
  a fix (bug #10757: gis-rtree.test fails)
  

  myisam/sp_key.c
    1.9 05/05/20 18:48:12 ramil@mysql.com +7 -3
    a fix (bug #10757: gis-rtree.test fails)
    float8get() doesn't properly work with local variables sometimes.

ChangeSet
  1.2260.23.3 05/05/19 16:02:14 reggie@mdk10.(none) +2 -0
  BUG# 10687 - MERGE engine fails under Windows
  
  This patch was submitted by Ingo and it appears to work correctly.

  strings/my_vsnprintf.c
    1.30 05/05/19 16:02:07 reggie@mdk10.(none) +7 -1
    add support for %c to my_vsnprintf

  sql/ha_myisammrg.cc
    1.55 05/05/19 16:02:07 reggie@mdk10.(none) +3 -2
    use FN_LIBCHAR instead of / so buff works correctly on Windows

ChangeSet
  1.2260.23.2 05/05/19 15:18:49 reggie@mdk10.(none) +1 -0
  This fixed a compile problem on Windows
  
  sql_udf.cc:
    changed dl_name to udf->dl in mysql_create_function

  sql/sql_udf.cc
    1.45 05/05/19 15:18:08 reggie@mdk10.(none) +1 -1
    changed dl_name to udf->dl in mysql_create_function

ChangeSet
  1.2260.22.1 05/05/19 22:53:35 ramil@mysql.com +1 -0
  hf's fix for bug #10626 ( gis.test fails)

  sql/spatial.cc
    1.20 05/05/19 22:53:31 ramil@mysql.com +22 -25
    just float8get doesn't work well with the local variables -                     
    they can be of processor-specific floating type - not the                       
    standard decimal (by hf)                                                                

ChangeSet
  1.2260.21.1 05/05/19 12:34:15 lars@mysql.com +3 -0
  CSC#4944: Adding File_size to output of SHOW BINARY lOGS

  sql/sql_repl.cc
    1.133 05/05/19 12:34:01 lars@mysql.com +30 -3
    Adding File_size to output of SHOW BINARY lOGS

  mysql-test/r/rpl_rotate_logs.result
    1.56 05/05/19 12:34:00 lars@mysql.com +15 -15
    Adding File_size to output of SHOW BINARY lOGS

  mysql-test/r/rpl_log.result
    1.53 05/05/19 12:34:00 lars@mysql.com +6 -6
    Adding File_size to output of SHOW BINARY lOGS

ChangeSet
  1.2260.20.2 05/05/19 09:47:13 serg@serg.mylan +2 -0
  after merge fix

  sql/sql_udf.cc
    1.44 05/05/19 09:47:03 serg@serg.mylan +1 -1
    after merge fix

  mysql-test/r/select.result
    1.55 05/05/19 09:47:03 serg@serg.mylan +1 -1
    after merge fix

ChangeSet
  1.2260.20.1 05/05/18 22:14:08 serg@serg.mylan +5 -0
  merged

  sql/sql_udf.cc
    1.43 05/05/18 22:13:57 serg@serg.mylan +5 -8
    merged

  sql/sql_list.h
    1.31 05/05/18 22:13:57 serg@serg.mylan +2 -2
    merged

  mysql-test/t/select.test
    1.38 05/05/18 22:13:57 serg@serg.mylan +44 -47
    merged

  mysql-test/r/select.result
    1.54 05/05/18 22:13:57 serg@serg.mylan +54 -54
    merged

  sql/unireg.cc
    1.47 05/05/18 21:58:36 serg@serg.mylan +0 -0
    Auto merged

ChangeSet
  1.1346.833.1 05/05/18 21:31:39 serg@serg.mylan +1 -0
  udf: when banning paths from soname in CREATE FUNCTION, check for \ on windows.
  when reporting an error, use an appropriate buffer for udf->name

  sql/sql_udf.cc
    1.15.1.14 05/05/18 21:31:34 serg@serg.mylan +6 -4
    udf: when banning paths from soname in CREATE FUNCTION, check for \ on windows.
    when reporting an error, use an appropriate buffer for udf->name

ChangeSet
  1.2260.19.1 05/05/18 19:40:39 ingo@mysql.com +6 -0
  Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
  After review version.
  Added a condition for MERGE tables. These do not have unique
  indexes. But every key could be a unique key on the underlying
  MyISAM table. So get the maximum key length for MERGE tables
  instead of the maximum unique key length. This is used for
  buffer allocation in write_record().

  sql/table.cc
    1.129 05/05/18 19:40:35 ingo@mysql.com +6 -1
    Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
    Added a condition for MERGE tables. These do not have unique
    indexes. But every key could be a unique key on the underlying
    MyISAM table. So get the maximum key length for MERGE tables
    instead of the maximum unique key length. This is used for
    buffer allocation in write_record().

  sql/sql_insert.cc
    1.162 05/05/18 19:40:35 ingo@mysql.com +1 -1
    Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
    Changed the freeing of the memory to be symmetric to its
    allocation (my_safe_alloc -> my_safe_afree).
    This is not directly related to the bug.

  sql/handler.h
    1.140 05/05/18 19:40:35 ingo@mysql.com +1 -0
    Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
    Added a new table_flag telling that any index
    might be unique without being specified as such.

  sql/ha_myisammrg.h
    1.38 05/05/18 19:40:35 ingo@mysql.com +1 -1
    Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
    Set a table_flag for the MERGE engine telling that any index
    might be unique without being specified as such.

  mysql-test/t/merge.test
    1.31 05/05/18 19:40:35 ingo@mysql.com +12 -0
    Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
    The test case does not in all cases show the problem
    without the bugfix. The improper memory allocation
    might get through undetected in many cases.

  mysql-test/r/merge.result
    1.35 05/05/18 19:40:35 ingo@mysql.com +10 -0
    Bug#10400 - Improperly-defined MERGE table crashes with INSERT ... ON DUPLICATE KEY UPDATE
    The test result.

ChangeSet
  1.2260.17.2 05/05/18 09:40:12 jimw@mysql.com +2 -0
  Update mysqldump test and results

  mysql-test/t/mysqldump.test
    1.32 05/05/18 09:40:10 jimw@mysql.com +1 -1
    Fix test to not include version number in results

  mysql-test/r/mysqldump.result
    1.44 05/05/18 09:40:10 jimw@mysql.com +60 -74
    Update results

ChangeSet
  1.2260.17.1 05/05/18 09:25:06 jimw@mysql.com +3 -0
  Resolve bugfix merge

  mysql-test/t/mysqldump.test
    1.31 05/05/18 09:25:04 jimw@mysql.com +11 -10
    Merge bug fix

  mysql-test/r/mysqldump.result
    1.43 05/05/18 09:25:04 jimw@mysql.com +0 -0
    Update results

  client/mysqldump.c
    1.187 05/05/18 09:25:03 jimw@mysql.com +6 -9
    Merge bug fix

ChangeSet
  1.2243.4.2 05/05/18 09:12:37 jimw@mysql.com +1 -0
  Small optimization to bug fix, from Monty.

  client/mysqldump.c
    1.185.1.2 05/05/18 09:11:59 jimw@mysql.com +5 -4
    Optimize away a call to strend() by using return value of my_snprintf()

  ndb/src/common/util/version.c
    1.16 05/05/18 18:02:47 pekka@mysql.com +1 -0
    allow upgrade 4.1.10->4.1.12

ChangeSet
  1.2260.15.1 05/05/18 17:47:43 pekka@mysql.com +1 -0
  ndb - allow upgrade 4.1.10->4.1.12

ChangeSet
  1.2260.14.1 05/05/18 16:41:32 bell@book.sanja.is.com.ua +3 -0
  reduced 1 server reloding during test

  mysql-test/t/grant_cache.test
    1.12 05/05/18 16:41:25 bell@book.sanja.is.com.ua +4 -0
    query cache management moved inside test to privent server reloading during test

  mysql-test/r/grant_cache.result
    1.16 05/05/18 16:41:25 bell@book.sanja.is.com.ua +2 -0
    query cache management moved inside test

  BitKeeper/deleted/.del-grant_cache-master.opt~1b04b4b1116a7a2
    1.3 05/05/18 15:49:30 bell@book.sanja.is.com.ua +0 -0
    Delete: mysql-test/t/grant_cache-master.opt

ChangeSet
  1.2260.13.1 05/05/18 15:28:13 Sinisa@sinisa.nasamreza.org +1 -0
  Merge sinisa@bk-internal.mysql.com:/home/bk/mysql-4.1
  into sinisa.nasamreza.org:/mnt/work/mysql-4.1

  sql/sql_yacc.yy
    1.384 05/05/18 15:16:58 Sinisa@sinisa.nasamreza.org +0 -0
    Auto merged

ChangeSet
  1.2260.1.19 05/05/18 05:15:48 igor@rurik.mysql.com +3 -0
  olap.result, olap.test:
    Added test cases for bug #7914.
  sql_select.cc:
    Fixed bug #7914: rollup over expresssions such as sum(a)+1.

  mysql-test/r/olap.result
    1.17 05/05/18 05:15:18 igor@rurik.mysql.com +33 -0
    Added test cases for bug #7914.

  mysql-test/t/olap.test
    1.14 05/05/18 05:14:32 igor@rurik.mysql.com +24 -0
    Added test cases for bug #7914.

  sql/sql_select.cc
    1.400 05/05/18 05:14:05 igor@rurik.mysql.com +3 -3
    Fixed bug #7914: rollup over expresssions such as sum(a)+1.

ChangeSet
  1.2260.1.18 05/05/18 04:17:13 igor@rurik.mysql.com +1 -0
  sql_yacc.yy:
    Added missing ';'.

  sql/sql_yacc.yy
    1.382.1.5 05/05/18 03:46:51 igor@rurik.mysql.com +1 -0
    Added missing ';'.

ChangeSet
  1.2260.1.17 05/05/18 11:03:05 serg@serg.mylan +1 -0
  Merge serg@bk-internal.mysql.com:/home/bk/mysql-4.1/
  into serg.mylan:/usr/home/serg/Abk/mysql-4.1

  mysql-test/t/range.test
    1.28 05/05/18 11:02:52 serg@serg.mylan +0 -0
    Auto merged

ChangeSet
  1.2260.12.1 05/05/18 10:57:07 serg@serg.mylan +2 -0
  test fixes

  mysql-test/t/range.test
    1.26.1.1 05/05/18 10:57:00 serg@serg.mylan +0 -2
    range.test does not requires innodb

  mysql-test/mysql-test-run.sh
    1.251 05/05/18 10:56:59 serg@serg.mylan +1 -1
    always use --no-defaults

ChangeSet
  1.2260.1.16 05/05/18 10:22:27 tulin@dl145c.mysql.com +2 -0
  ndberror.c:
    updated error message for ndb

  BitKeeper/etc/logging_ok
    1.393 05/05/18 10:22:27 tulin@dl145c.mysql.com +1 -0
    Logging to logging@openlogging.org accepted

  ndb/src/ndbapi/ndberror.c
    1.26 05/05/18 10:06:53 ndbdev@dl145c.mysql.com +2 -2
    updated error message for ndb

ChangeSet
  1.2260.1.15 05/05/18 04:06:27 matt@mysql.com +3 -0
  Merge bk-internal:/home/bk/mysql-4.1
  into mysql.com:/data0/mysqldev/my/mysql-4.1-build

  sql/item_strfunc.h
    1.95 05/05/18 04:06:25 matt@mysql.com +0 -0
    Auto merged

  mysql-test/t/range.test
    1.27 05/05/18 04:06:25 matt@mysql.com +0 -2
    Auto merged

  configure.in
    1.374 05/05/18 04:06:25 matt@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.1.12 05/05/16 20:16:46 monty@mysql.com +2 -0
  Fix memory leak

  sql/sql_base.cc
    1.248 05/05/16 20:16:43 monty@mysql.com +1 -1
    Don't use c_ptr_safe() on this string as this causes a realloc and the String object (allocated by sql_yacc.yy) is never freed

  client/mysql.cc
    1.205 05/05/16 20:16:43 monty@mysql.com +4 -3
    Remove usage of c_ptr_safe() as this causes a linkage problem when compiling MySQL without inline functions

ChangeSet
  1.2260.11.1 05/05/16 14:06:52 sergefp@mysql.com +1 -0
  Some improvement in Item_int_with_ref class comment. 

  sql/item.h
    1.181 05/05/16 14:06:49 sergefp@mysql.com +6 -4
    Some improvement in Item_int_with_ref class comment. 

ChangeSet
  1.2260.10.1 05/05/16 12:19:10 bell@book.sanja.is.com.ua +4 -0
  relaxed DBUG_ASSERT in Item_int_with_ref::new_item() to "any constant" (BUG#10020)

  BitKeeper/etc/logging_ok
    1.392 05/05/16 12:19:08 bell@book.sanja.is.com.ua +1 -0
    Logging to logging@openlogging.org accepted

  sql/item.cc
    1.202 05/05/16 12:18:53 bell@book.sanja.is.com.ua +1 -1
    any constant allowed here BUG#10020)

  mysql-test/t/subselect.test
    1.144 05/05/16 12:18:53 bell@book.sanja.is.com.ua +24 -0
    bug 10020 test suite

  mysql-test/r/subselect.result
    1.165 05/05/16 12:18:52 bell@book.sanja.is.com.ua +24 -0
    test fro bug 10020

ChangeSet
  1.2226.5.5 05/05/16 01:08:42 kent@mysql.com +1 -0
  mysqltest.c:
    To solve bug#8455, call mysql_affected_rows() earlier, before query to find warnings

  client/mysqltest.c
    1.163 05/05/16 01:04:14 kent@mysql.com +10 -1
    To solve bug#8455, call mysql_affected_rows() earlier, before query to find warnings

ChangeSet
  1.1346.832.1 05/05/15 22:56:45 sergefp@mysql.com +3 -0
  Fix for BUG#10095: {wrong query results because of incorrect constant propagation} 
  The problem: base_list::remove didn't modify base_list::last when removing 
  the last list element.
  The fix: If we remove the last element, find the element before it (by walking
  from the beginning of the list) and set base_list::last accordingly.
  
  The list gets corrupted in both 4.0 and 4.1. There are no visible problems in 
  current 4.1 because current 4.1 doesn't call where_cond->fix_fields() after 
  constant propagation step.

  sql/sql_list.h
    1.10.1.6 05/05/15 22:56:44 sergefp@mysql.com +72 -2
    Fix for BUG#10095: {wrong query results because of incorrect constant propagation} 
    The problem: base_list::remove didn't modify base_list::last when removing 
    the last list element.
    The fix: If we remove the last element, find the element before it (by walking
    from the beginning of the list) and set base_list::last accordingly.

  mysql-test/t/select.test
    1.12.1.15 05/05/15 22:56:44 sergefp@mysql.com +59 -0
    Testcase for BUG#10095

  mysql-test/r/select.result
    1.8.1.29 05/05/15 22:56:44 sergefp@mysql.com +54 -0
    Testcase for BUG#10095

ChangeSet
  1.2226.5.4 05/05/15 20:38:54 kent@mysql.com +2 -0
  mysqltest.c:
    To solve bug#6193, also reset require when using 'eval' for running query
  mysql-test-run.pl:
    In cleanup, remove possible soft link to var directory

  client/mysqltest.c
    1.162 05/05/15 20:33:34 kent@mysql.com +6 -0
    To solve bug#6193, also reset require when using 'eval' for running query

  mysql-test/mysql-test-run.pl
    1.20 05/05/15 20:31:19 kent@mysql.com +6 -4
    In cleanup, remove possible soft link to var directory

ChangeSet
  1.2226.5.3 05/05/15 17:22:54 kent@mysql.com +3 -0
  mtr_report.pl, mtr_process.pl, mysql-test-run.pl:
    Added option --vardir=<directory> for feature bug#10096

  mysql-test/lib/mtr_report.pl
    1.7 05/05/15 17:13:31 kent@mysql.com +7 -6
    Added option --vardir=<directory> for feature bug#10096

  mysql-test/lib/mtr_process.pl
    1.7 05/05/15 17:13:31 kent@mysql.com +1 -1
    Added option --vardir=<directory> for feature bug#10096

  mysql-test/mysql-test-run.pl
    1.19 05/05/15 17:13:30 kent@mysql.com +130 -95
    Added option --vardir=<directory> for feature bug#10096

ChangeSet
  1.2226.5.2 05/05/15 07:34:09 kent@mysql.com +2 -0
  mysql-test-run.pl:
    Not to conflict with Windows return code 2 for "not found", use 62 for "skip"
  init_db.sql:
    Initial db updates

  mysql-test/mysql-test-run.pl
    1.18 05/05/15 07:08:22 kent@mysql.com +4 -4
    Not to conflict with Windows return code 2 for "not found", use 62 for "skip"

  mysql-test/lib/init_db.sql
    1.5 05/05/15 07:07:40 kent@mysql.com +3 -2
    Initial db updates

ChangeSet
  1.2226.5.1 05/05/15 06:59:34 kent@mysql.com +3 -0
  mysqltest.c, mysql-test-run.sh:
    Not to conflict with Windows return code 2 for "not found", use 62 for "skip"
  mysql-test-run.sh, suppress.purify:
    Use Purify suppress file

  client/mysqltest.c
    1.161 05/05/15 06:53:17 kent@mysql.com +1 -1
    Not to conflict with Windows return code 2 for "not found", use 62 for "skip"

  mysql-test/mysql-test-run.sh
    1.250 05/05/15 06:51:07 kent@mysql.com +3 -6
    Use Purify suppress file
    Not to conflict with Windows return code 2 for "not found", use 62 for "skip"

  mysql-test/suppress.purify
    1.1 05/05/15 06:49:47 kent@mysql.com +10 -0
    Purify suppress file

  mysql-test/suppress.purify
    1.0 05/05/15 06:49:47 kent@mysql.com +0 -0
    BitKeeper file /Users/kent/mysql/bk/mysql-4.1/mysql-test/suppress.purify

ChangeSet
  1.1346.1.760 05/05/14 17:08:43 monty@mysql.com +1 -0
  Fixed compiler failure

  sql/unireg.cc
    1.13.1.8 05/05/14 17:08:40 monty@mysql.com +1 -0
    Fixed compiler failure

ChangeSet
  1.2260.5.5 05/05/14 16:28:52 monty@mysql.com +2 -0
  Merge bk-internal.mysql.com:/home/bk/mysql-4.1
  into mysql.com:/home/my/mysql-4.1

  sql/share/danish/errmsg.txt
    1.131 05/05/14 16:28:51 monty@mysql.com +0 -0
    Auto merged

  libmysql/libmysql.c
    1.295 05/05/14 16:28:51 monty@mysql.com +0 -0
    Auto merged

ChangeSet
  1.2260.5.4 05/05/14 16:24:36 monty@mysql.com +11 -0
  After merge fixes

  sql/sql_table.cc
    1.281 05/05/14 16:24:32 monty@mysql.com +1 -1
    After merge fix

  sql/item_func.cc
    1.244 05/05/14 16:24:32 monty@mysql.com +1 -1
    After merge fix

  mysql-test/t/outfile.test
    1.10 05/05/14 16:24:32 monty@mysql.com +1 -0
    After merge fix

  mysql-test/t/insert_update.test
    1.13 05/05/14 16:24:32 monty@mysql.com +5 -1
    Add extra test for insert into ... on duplicate key upate

  mysql-test/t/alter_table.test
    1.37 05/05/14 16:24:32 monty@mysql.com +52 -50
    Fix test to be in same order as in 4.0

  mysql-test/r/outfile.result
    1.3 05/05/14 16:24:32 monty@mysql.com +11 -5
    After merge fix

  mysql-test/r/insert_update.result
    1.13 05/05/14 16:24:32 monty@mysql.com +8 -1
    Add extra test for insert into ... on duplicate key upate

  mysql-test/r/innodb.result
    1.99 05/05/14 16:24:32 monty@mysql.com +1 -1
    After merge fix

  mysql-test/r/alter_table.result
    1.48 05/05/14 16:24:32 monty@mysql.com +114 -111
    Fix test to be in same order as in 4.0

  libmysql/libmysql.c
    1.293.1.1 05/05/14 16:24:32 monty@mysql.com +17 -14
    Fix indentation for new function mysql_set_character_set()

  BitKeeper/deleted/.del-outfile2.result~fb702ee2518d8e6d
    1.3 05/05/14 16:19:18 monty@mysql.com +0 -0
    Delete: mysql-test/r/outfile2.result

ChangeSet
  1.2260.6.7 05/05/14 02:31:26 konstantin@mysql.com +1 -0
  Fix a valgrind warning: memcpy does not allow its arguments to overlap.

  libmysql/libmysql.c
    1.294 05/05/14 02:31:22 konstantin@mysql.com +5 -2
    Fix a valgrind warning: memcpy does not allow its arguments to overlap.

ChangeSet
  1.2260.6.6 05/05/14 02:28:10 konstantin@mysql.com +2 -0
  Fix wrong format specifier in error messages.
  Not to be pushed into 5.0 as there it's fixed differently (in the new
  format of error messages)

  sql/share/serbian/errmsg.txt
    1.81 05/05/14 02:28:05 konstantin@mysql.com +1 -1
    Fix wrong format specifier in an error message.

  sql/share/danish/errmsg.txt
    1.129.1.1 05/05/14 02:28:05 konstantin@mysql.com +1 -1
    Fix wrong format specifier in an error message.

ChangeSet
  1.2260.9.1 05/05/14 00:21:53 sergefp@mysql.com +3 -0
  Fix for BUG#9622: Make index statistics collection in MyISAM behave the same
  way in ALTER TABLE ... ENABLE KEYS, ANALYZE TABLE and after bulk insert:
  now statistics collection always assumes NULLs are inequal. 

  mysql-test/t/myisam.test
    1.37 05/05/14 00:21:43 sergefp@mysql.com +15 -0
    Testcase for BUG#9622

  mysql-test/r/myisam.result
    1.49 05/05/14 00:21:43 sergefp@mysql.com +14 -0
    Testcase for BUG#9622

  myisam/mi_check.c
    1.146 05/05/14 00:21:43 sergefp@mysql.com +35 -1
    Fix for BUG#9622: Make index statistics collection in MyISAM behave the same
    way in ALTER TABLE ... ENABLE KEYS, ANALYZE TABLE and after bulk insert:
    now statistics collection always assumes NULLs are inequal. 

ChangeSet
  1.2260.5.3 05/05/14 00:01:40 monty@mysql.com +37 -0
  Merge with 4.0

  sql/unireg.cc
    1.46 05/05/14 00:01:37 monty@mysql.com +2 -2
    Merge

  sql/sql_yacc.yy
    1.382.1.4 05/05/14 00:01:36 monty@mysql.com +0 -4
    Keep old

  sql/sql_table.cc
    1.280 05/05/14 00:01:36 monty@mysql.com +3 -15
    Merge

  sql/share/ukrainian/errmsg.txt
    1.95 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/swedish/errmsg.txt
    1.135 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/spanish/errmsg.txt
    1.135 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/slovak/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/russian/errmsg.txt
    1.129 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/romanian/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/portuguese/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/polish/errmsg.txt
    1.133 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/norwegian/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/norwegian-ny/errmsg.txt
    1.133 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/korean/errmsg.txt
    1.133 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/japanese/errmsg.txt
    1.131 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/italian/errmsg.txt
    1.139 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/hungarian/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/greek/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/german/errmsg.txt
    1.129 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/french/errmsg.txt
    1.134 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/estonian/errmsg.txt
    1.133 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/english/errmsg.txt
    1.149 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/dutch/errmsg.txt
    1.135 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/danish/errmsg.txt
    1.130 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/share/czech/errmsg.txt
    1.135 05/05/14 00:01:36 monty@mysql.com +0 -1
    Merge

  sql/item_func.cc
    1.243 05/05/14 00:01:36 monty@mysql.com +5 -5
    Merge

  mysql-test/t/outfile.test
    1.9 05/05/14 00:01:36 monty@mysql.com +1 -6
    Merge

  mysql-test/t/alter_table.test
    1.36 05/05/14 00:01:36 monty@mysql.com +9 -10
    Merge

  sql/handler.h
    1.139 05/05/13 23:34:05 monty@mysql.com +0 -0
    Auto merged

  mysql-test/t/innodb.test
    1.68 05/05/13 23:34:05 monty@mysql.com +10 -10
    Auto merged

  mysql-test/t/auto_increment.test
    1.22 05/05/13 23:34:05 monty@mysql.com +12 -12
    Auto merged

  mysql-test/r/innodb.result
    1.98 05/05/13 23:34:05 monty@mysql.com +4 -4
    Auto merged

  mysql-test/r/auto_increment.result
    1.31 05/05/13 23:34:05 monty@mysql.com +14 -14
    Auto merged

  mysql-test/r/alter_table.result
    1.47 05/05/13 23:34:05 monty@mysql.com +36 -36
    Auto merged

  myisam/mi_key.c
    1.33 05/05/13 23:34:05 monty@mysql.com +0 -0
    Auto merged

  mysql-test/r/outfile2.result
    1.2 05/05/13 23:34:04 monty@mysql.com +0 -0
    Merge rename: mysql-test/r/outfile.result -> mysql-test/r/outfile2.result

  BitKeeper/etc/logging_ok
    1.391 05/05/13 23:32:30 monty@mysql.com +0 -3
    auto-union

ChangeSet
  1.1346.1.759 05/05/13 23:08:29 monty@mysql.com +3 -0
  Fixed wrong buffer usage for auto-increment key with blob part that caused CHECK TABLE to report that the table was wrong. (Bug #10045)

  mysql-test/t/auto_increment.test
    1.5.1.4 05/05/13 23:08:27 monty@mysql.com +12 -0
    New test case

  mysql-test/r/auto_increment.result
    1.8.1.3 05/05/13 23:08:27 monty@mysql.com +14 -0
    New test case

  myisam/mi_key.c
    1.13.1.9 05/05/13 23:08:27 monty@mysql.com +21 -10
    Fixed wrong buffer usage for auto-increment key with blob part that caused
    CHECK TABLE to report that the table was wrong. (Bug #10045)

ChangeSet
  1.2260.8.1 05/05/13 21:43:26 serg@serg.mylan +2 -0
  sql/ha_blackhole.cc
      bug#10175 - blackhole.test hangs with "Warning: prev link 1 didn't point at previous lock at read: read lock with no write locks"
  sql/sql_base.cc
      libmysqld/examples/mysql.cc linking problem

  sql/sql_base.cc
    1.247 05/05/13 21:43:18 serg@serg.mylan +1 -1
    libmysqld/examples/mysql.cc linking problem

  sql/ha_blackhole.cc
    1.4 05/05/13 21:43:18 serg@serg.mylan +2 -1
    bug#10175 - blackhole.test hangs with "Warning: prev link 1 didn't point at previous lock at read: read lock with no write locks"

ChangeSet
  1.2260.6.3 05/05/13 18:37:22 heikki@hundin.mysql.fi +1 -0
  row0mysql.c:
    InnoDB wrongly complained in the .err log that MySQL is trying to drop a non-existent table, if tablespace ran out (Bug #10607)

  innobase/row/row0mysql.c
    1.91 05/05/13 18:36:34 heikki@hundin.mysql.fi +10 -2
    InnoDB wrongly complained in the .err log that MySQL is trying to drop a non-existent table, if tablespace ran out (Bug #10607)

ChangeSet
  1.2260.6.2 05/05/13 15:54:35 georg@lmy002.wdf.sap.corp +1 -0
  added prototype for mysql_set_character_set function

  include/mysql.h
    1.141 05/05/13 15:54:31 georg@lmy002.wdf.sap.corp +1 -0
    added prototype for mysql_set_character_set function

ChangeSet
  1.2260.6.1 05/05/13 15:06:11 georg@lmy002.wdf.sap.corp +2 -0
  added function mysql_set_character_set (reviewed by Monty)
  as a work around for #8317 and #9637
  
  This function sends SET NAMES command and changes mysql->charset
  so mysql_real_escape_string will work as expected.

  libmysql/libmysql.def
    1.35 05/05/13 15:06:07 georg@lmy002.wdf.sap.corp +1 -0
    added new function mysql_set_character_set

  libmysql/libmysql.c
    1.293 05/05/13 15:06:07 georg@lmy002.wdf.sap.corp +30 -0
    added function mysql_set_character_set (reviewed by Monty)
    as a work around for #8317 and #9637
    
    This function sends SET NAMES command and changes mysql->charset
    so mysql_real_escape_string will work as expected.

ChangeSet
  1.2260.5.1 05/05/13 14:04:32 monty@mysql.com +5 -0
  Fixes during review

  strings/ctype-ucs2.c
    1.40 05/05/13 14:04:27 monty@mysql.com +5 -3
    Cast pointer differencess

  sql/sql_yacc.yy
    1.382.1.3 05/05/13 14:04:27 monty@mysql.com +10 -19
    Combine code (and get a better error message)

  sql/hostname.cc
    1.29 05/05/13 14:04:27 monty@mysql.com +2 -2
    Join identical code

  mysql-test/t/select.test
    1.37 05/05/13 14:04:27 monty@mysql.com +2 -2
    Better error message

  mysql-test/r/select.result
    1.53 05/05/13 14:04:27 monty@mysql.com +2 -2
    Better error message

ChangeSet
  1.2260.1.8 05/05/13 11:59:17 kent@mysql.com +1 -0
  readline.h:
    Include <sys/ttydefaults.h> for CodeWarrior and CTRL define

  cmd-line-utils/libedit/readline/readline.h
    1.3 05/05/13 11:58:35 kent@mysql.com +1 -1
    Include <sys/ttydefaults.h> for CodeWarrior and CTRL define

ChangeSet
  1.1346.1.758 05/05/13 11:11:50 monty@mysql.com +5 -0
  Change create_field->offset to store offset from start of fields, independent of null bits.
  Count null_bits separately from field offsets and adjust them in case of primary key parts.
  (Previously a CREATE TABLE with a lot of null fields that was part of a primary key caused MySQL to wrongly count the number of bytes needed to store null bits)
  This is a more complete bug fix for #6236

  sql/unireg.cc
    1.13.1.7 05/05/13 11:11:48 monty@mysql.com +50 -33
    Change create_field->offset to store offset from start of fields, independent of null bits.
    Count null_bits separately from field offsets and adjust them in case of primary key parts.

  sql/sql_table.cc
    1.112.16.3 05/05/13 11:11:48 monty@mysql.com +14 -23
    Change create_field->offset to store offset from start of fields, independent of null bits.
    Count null_bits separately from field offsets and adjust them in case of primary key parts.

  sql/handler.h
    1.71.1.23 05/05/13 11:11:48 monty@mysql.com +1 -0
    Add counter for null fields

  mysql-test/t/alter_table.test
    1.12.1.10 05/05/13 11:11:48 monty@mysql.com +17 -0
    More test for bug #6236 (CREATE TABLE didn't properly count not null columns for primary keys)

  mysql-test/r/alter_table.result
    1.9.1.12 05/05/13 11:11:48 monty@mysql.com +16 -0
    More test for bug #6236 (CREATE TABLE didn't properly count not null columns for primary keys)

ChangeSet
  1.2259.2.5 05/05/13 10:04:35 lenz@mysql.com +1 -0
  - don't include sys.h directly in the autogenerated libedit source
    files - include config.h instead (compile fix for FreeBSD and AIX
    4.3/5.2)

  cmd-line-utils/libedit/makelist.sh
    1.8 05/05/13 10:04:31 lenz@mysql.com +2 -2
    - don't include sys.h directly in the autogenerated files - include
      config.h instead (compile fix for FreeBSD and AIX 4.3/5.2)

