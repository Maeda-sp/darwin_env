ChangeSet
  1.1827 04/05/13 22:07:51 heikki@hundin.mysql.fi +4 -0
  ha_innodb.cc, trx0trx.h, lock0lock.c, trx0trx.c:
  Reserve the MySQL LOCK_thread_count mutex when printing thd->query of
  an arbitrary transaction; if we are printing thd->query of a transaction that
  we know is currently executing inside InnoDB, then we know that MySQL cannot
  meanwhile change thd->query, and no need to reserve the MySQL mutex; note
  that this patch still leaves open the possibility of races in MySQL's
  thd->query_len

  sql/ha_innodb.cc
    1.207 04/05/13 22:01:11 heikki@hundin.mysql.fi +34 -14
    Reserve the MySQL LOCK_thread_count mutex when printing thd->query of an arbitrary transaction; if we are printing thd->query of the a transaction that we know is currently executing inside InnoDB, then we know that MySQL cannot meanwhile change thd->query, and no need to reserve the MySQL mutex; note that thsi patch still leaves aopen the possibility of races in MySQL's thd->query_len

  innobase/include/trx0trx.h
    1.30 04/05/13 22:00:54 heikki@hundin.mysql.fi +4 -2
    Reserve the MySQL LOCK_thread_count mutex when printing thd->query of an arbitrary transaction; if we are printing thd->query of the a transaction that we know is currently executing inside InnoDB, then we know that MySQL cannot meanwhile change thd->query, and no need to reserve the MySQL mutex; note that thsi patch still leaves aopen the possibility of races in MySQL's thd->query_len

  innobase/lock/lock0lock.c
    1.35 04/05/13 22:00:46 heikki@hundin.mysql.fi +34 -0
    Reserve the MySQL LOCK_thread_count mutex when printing thd->query of an arbitrary transaction; if we are printing thd->query of the a transaction that we know is currently executing inside InnoDB, then we know that MySQL cannot meanwhile change thd->query, and no need to reserve the MySQL mutex; note that thsi patch still leaves aopen the possibility of races in MySQL's thd->query_len

  innobase/trx/trx0trx.c
    1.38 04/05/13 22:00:36 heikki@hundin.mysql.fi +3 -1
    Reserve the MySQL LOCK_thread_count mutex when printing thd->query of an arbitrary transaction; if we are printing thd->query of the a transaction that we know is currently executing inside InnoDB, then we know that MySQL cannot meanwhile change thd->query, and no need to reserve the MySQL mutex; note that thsi patch still leaves aopen the possibility of races in MySQL's thd->query_len

ChangeSet
  1.1824.1.1 04/05/13 20:02:05 heikki@hundin.mysql.fi +1 -0
  ha_innodb.cc:
    A flawed fix of the thd->query race in SHOW INNODB STATUS; see the comments in code about how to fix this properly; we cannot use LOCK_thread_count to protect thd->query, because that will cause a deadlock of threads

  sql/ha_innodb.cc
    1.206 04/05/13 20:01:06 heikki@hundin.mysql.fi +26 -4
    A flawed fix of the thd->query race in SHOW INNODB STATUS; see the comments in code about how to fix this properly; we cannot use LOCK_thread_count to protect thd->query, because that will cause a deadlock of threads

ChangeSet
  1.1821.1.1 04/05/13 18:50:09 lenz@mysql.com +1 -0
   - make sure the binaries are executable before calling them during
     make_binary_distribution (bug#2857)

  scripts/make_binary_distribution.sh
    1.56 04/05/13 18:50:07 lenz@mysql.com +1 -0
     - make sure the binaries are executable before calling them (bug#2857)

ChangeSet
  1.1824 04/05/13 16:18:39 marko@hundin.mysql.fi +1 -0
  ha_innodb.cc:
    innobase_mysql_print_thd(): protect thd with LOCK_thread_count (Bug #3596)

  sql/ha_innodb.cc
    1.205 04/05/13 16:15:21 marko@hundin.mysql.fi +9 -2
    innobase_mysql_print_thd(): protect thd with LOCK_thread_count

ChangeSet
  1.1823 04/05/13 15:51:02 marko@hundin.mysql.fi +1 -0
  InnoDB: fixed bug in dict0dict.c: dict_index_name_print()

  innobase/dict/dict0dict.c
    1.51 04/05/13 15:49:07 marko@hundin.mysql.fi +1 -1
    dict_index_name_print(): output table name to file, not stderr

ChangeSet
  1.1822 04/05/13 15:28:56 marko@hundin.mysql.fi +1 -0
  InnoDB: Remove os_file_lock() from the 4.0 tree (unfix Bug #3608)

  innobase/os/os0file.c
    1.68 04/05/13 15:28:53 marko@hundin.mysql.fi +0 -41
    Remove os_file_lock()

ChangeSet
  1.1821 04/05/12 16:44:53 marko@hundin.mysql.fi +1 -0
  InnoDB: avoid some data races in innobase_mysql_print_thd() (Bug #3596)

  sql/ha_innodb.cc
    1.204 04/05/12 16:42:40 marko@hundin.mysql.fi +7 -6
    innobase_mysql_print_thd(): initial fix to Bug #3596

ChangeSet
  1.1820 04/05/12 10:40:04 marko@hundin.mysql.fi +1 -0
  eval0eval.c:
    Backport suppression of MSVC++ warning from 4.1

  innobase/eval/eval0eval.c
    1.5 04/05/12 10:12:02 marko@hundin.mysql.fi +1 -1
    Backport suppression of MSVC++ warning from 4.1

ChangeSet
  1.1819 04/05/12 01:23:27 lenz@mysql.com +1 -0
   - Bumped up version number from 4.0.19 -> 4.0.20
   - Tagged ChangeSet@1.1800.1.1 as "mysql-4.0.19"

  configure.in
    1.300 04/05/12 01:22:58 lenz@mysql.com +1 -1
     - Bumped up version number from 4.0.19 -> 4.0.20

ChangeSet
  1.1813.1.2 04/05/11 12:19:37 serg@serg.mylan +3 -0
  bug#3612 - Item_func_div set decimals incorrectly

  sql/item_func.cc
    1.109 04/05/11 12:19:35 serg@serg.mylan +1 -0
    bug#3612 - Item_func_div set decimals incorrectly

  mysql-test/t/type_float.test
    1.6 04/05/11 12:19:35 serg@serg.mylan +8 -0
    bug#3612 - Item_func_div set decimals incorrectly

  mysql-test/r/type_float.result
    1.9 04/05/11 12:19:35 serg@serg.mylan +15 -0
    bug#3612 - Item_func_div set decimals incorrectly

ChangeSet
  1.1817 04/05/11 11:05:02 marko@hundin.mysql.fi +10 -0
  InnoDB: Changed bug reporting address to http://bugs.mysql.com

  innobase/ut/ut0dbg.c
    1.4 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -1
    Changed bug reporting address to http://bugs.mysql.com

  innobase/trx/trx0rec.c
    1.11 04/05/11 11:04:58 marko@hundin.mysql.fi +9 -13
    Changed bug reporting address to http://bugs.mysql.com

  innobase/row/row0upd.c
    1.24 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -2
    Changed bug reporting address to http://bugs.mysql.com

  innobase/row/row0umod.c
    1.15 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -2
    Changed bug reporting address to http://bugs.mysql.com

  innobase/row/row0sel.c
    1.48 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -2
    Changed bug reporting address to http://bugs.mysql.com

  innobase/row/row0ins.c
    1.35 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -2
    Changed bug reporting address to http://bugs.mysql.com

  innobase/lock/lock0lock.c
    1.34 04/05/11 11:04:58 marko@hundin.mysql.fi +4 -2
    Changed bug reporting address to http://bugs.mysql.com

  innobase/ibuf/ibuf0ibuf.c
    1.25 04/05/11 11:04:58 marko@hundin.mysql.fi +3 -4
    Changed bug reporting address to http://bugs.mysql.com

  innobase/dict/dict0load.c
    1.14 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -1
    Changed bug reporting address to http://bugs.mysql.com

  innobase/btr/btr0btr.c
    1.28 04/05/11 11:04:58 marko@hundin.mysql.fi +1 -1
    Changed bug reporting address to http://bugs.mysql.com

ChangeSet
  1.1813.2.1 04/05/10 17:15:29 marko@hundin.mysql.fi +1 -0
  InnoDB: Fix assertion failure for orphaned tables in DROP DATABASE

  innobase/row/row0mysql.c
    1.65 04/05/10 17:15:26 marko@hundin.mysql.fi +3 -2
    Compare database part of table name with memcmp(), not strcmp()

ChangeSet
  1.1809.2.1 04/05/10 12:39:01 serg@serg.mylan +5 -0
  backport from 4.1:
  "phrase search" should not match partial words (it should not match 'paraphrase searches')

  mysql-test/t/fulltext.test
    1.44 04/05/10 12:38:58 serg@serg.mylan +1 -0
    backport from 4.1:
    "phrase search" should not match partial words (it should not match 'paraphrase searches')

  mysql-test/r/fulltext.result
    1.45 04/05/10 12:38:58 serg@serg.mylan +2 -1
    backport from 4.1:
    "phrase search" should not match partial words (it should not match 'paraphrase searches')

  myisam/ftdefs.h
    1.19 04/05/10 12:38:58 serg@serg.mylan +3 -2
    backport from 4.1:
    "phrase search" should not match partial words (it should not match 'paraphrase searches')

  myisam/ft_parser.c
    1.30 04/05/10 12:38:58 serg@serg.mylan +0 -9
    backport from 4.1:
    "phrase search" should not match partial words (it should not match 'paraphrase searches')

  myisam/ft_boolean_search.c
    1.62 04/05/10 12:38:58 serg@serg.mylan +19 -10
    backport from 4.1:
    "phrase search" should not match partial words (it should not match 'paraphrase searches')

ChangeSet
  1.1812.1.1 04/05/10 12:15:40 ingo@mysql.com +6 -0
  Fix replace_result of $MASTER_MYPORT instead of literal numbers.

  mysql-test/t/rpl_rotate_logs.test
    1.40 04/05/10 12:15:38 ingo@mysql.com +5 -5
    Fix replace_result of $MASTER_MYPORT instead of literal numbers.

  mysql-test/t/rpl_max_relay_size.test
    1.5 04/05/10 12:15:38 ingo@mysql.com +6 -6
    Fix replace_result of $MASTER_MYPORT instead of literal numbers.

  mysql-test/t/rpl_log_pos.test
    1.23 04/05/10 12:15:38 ingo@mysql.com +4 -4
    Fix replace_result of $MASTER_MYPORT instead of literal numbers.

  mysql-test/t/rpl_log.test
    1.15 04/05/10 12:15:38 ingo@mysql.com +3 -3
    Fix replace_result of $MASTER_MYPORT instead of literal numbers.

  mysql-test/t/rpl_error_ignored_table.test
    1.6 04/05/10 12:15:38 ingo@mysql.com +1 -1
    Fix replace_result of $MASTER_MYPORT instead of literal numbers.

  mysql-test/t/rpl000015.test
    1.22 04/05/10 12:15:38 ingo@mysql.com +1 -1
    Fix replace_result of $MASTER_MYPORT instead of literal numbers.
    The test case rpl000015 needs one exlpicit literal number.
    It changes partial master settings, which seems to reset other settings
    to their defaults. To test this is obviously the intent of this case.

ChangeSet
  1.1811.1.1 04/05/07 12:13:45 marko@hundin.mysql.fi +2 -0
  Fix auto_inc locking bug introduced in ChangeSet@1.1794.1.1

  mysql-test/r/innodb.result
    1.78 04/05/07 12:13:42 marko@hundin.mysql.fi +1 -1
    Revert ChangeSet@1.1794.1.1

  innobase/row/row0mysql.c
    1.64 04/05/07 12:13:42 marko@hundin.mysql.fi +1 -1
    Revert accidental modification to row_lock_table_autoinc_for_mysql()
    made in ChangeSet@1.1794.1.1 

ChangeSet
  1.1809.1.1 04/05/07 01:02:57 jani@a80-186-24-72.elisa-laajakaista.fi +2 -0
  Fixed a problem with option --where, which earlier was not dynamic. One was not able
  to use long query strings with it.
  Bug#3633

  BitKeeper/etc/logging_ok
    1.311.1.1 04/05/07 01:02:57 jani@a80-186-24-72.elisa-laajakaista.fi +1 -0
    Logging to logging@openlogging.org accepted

  client/mysqldump.c
    1.109 04/05/07 01:02:50 jani@a80-186-24-72.elisa-laajakaista.fi +47 -16
    Fixed a problem with option --where, which earlier was not dynamic. One was not able
    to use long query strings with it.
    Bug#3633

ChangeSet
  1.1807.1.1 04/05/06 22:55:30 guilhem@mysql.com +1 -0
  A DBUG_RETURN to match a DBUG_ENTER

  myisam/mi_dynrec.c
    1.34 04/05/06 22:55:28 guilhem@mysql.com +1 -1
    need DBUG_RETURN as we DBUG_ENTER

ChangeSet
  1.1795.1.2 04/05/06 16:15:46 ingo@mysql.com +2 -0
  Fix a forgotten skip of space at line begin for the 'system' command.

  BitKeeper/etc/logging_ok
    1.312 04/05/06 16:15:46 ingo@mysql.com +1 -0
    Logging to logging@openlogging.org accepted

  client/mysql.cc
    1.150 04/05/06 16:15:17 ingo@mysql.com +4 -0
    Fix a forgotten skip of space at line begin for the 'system' command.

ChangeSet
  1.1808 04/05/06 11:42:23 monty@mysql.com +1 -0
  Remove not used variable

  sql/sql_acl.cc
    1.124 04/05/06 11:42:22 monty@mysql.com +2 -2
    Remove not used variable

ChangeSet
  1.1800.2.1 04/05/05 21:50:51 guilhem@mysql.com +3 -0
  very minor changes: a STOP SLAVE in a replication test to get rid of a non critical message in slave.err,
  and a comment update

  sql/slave.cc
    1.276 04/05/05 21:50:48 guilhem@mysql.com +3 -3
    update comment about 4.1 now that 4.1 is fixed (in a few minutes, exactly)

  mysql-test/t/rpl_server_id2.test
    1.3 04/05/05 21:50:48 guilhem@mysql.com +4 -0
    We stop the slave before cleaning up otherwise we'll get
    'drop table t1' executed twice, so an error in the slave.err
    (not critical).

  mysql-test/r/rpl_server_id2.result
    1.3 04/05/05 21:50:48 guilhem@mysql.com +1 -0
    result update

ChangeSet
  1.1806 04/05/05 15:54:28 marko@hundin.mysql.fi +4 -0
  InnoDB portability fix: new function os_file_set_eof()

  sql/ha_innodb.cc
    1.203 04/05/05 15:54:25 marko@hundin.mysql.fi +1 -1
    Replace my_chsize() with os_file_set_eof()

  innobase/srv/srv0srv.c
    1.69 04/05/05 15:54:25 marko@hundin.mysql.fi +1 -5
    Replace chsize() or ftruncate() with os_file_set_eof()

  innobase/os/os0file.c
    1.67 04/05/05 15:54:25 marko@hundin.mysql.fi +17 -0
    Add os_file_set_eof()

  innobase/include/os0file.h
    1.22 04/05/05 15:54:24 marko@hundin.mysql.fi +8 -0
    Add os_file_set_eof()

ChangeSet
  1.1805 04/05/05 14:40:44 monty@mysql.com +1 -0
  Portability fix

  sql/ha_innodb.cc
    1.202 04/05/05 14:40:43 monty@mysql.com +1 -5
    Portability fix

ChangeSet
  1.1804 04/05/05 11:50:58 marko@hundin.mysql.fi +2 -0
  InnoDB: Truncate "<datadir>/innodb.status.<pid>" to its actual size
  (Bug #3596)

  sql/ha_innodb.cc
    1.201 04/05/05 11:50:55 marko@hundin.mysql.fi +5 -0
    Truncate "<datadir>/innodb.status.<pid>" to its actual size (Bug #3596)

  innobase/srv/srv0srv.c
    1.68 04/05/05 11:50:54 marko@hundin.mysql.fi +5 -0
    Truncate "<datadir>/innodb.status.<pid>" to its actual size (Bug #3596)

ChangeSet
  1.1803 04/05/05 11:40:17 marko@hundin.mysql.fi +1 -0
  InnoDB: os0file.c: Lock files exclusively (Bug #3608)

  innobase/os/os0file.c
    1.66 04/05/05 11:40:14 marko@hundin.mysql.fi +48 -7
    Lock files unless #defined __WIN__ or UNIV_HOTBACKUP (Bug #3608)

ChangeSet
  1.1800.1.5 04/05/04 21:47:39 greg@mysql.com +2 -0
  Fixes to Windows project files for 4.0.19

  VC++Files/mysql.dsw
    1.10 04/05/04 21:47:38 greg@mysql.com +3 -0
    Add dependency to prevent compile error

  VC++Files/client/mysqlclient.dsp
    1.9 04/05/04 21:47:38 greg@mysql.com +15 -11
    Add strxnmov to project files

ChangeSet
  1.1800.1.4 04/05/04 16:35:31 guilhem@mysql.com +2 -0
  useless fixes for --report-password and --show-slave-auth-info (almost undocumented options),
  just for beauty of truth.

  sql/slave.cc
    1.275 04/05/04 16:35:29 guilhem@mysql.com +1 -1
    report password when you must report password.

  sql/mysqld.cc
    1.493 04/05/04 16:35:28 guilhem@mysql.com +1 -1
    correcting sentence (even if option is not really usable,
    as it depends on report-user and report-password which are undocumented
    (and will stay like this)).

ChangeSet
  1.1793.1.1 04/05/04 15:48:40 guilhem@mysql.com +1 -0
  Fix for Bug#3357 "If the statement is long, the error message is trunc and important info is lost";
  in hard-coded replication messages, always put small-length info (error codes, explanation of the error) at the beginning,
  so that it is not cut by truncation if the query is very long (which happens if the query goes first).

  sql/log_event.cc
    1.154 04/05/04 15:48:35 guilhem@mysql.com +7 -10
    in hard-coded replication messages, always put small-length info (error codes, explanation of the error) at the beginning,
    so that it is not cut by truncation if the query is very long (which happens if the query goes first).

ChangeSet
  1.1800.1.2 04/05/04 14:36:23 serg@serg.mylan +2 -0
  don't rely on readdir() returning . and .. first

  sql/sql_db.cc
    1.70 04/05/04 14:36:20 serg@serg.mylan +6 -1
    don't rely on readdir() returning . and .. first

  sql/sql_base.cc
    1.178 04/05/04 14:36:20 serg@serg.mylan +7 -1
    don't rely on readdir() returning . and .. first

ChangeSet
  1.676.1.762 04/05/04 13:07:36 bell@sanja.is.com.ua +1 -0
  fixed db name and layout (can cause very rare race condition bug)

  sql/sql_acl.cc
    1.27.1.18 04/05/04 13:07:34 bell@sanja.is.com.ua +2 -2
    fixed db name and layout (can cause very rare race condition bug)

ChangeSet
  1.1800.1.1 04/05/03 18:26:50 serg@serg.mylan +1 -0
  compatibility fix. warning removed

  sql/item_timefunc.cc
    1.26 04/05/03 18:26:47 serg@serg.mylan +4 -4
    compatibility fix. warning removed

